<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chemistry Master Quiz | ‡§∞‡§∏‡§æ‡§Ø‡§® ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞‡•Ä</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --primary-text: #ffffff;
            --secondary-text: #e0e0e0;
            --accent-green: #00e676;
            --accent-red: #ff1744;
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            user-select: none;
        }

        body {
            background: #0f0c29;
            background: -webkit-linear-gradient(to right, #24243e, #302b63, #0f0c29);
            background: linear-gradient(to right, #24243e, #302b63, #0f0c29);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            color: var(--primary-text);
        }

        /* Animated Background Mesh */
        .background-mesh {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: radial-gradient(circle at 10% 20%, rgba(216, 27, 96, 0.4) 0%, transparent 40%),
                        radial-gradient(circle at 90% 80%, rgba(103, 58, 183, 0.4) 0%, transparent 40%);
            filter: blur(50px);
            animation: moveGradient 15s ease infinite alternate;
        }

        @keyframes moveGradient {
            0% { transform: scale(1); }
            100% { transform: scale(1.2); }
        }

        /* Glassmorphism Container */
        .container {
            width: 95%;
            max-width: 700px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 2rem;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        /* Screens */
        .screen {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Typography */
        h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
            text-align: center;
            background: linear-gradient(to right, #fff, #b3cdd1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h2 { font-size: 1.2rem; margin-bottom: 0.5rem; text-align: center; }
        
        .hindi-text {
            font-size: 0.9em;
            color: var(--secondary-text);
            font-weight: 400;
            display: block;
            margin-top: 4px;
        }

        /* Inputs & Controls */
        .control-group {
            width: 100%;
            margin: 1rem 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            background: rgba(0, 0, 0, 0.2);
            color: white;
            font-size: 1rem;
            outline: none;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(0,0,0,0.2);
            padding: 10px;
            border-radius: 12px;
        }

        /* Buttons */
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 1rem;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            color: white;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .btn:hover {
            transform: scale(1.02);
            box-shadow: 0 0 15px rgba(229, 46, 113, 0.5);
        }

        /* Quiz UI */
        .progress-bar {
            position: absolute;
            top: 0; left: 0;
            height: 4px;
            background: linear-gradient(90deg, #00c6ff, #0072ff);
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px #0072ff;
        }

        .quiz-header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .timer {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .pulse-red {
            color: var(--accent-red);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .question-box {
            width: 100%;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
        }

        .options-grid {
            width: 100%;
            display: grid;
            gap: 12px;
        }

        .option-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 12px;
            color: white;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .option-btn:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.15);
        }

        .option-btn.correct {
            background: rgba(0, 230, 118, 0.2) !important;
            border-color: var(--accent-green) !important;
        }

        .option-btn.wrong {
            background: rgba(255, 23, 68, 0.2) !important;
            border-color: var(--accent-red) !important;
        }

        .feedback-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
        }

        /* Result Screen */
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--accent-green) var(--score-deg), rgba(255,255,255,0.1) 0deg);
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
            position: relative;
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 130px;
            height: 130px;
            background: #24243e; /* Matches bg somewhat */
            border-radius: 50%;
        }

        .score-text {
            position: absolute;
            font-size: 2rem;
            font-weight: bold;
        }

        /* Confetti / Sad Face Overlay */
        #overlay-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .sad-emoji {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            z-index: 9999;
            animation: shake 0.5s;
            display: none;
        }

        @keyframes shake {
            0%, 100% { transform: translate(-50%, -50%); }
            25% { transform: translate(-55%, -50%); }
            75% { transform: translate(-45%, -50%); }
        }

        @media (max-width: 480px) {
            .container { padding: 1.5rem; width: 100%; height: 100vh; border-radius: 0; border: none; }
            h1 { font-size: 1.5rem; }
            .option-btn { padding: 12px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>

    <div class="background-mesh"></div>
    <canvas id="overlay-canvas"></canvas>
    <div class="sad-emoji" id="sadEmoji">üò¢</div>

    <div class="container">
        <div id="start-screen" class="screen active">
            <h1>Chemistry Master<br><span style="font-size:0.6em; color:#ddd">‡§∞‡§∏‡§æ‡§Ø‡§® ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞‡•Ä</span></h1>
            <p>50 Bilingual Questions (Eng/Hin)</p>
            
            <div class="control-group">
                <input type="number" id="timeInput" placeholder="Timer per Question (seconds) [Optional]">
                <div class="toggle-container">
                    <span>Shuffle Questions / ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∂‡§´‡§≤ ‡§ï‡§∞‡•á‡§Ç</span>
                    <input type="checkbox" id="shuffleToggle" style="width: 20px; height: 20px;">
                </div>
            </div>

            <button class="btn btn-primary" onclick="startQuiz()">Start Quiz / ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
        </div>

        <div id="quiz-screen" class="screen">
            <div class="progress-bar" id="progressBar"></div>
            
            <div class="quiz-header">
                <span id="q-counter">Q: 01/50</span>
                <div class="timer" id="timerDisplay">
                    <span>‚è≥</span> <span id="timeText">--</span>
                </div>
                <span id="scoreDisplay">Score: 0</span>
            </div>

            <div class="question-box">
                <h2 id="q-text-en">Question English</h2>
                <span class="hindi-text" id="q-text-hi">‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§π‡§ø‡§Ç‡§¶‡•Ä</span>
            </div>

            <div class="options-grid" id="options-container">
                </div>

            <button class="btn btn-secondary" onclick="finishQuiz()" style="margin-top: 20px; font-size: 0.9rem;">Finish & Show Results / ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</button>
        </div>

        <div id="result-screen" class="screen">
            <h1>Quiz Completed!</h1>
            <div class="score-circle" id="scoreCircle">
                <span class="score-text" id="finalScore">0%</span>
            </div>
            <h2 id="feedbackMsg">Well Done!</h2>
            <p id="statsText" style="text-align: center; color: #ccc; margin-bottom: 20px;"></p>
            <button class="btn btn-primary" onclick="location.reload()">Restart Quiz / ‡§™‡•Å‡§®: ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç</button>
        </div>
    </div>

<script>
    // --- DATA: 50 Questions Extracted & Translated ---
    const database = [
        { q: "Who proposed the 'Law of Conservation of Matter'?", q_hi: "‡§™‡§¶‡§æ‡§∞‡•ç‡§• ‡§ï‡•Ä ‡§Ö‡§®‡§∂‡•ç‡§µ‡§∞‡§§‡§æ ‡§ï‡§æ ‡§®‡§ø‡§Ø‡§Æ (Law of Conservation of Matter) ‡§ï‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§™‡§æ‡§¶‡§® ‡§ï‡§ø‡§∏‡§®‡•á ‡§ï‡§ø‡§Ø‡§æ?", options: ["Lavoisier", "Proust", "Dalton", "Richter"], correct: 0 },
        { q: "Who proposed the 'Law of Conservation of Mass'?", q_hi: "‡§¶‡•ç‡§∞‡§µ‡•ç‡§Ø‡§Æ‡§æ‡§® ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£ ‡§ï‡§æ ‡§®‡§ø‡§Ø‡§Æ ‡§ï‡§ø‡§∏‡§®‡•á ‡§™‡•ç‡§∞‡§§‡§ø‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à?", options: ["Proust", "Lavoisier", "Richter", "Dalton"], correct: 1 },
        { q: "In all samples of CO, the ratio of Carbon to Oxygen is always 3:4. This confirms which law?", q_hi: "‡§ï‡§æ‡§∞‡•ç‡§¨‡§® ‡§Æ‡•ã‡§®‡•ã‡§ï‡•ç‡§∏‡§æ‡§á‡§° ‡§ï‡•á ‡§∏‡§≠‡•Ä ‡§®‡§Æ‡•Ç‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§∞‡•ç‡§¨‡§® ‡§§‡§•‡§æ ‡§ë‡§ï‡•ç‡§∏‡•Ä‡§ú‡§® ‡§ï‡•á ‡§¶‡•ç‡§∞‡§µ‡•ç‡§Ø‡§Æ‡§æ‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ ‡§π‡§Æ‡•á‡§∂‡§æ 3:4 ‡§∞‡§π‡§§‡§æ ‡§π‡•à‡•§ ‡§Ø‡§π ‡§ï‡§ø‡§∏ ‡§®‡§ø‡§Ø‡§Æ ‡§ï‡•Ä ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?", options: ["Law of Constant Proportions", "Law of Conservation of Mass", "Law of Reciprocal Proportions", "Law of Multiple Proportions"], correct: 0 },
        { q: "Which of the following matches is INCORRECT?", q_hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§∏‡§π‡•Ä ‡§∏‡•Å‡§Æ‡•á‡§≤‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?", options: ["Conservation of Mass: Lavoisier", "Constant Proportions: Proust", "Multiple Proportions: Davy", "Reciprocal Proportions: Richter"], correct: 2 }, // Dalton proposed Multiple, not Davy
        { q: "If 6.3g NaHCO3 reacts with 10g HCl to form 12g NaCl and some CO2. What is the weight of CO2 released?", q_hi: "NaHCO3 ‡§ï‡§æ 6.3g, HCl ‡§ò‡•ã‡§≤ ‡§ï‡•á 10g ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Ö‡§≠‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡§∞ NaCl ‡§ï‡§æ ‡§§‡§•‡§æ CO2 ‡§¨‡§®‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ø‡§¶‡§ø NaCl 12g ‡§π‡•à ‡§§‡•ã ‡§Ö‡§≠‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•á‡§Ç ‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§π‡•ã‡§®‡•á ‡§µ‡§æ‡§≤‡•á CO2 ‡§ó‡•à‡§∏ ‡§ï‡§æ ‡§≠‡§æ‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?", options: ["3.4 g", "4.3 g", "2.8 g", "9.1 g"], correct: 1 },
        { q: "Who was the first to propose the Atomic Theory?", q_hi: "‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§∏‡§ø‡§¶‡•ç‡§ß‡§æ‡§®‡•ç‡§§ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§™‡§æ‡§¶‡§® ‡§∏‡§∞‡•ç‡§µ‡§™‡•ç‡§∞‡§•‡§Æ ‡§ï‡§ø‡§∏‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ?", options: ["Einstein", "John Dalton", "Rutherford", "Madam Curie"], correct: 1 },
        { q: "According to Dalton's theory, which is the smallest particle that can exist independently?", q_hi: "‡§°‡§æ‡§≤‡•ç‡§ü‡§® ‡§ï‡•á ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§∏‡§ø‡§¶‡•ç‡§ß‡§æ‡§®‡•ç‡§§ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞, ‡§ï‡•å‡§®-‡§∏‡§æ ‡§∏‡§¨‡§∏‡•á ‡§õ‡•ã‡§ü‡§æ ‡§ï‡§£ ‡§∏‡•ç‡§µ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∞‡§π ‡§∏‡§ï‡§§‡§æ ‡§π‡•à?", options: ["Ion", "Molecule", "Matter", "Atom"], correct: 3 }, // Dalton believed Atom was smallest. Modern view is Molecule, but context "According to Dalton". Actually, Dalton said Atom is smallest *particle*.
        { q: "Who proposed that the Atom is indivisible?", q_hi: "‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§Ö‡§≠‡§æ‡§ú‡•ç‡§Ø ‡§π‡•à, ‡§Ø‡§π ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏‡§®‡•á ‡§™‡•ç‡§∞‡§§‡§ø‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§•‡§æ?", options: ["Dalton", "Avogadro", "Berzelius", "Rutherford"], correct: 0 },
        { q: "Dalton's Atomic Theory can explain:", q_hi: "‡§°‡§æ‡§≤‡•ç‡§ü‡§® ‡§ï‡•á ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§∏‡§ø‡§¶‡•ç‡§ß‡§æ‡§®‡•ç‡§§ ‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ-", options: ["Laws of chemical combination", "Cannot explain laws", "Gay-Lussac's law", "All of these"], correct: 0 },
        { q: "Which one of the following is NOT correct?", q_hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§è‡§ï ‡§∏‡§π‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à-", options: ["All atoms of an element are identical", "Atoms of different elements have different mass", "Atoms combine to form compounds", "Atoms participating in reaction are not conserved"], correct: 3 },
        { q: "Which postulate of Dalton's theory explains the Law of Conservation of Mass?", q_hi: "‡§°‡§æ‡§≤‡•ç‡§ü‡§® ‡§ï‡•á ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§∏‡§ø‡§¶‡•ç‡§ß‡§æ‡§®‡•ç‡§§ ‡§ï‡•Ä ‡§ï‡•å‡§®-‡§∏‡•Ä ‡§Ö‡§µ‡§ß‡§æ‡§∞‡§£‡§æ ‡§¶‡•ç‡§∞‡§µ‡•ç‡§Ø‡§Æ‡§æ‡§® ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£ ‡§®‡§ø‡§Ø‡§Æ ‡§ï‡•Ä ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•Ä ‡§π‡•à?", options: ["Elements consist of atoms", "Atoms can neither be created nor destroyed", "Atoms combine in simple ratios", "Atoms combine in multiple ratios"], correct: 1 },
        { q: "What is the smallest particle of an element that takes part in a chemical reaction?", q_hi: "‡§§‡§§‡•ç‡§µ ‡§ï‡§æ ‡§∏‡§¨‡§∏‡•á ‡§õ‡•ã‡§ü‡§æ ‡§ï‡§£ ‡§ú‡•ã ‡§∞‡§æ‡§∏‡§æ‡§Ø‡§®‡§ø‡§ï ‡§Ö‡§≠‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•á‡§Ç ‡§≠‡§æ‡§ó ‡§≤‡•á‡§§‡§æ ‡§π‡•à, ‡§â‡§∏‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", options: ["Ion", "Molecule", "Atom", "All of these"], correct: 2 },
        { q: "Consider: 1. Atoms of same element are identical. 2. Atoms of different elements differ. Which are true?", q_hi: "‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡•Ä‡§ú‡§ø‡§è: 1. ‡§ï‡§ø‡§∏‡•Ä ‡§§‡§§‡•ç‡§µ ‡§ï‡•á ‡§∏‡§≠‡•Ä ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§è‡§ï ‡§∏‡§Æ‡§æ‡§® ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç. 2. ‡§§‡§§‡•ç‡§µ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§§‡§§‡•ç‡§µ ‡§∏‡•á ‡§≠‡§ø‡§®‡•ç‡§®. ‡§ï‡•å‡§®-‡§∏‡§æ ‡§∏‡§§‡•ç‡§Ø ‡§π‡•à?", options: ["Only 1", "Only 2", "Both 1 & 2", "Neither"], correct: 2 },
        { q: "The average size of an atom is:", q_hi: "‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§ï‡§æ ‡§î‡§∏‡§§ ‡§Ü‡§ï‡§æ‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à-", options: ["10^-10 m", "10^-15 m", "10^-20 m", "10^-30 m"], correct: 0 },
        { q: "Which element has the smallest atom?", q_hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡§ø‡§∏ ‡§§‡§§‡•ç‡§µ ‡§ï‡§æ ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§∏‡§¨‡§∏‡•á ‡§õ‡•ã‡§ü‡§æ ‡§π‡•à?", options: ["Hydrogen", "Carbon", "Nitrogen", "Oxygen"], correct: 0 },
        { q: "Consider statements about Dalton calling the smallest particle 'Compound Atom' and Avogadro naming it 'Molecule'. Which is correct?", q_hi: "‡§Ø‡•å‡§ó‡§ø‡§ï ‡§ï‡•á ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ‡§§‡§Æ ‡§ï‡§£ ‡§ï‡•ã ‡§ú‡•â‡§® ‡§°‡§æ‡§≤‡•ç‡§ü‡§® ‡§®‡•á '‡§Ø‡•å‡§ó‡§ø‡§ï ‡§Ö‡§£‡•Å' ‡§ï‡§π‡§æ ‡§•‡§æ‡•§ ... ‡§è‡§µ‡•ã‡§ó‡§æ‡§°‡•ç‡§∞‡•ã ‡§®‡•á '‡§Ö‡§£‡•Å' ‡§®‡§æ‡§Æ ‡§¶‡§ø‡§Ø‡§æ‡•§", options: ["Only 1", "Only 2", "Both 1 & 2", "Neither"], correct: 2 },
        { q: "Phosphorus is:", q_hi: "‡§´‡•â‡§∏‡•ç‡§´‡•ã‡§∞‡§∏ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç-", options: ["Monoatomic", "Diatomic", "Triatomic", "Tetra-atomic"], correct: 3 },
        { q: "Which one of the following is Monoatomic?", q_hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§è‡§ï ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å‡§ï ‡§π‡•à-", options: ["Oxygen", "Chlorine", "Helium", "Ozone"], correct: 2 },
        { q: "Which statement is FALSE?", q_hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§ï‡§•‡§® ‡§Ö‡§∏‡§§‡•ç‡§Ø ‡§π‡•à-", options: ["Inert gases are monoatomic", "Common gases are mostly diatomic", "Ozone is triatomic", "Water molecule is polyatomic"], correct: 1 }, // A bit ambiguous, but often B is targeted in these quizzes as some are not.
        { q: "Information obtained from a Chemical Symbol:", q_hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡§ø‡§∏‡•Ä ‡§§‡§§‡•ç‡§µ ‡§ï‡•á ‡§∞‡§æ‡§∏‡§æ‡§Ø‡§®‡§ø‡§ï ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§∏‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", options: ["Name of element", "One atom of element", "Mass of one atom", "All of these"], correct: 3 },
        { q: "Smallest particle not independent vs Smallest independent particle. Consider statements.", q_hi: "1. ‡§™‡§¶‡§æ‡§∞‡•ç‡§• ‡§ï‡§æ ‡§∏‡•Ç‡§ï‡•ç‡§∑‡•ç‡§Æ‡§§‡§Æ ‡§ï‡§£ ‡§ú‡•ã ‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§∞‡§π‡§§‡§æ (‡§™‡§∞‡§Æ‡§æ‡§£‡•Å). 2. ‡§ú‡•ã ‡§Æ‡•Å‡§ï‡•ç‡§§ ‡§Ö‡§µ‡§∏‡•ç‡§•‡§æ ‡§Æ‡•á‡§Ç ‡§∞‡§π‡§§‡§æ ‡§π‡•à (‡§Ö‡§£‡•Å).", options: ["Only 1", "Only 2", "Both 1 and 2", "Neither"], correct: 2 },
        { q: "What is the atomicity of a metal element usually?", q_hi: "‡§ß‡§æ‡§§‡•Å ‡§§‡§§‡•ç‡§µ ‡§ï‡•Ä ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å‡§ï‡•ç‡§§‡§æ ‡§ï‡§ø‡§§‡§®‡•Ä ‡§π‡•ã‡§§‡•Ä ‡§π‡•à-", options: ["1", "2", "3", "4"], correct: 0 },
        { q: "Carbon is:", q_hi: "‡§ï‡§æ‡§∞‡•ç‡§¨‡§® ‡§π‡•à-", options: ["Monoatomic", "Diatomic", "Triatomic", "Tetra-atomic"], correct: 0 },
        { q: "Molecules formed by same elements vs different elements. Consider statements.", q_hi: "1. ‡§Ö‡§£‡•Å‡§ì‡§Ç ‡§ï‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§∏‡§Æ‡§æ‡§® ‡§§‡§§‡•ç‡§µ‡•ã‡§Ç ‡§ï‡•á... 2. ‡§≠‡§ø‡§®‡•ç‡§®-‡§≠‡§ø‡§®‡•ç‡§® ‡§§‡§§‡•ç‡§µ‡•ã‡§Ç ‡§ï‡•á...‡•§", options: ["Only 1", "Only 2", "Both 1 and 2", "Neither"], correct: 2 },
        { q: "Atoms of most elements are reactive, atoms are stable as:", q_hi: "‡§Ö‡§ß‡§ø‡§ï‡§æ‡§Ç‡§∂ ‡§§‡§§‡•ç‡§µ ‡§ï‡•á ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§Ö‡§§‡•ç‡§Ø‡§Ç‡§§ ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§∂‡•Ä‡§≤ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç, ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç-", options: ["As molecules", "As ions", "As molecules or ions", "None"], correct: 2 },
        { q: "Number of atoms present in a molecule is called:", q_hi: "‡§ï‡§ø‡§∏‡•Ä ‡§™‡§¶‡§æ‡§∞‡•ç‡§• ‡§ï‡•á ‡§Ö‡§£‡•Å ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§Æ‡§æ‡§® ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å‡§ì‡§Ç ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡§π‡§≤‡§æ‡§§‡•Ä ‡§π‡•à-", options: ["Activity", "Atomicity", "Atomic number", "Valency"], correct: 1 },
        { q: "Which of the following exists as a Monoatomic molecule?", q_hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§è‡§ï ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å‡§ï ‡§Ö‡§£‡•Å ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§∞‡§π‡§§‡§æ ‡§π‡•à-", options: ["Chlorine", "Sulfur", "Phosphorus", "Argon"], correct: 3 },
        { q: "Chemical formula of a substance represents:", q_hi: "‡§ï‡§ø‡§∏‡•Ä ‡§™‡§¶‡§æ‡§∞‡•ç‡§• ‡§ï‡§æ ‡§∞‡§æ‡§∏‡§æ‡§Ø‡§®‡§ø‡§ï ‡§∏‡•Ç‡§§‡•ç‡§∞-", options: ["Name", "One molecule", "One mole of molecules", "All of these"], correct: 3 },
        { q: "Which is NOT correctly matched?", q_hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§è‡§ï ‡§∏‡•Å‡§Æ‡•á‡§≤‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à-", options: ["Sodium Phosphate: Na2PO4", "Calcium Nitrate: Ca(NO3)2", "Copper Sulphate: CuSO4", "Magnesium Chloride: MgCl2"], correct: 0 }, // Should be Na3PO4
        { q: "Which is NOT a Monovalent element?", q_hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§è‡§ï‡§¨‡§Ç‡§ß‡§ï ‡§§‡§§‡•ç‡§µ (Monovalent) ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?", options: ["Sodium", "Silver", "Iodine", "Aluminium"], correct: 3 },
        { q: "Valency shown by Mercury (Hg):", q_hi: "‡§™‡§æ‡§∞‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¶‡§∞‡•ç‡§∂‡§æ‡§Ø‡•Ä ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï‡§§‡§æ ‡§®‡§ø‡§Æ‡•ç‡§® ‡§Æ‡•á‡§Ç ‡§π‡•à-", options: ["+1 and -1", "+1 and +2", "+2 and +3", "+3 and +4"], correct: 1 },
        { q: "Formula of Bicarbonate ion is:", q_hi: "‡§¨‡§æ‡§á‡§ï‡§æ‡§∞‡•ç‡§¨‡•ã‡§®‡•á‡§ü ‡§Ü‡§Ø‡§® ‡§ï‡§æ ‡§∏‡•Ç‡§§‡•ç‡§∞ ‡§π‡•à-", options: ["BCO2-", "BCO3-", "HCO3-", "HCO2-"], correct: 2 },
        { q: "Which element shows variable valency?", q_hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§§‡§§‡•ç‡§µ ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§®‡§∂‡•Ä‡§≤ ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï‡§§‡§æ ‡§ï‡•ã ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?", options: ["Copper", "Iron", "Mercury", "All of these"], correct: 3 },
        { q: "Group of atoms electrically neutral is molecule. Molecules made of similar atoms. Statements check.", q_hi: "‡§∞‡§æ‡§∏‡§æ‡§Ø‡§®‡§ø‡§ï ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§¨‡§Ç‡§ß‡§ø‡§§... ‡§Ö‡§£‡•Å ‡§ï‡§π‡§≤‡§æ‡§§‡§æ ‡§π‡•à‡•§ ...", options: ["1 and 2", "2 and 3", "1 and 3", "1, 2 and 3"], correct: 3 },
        { q: "Formula of Chromium Sulphate:", q_hi: "‡§ï‡•ç‡§∞‡•ã‡§Æ‡§ø‡§Ø‡§Æ ‡§∏‡§≤‡•ç‡§´‡•á‡§ü ‡§ï‡§æ ‡§∏‡•Ç‡§§‡•ç‡§∞ ‡§π‡•ã‡§ó‡§æ-", options: ["CrSO4", "Cr2SO4", "Cr2(SO4)3", "Cr2SO4"], correct: 2 },
        { q: "What is formula of Chloride of divalent element M?", q_hi: "‡§è‡§ï ‡§¶‡•ç‡§µ‡§ø‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï ‡§§‡§§‡•ç‡§µ M ‡§ï‡•á ‡§ï‡•ç‡§≤‡•ã‡§∞‡§æ‡§á‡§° ‡§ï‡§æ ‡§∏‡•Ç‡§§‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?", options: ["MCl", "MCl2", "M2Cl", "M2Cl3"], correct: 1 },
        { q: "Carbonate of M is M2(CO3) or M2O3 (Check image context, assumes Oxide M2O3 -> Valency 3). Formula of Chloride?", q_hi: "‡§ß‡§æ‡§§‡•Å M ‡§ï‡•á ‡§ï‡§æ‡§∞‡•ç‡§¨‡•ã‡§®‡•á‡§ü (Context implies Oxide/Valency) ‡§ï‡§æ ‡§∏‡•Ç‡§§‡•ç‡§∞ M2O3 ‡§π‡•à‡•§ ‡§ï‡•ç‡§≤‡•ã‡§∞‡§æ‡§á‡§° ‡§ï‡§æ ‡§∏‡•Ç‡§§‡•ç‡§∞?", options: ["MCl", "M2Cl", "MCl3", "M4Cl3"], correct: 2 },
        { q: "Valency of Y is 4, what is formula of its Oxide?", q_hi: "‡§è‡§ï ‡§§‡§§‡•ç‡§µ Y ‡§ï‡•Ä ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï‡§§‡§æ 4 ‡§π‡•à, ‡§á‡§∏‡§ï‡•á ‡§ë‡§ï‡•ç‡§∏‡§æ‡§á‡§° ‡§ï‡§æ ‡§∏‡•Ç‡§§‡•ç‡§∞ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•ã‡§ó‡§æ?", options: ["YO", "YO2", "Y2O", "Y2O4"], correct: 1 },
        { q: "Combining capacity of an element is called?", q_hi: "‡§ï‡§ø‡§∏‡•Ä ‡§§‡§§‡•ç‡§µ ‡§ï‡•Ä ‡§ï‡§ø‡§∏‡•Ä ‡§Ö‡§®‡•ç‡§Ø ‡§§‡§§‡•ç‡§µ... ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§® ‡§ï‡•ç‡§∑‡§Æ‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§≤‡§æ‡§§‡§æ ‡§π‡•à?", options: ["Electron affinity", "Electropositivity", "Electronegativity", "Valency"], correct: 3 },
        { q: "Formula of sodium salt is Na2X. Formula of Aluminium salt?", q_hi: "‡§Ø‡§¶‡§ø ‡§è‡§ï ‡§ã‡§£‡§æ‡§Ø‡§® X ‡§ï‡•á ‡§∏‡•ã‡§°‡§ø‡§Ø‡§Æ ‡§≤‡§µ‡§£ ‡§ï‡§æ ‡§∏‡•Ç‡§§‡•ç‡§∞ Na2X ‡§π‡•à, ‡§§‡•ã ‡§á‡§∏‡§ï‡•á ‡§ê‡§≤‡•Å‡§Æ‡§ø‡§®‡§ø‡§Ø‡§Æ ‡§≤‡§µ‡§£ ‡§ï‡§æ ‡§∏‡•Ç‡§§‡•ç‡§∞?", options: ["Al2X3", "AlX", "Al3X2", "AlX3"], correct: 0 },
        { q: "Which is a Trivalent element?", q_hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§§‡•ç‡§∞‡§ø‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï (Trivalent) ‡§§‡§§‡•ç‡§µ ‡§π‡•à?", options: ["Boron", "Carbon", "Zinc", "Sodium"], correct: 0 },
        { q: "Element A (Valency 3,5), B (Valency 2). Compounds formed?", q_hi: "‡§è‡§ï ‡§§‡§§‡•ç‡§µ A ‡§ï‡•Ä ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï‡§§‡§æ 3 ‡§§‡§•‡§æ 5 ‡§π‡•à‡•§ ‡§Ø‡§π B (2) ‡§∏‡•á ‡§∏‡§Ç‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§∏‡•Ç‡§§‡•ç‡§∞?", options: ["A2B3 and A2B5", "A2B3 and A3B5", "A5B3 and A2B5", "A3B2 and A6B2"], correct: 0 },
        { q: "Valency of A is 3, B is 2. Formula of compound?", q_hi: "‡§§‡§§‡•ç‡§µ A ‡§î‡§∞ B ‡§ï‡•Ä ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡§ï‡§§‡§æ ‡§ï‡•ç‡§∞‡§Æ‡§∂‡§É 3 ‡§î‡§∞ 2 ‡§π‡•à‡•§ ‡§∏‡•Ç‡§§‡•ç‡§∞ ‡§π‡•ã‡§ó‡§æ-", options: ["A2B3", "AB6", "A3B2", "A6B5"], correct: 0 },
        { q: "Mass of atom is 16 times of 1/12th of C-12. Mass in amu?", q_hi: "‡§ï‡§ø‡§∏‡•Ä ‡§§‡§§‡•ç‡§µ ‡§ï‡•á ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§ï‡§æ ‡§¶‡•ç‡§∞‡§µ‡•ç‡§Ø‡§Æ‡§æ‡§® C-12 ‡§ï‡•á 12‡§µ‡•á‡§Ç ‡§≠‡§æ‡§ó ‡§ï‡§æ 16 ‡§ó‡•Å‡§£‡§æ ‡§π‡•à, ‡§§‡•ã amu ‡§Æ‡•á‡§Ç ‡§¶‡•ç‡§∞‡§µ‡•ç‡§Ø‡§Æ‡§æ‡§®?", options: ["8 amu", "16 amu", "24 amu", "32 amu"], correct: 1 },
        { q: "How many times heavier is Nitrogen (14) than 1/12th of C-12?", q_hi: "‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§® ‡§ï‡§æ ‡§è‡§ï ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å C-12 ‡§ï‡•á 12‡§µ‡•á‡§Ç ‡§≠‡§æ‡§ó ‡§∏‡•á ‡§ï‡§ø‡§§‡§®‡§æ ‡§ó‡•Å‡§£‡§æ ‡§≠‡§æ‡§∞‡•Ä ‡§π‡•à-", options: ["8 times", "10 times", "14 times", "22 times"], correct: 2 },
        { q: "Atomic mass unit (amu) is equivalent to:", q_hi: "‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§¶‡•ç‡§∞‡§µ‡•ç‡§Ø‡§Æ‡§æ‡§® ‡§á‡§ï‡§æ‡§à (amu) ‡§ï‡§ø‡§∏‡§ï‡•á ‡§§‡•Å‡§≤‡•ç‡§Ø ‡§π‡•à-", options: ["1/12 of mass of C-12 atom", "1/14 of C-14", "1/12 of U-235", "1/14 of C-238"], correct: 0 },
        { q: "1 amu is equal to (in grams):", q_hi: "1 amu ‡§¨‡§∞‡§æ‡§¨‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à-", options: ["1 g", "1 x 10^-24 g", "4 x 10^-24 g", "1.66 x 10^-24 g"], correct: 3 },
        { q: "Magnesium atomic mass 24 amu. Gram atomic mass?", q_hi: "‡§Æ‡•à‡§ó‡•ç‡§®‡•Ä‡§∂‡§ø‡§Ø‡§Æ ‡§ï‡§æ ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§¶‡•ç‡§∞‡§µ‡•ç‡§Ø‡§Æ‡§æ‡§® 24 amu ‡§π‡•à, ‡§§‡•ã ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§¶‡•ç‡§∞‡§µ‡•ç‡§Ø‡§Æ‡§æ‡§®?", options: ["16 g", "18 g", "32 g", "24 g"], correct: 3 }, // Fixed option D to 24g logic from question, though image cuts off D, standard logic applies.
        { q: "Sample 0.24g, Boron 0.096g, Oxygen 0.144g. Percentage of Boron?", q_hi: "0.24 ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§®‡§Æ‡•Ç‡§®‡•á... ‡§¨‡•ã‡§∞‡•â‡§® 0.096 ‡§ó‡•ç‡§∞‡§æ‡§Æ... ‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§ ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ?", options: ["40%", "20%", "60%", "30%"], correct: 0 },
        { q: "Dalton's symbols: Hydrogen representation?", q_hi: "‡§°‡§æ‡§≤‡•ç‡§ü‡§® ‡§ï‡•á ‡§§‡§§‡•ç‡§µ ‡§ï‡•á ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï ‡§ö‡§ø‡§π‡•ç‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§π‡§æ‡§á‡§°‡•ç‡§∞‡•ã‡§ú‡§® ‡§ï‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï ‡§•‡§æ?", options: ["Circle with dot", "Circle", "Circle with cross", "Mercedes sign"], correct: 0 }
    ];

    // --- LOGIC ---
    let currentQ = 0;
    let score = 0;
    let timerInterval;
    let timeLeft = 0;
    let userSettings = { timePerQ: 0, shuffle: false };
    let quizData = [];
    let isAnswered = false;

    // Audio Context
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    
    function playTone(freq, type, duration) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = type;
        osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
        gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();
        osc.stop(audioCtx.currentTime + duration);
    }

    function playSuccess() {
        playTone(600, 'sine', 0.1);
        setTimeout(() => playTone(800, 'sine', 0.2), 100);
    }

    function playFailure() {
        playTone(300, 'sawtooth', 0.3);
    }

    // Shuffle Array
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function startQuiz() {
        // Settings
        const tInput = document.getElementById('timeInput').value;
        userSettings.timePerQ = tInput ? parseInt(tInput) : 0;
        userSettings.shuffle = document.getElementById('shuffleToggle').checked;

        // Prepare Data
        quizData = [...database];
        if (userSettings.shuffle) shuffleArray(quizData);

        // UI Transition
        document.getElementById('start-screen').classList.remove('active');
        document.getElementById('quiz-screen').classList.add('active');

        // Init
        currentQ = 0;
        score = 0;
        loadQuestion();
    }

    function loadQuestion() {
        if (currentQ >= quizData.length) {
            finishQuiz();
            return;
        }

        isAnswered = false;
        const qData = quizData[currentQ];
        
        // Update Header
        document.getElementById('q-counter').innerText = `Q: ${currentQ + 1}/${quizData.length}`;
        document.getElementById('scoreDisplay').innerText = `Score: ${score}`;
        document.getElementById('progressBar').style.width = `${((currentQ) / quizData.length) * 100}%`;

        // Update Text
        document.getElementById('q-text-en').innerText = qData.q;
        document.getElementById('q-text-hi').innerText = qData.q_hi;

        // Render Options
        const optContainer = document.getElementById('options-container');
        optContainer.innerHTML = '';
        
        qData.options.forEach((opt, index) => {
            const btn = document.createElement('div');
            btn.className = 'option-btn';
            btn.innerHTML = `<span>${String.fromCharCode(65 + index)}. ${opt}</span>`;
            btn.onclick = () => handleAnswer(index, btn);
            optContainer.appendChild(btn);
        });

        // Timer Logic
        clearInterval(timerInterval);
        document.getElementById('timeText').classList.remove('pulse-red');
        
        if (userSettings.timePerQ > 0) {
            timeLeft = userSettings.timePerQ;
            document.getElementById('timeText').innerText = timeLeft;
            document.getElementById('timerDisplay').style.display = 'flex';
            
            timerInterval = setInterval(() => {
                timeLeft--;
                const tText = document.getElementById('timeText');
                tText.innerText = timeLeft;
                
                if (timeLeft <= 5) tText.classList.add('pulse-red');
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    handleTimeOut();
                }
            }, 1000);
        } else {
            document.getElementById('timerDisplay').style.display = 'none';
        }
    }

    function handleAnswer(selectedIndex, btnElement) {
        if (isAnswered) return;
        isAnswered = true;
        clearInterval(timerInterval);

        const correctIndex = quizData[currentQ].correct;
        const allBtns = document.querySelectorAll('.option-btn');

        if (selectedIndex === correctIndex) {
            // Correct
            score++;
            btnElement.classList.add('correct');
            btnElement.innerHTML += '<span class="feedback-icon">‚úÖ</span>';
            playSuccess();
            triggerConfetti();
        } else {
            // Wrong
            btnElement.classList.add('wrong');
            btnElement.innerHTML += '<span class="feedback-icon">‚ùå</span>';
            // Show Correct
            allBtns[correctIndex].classList.add('correct');
            allBtns[correctIndex].innerHTML += '<span class="feedback-icon">‚úÖ</span>';
            playFailure();
            showSadEmoji();
        }

        // Disable all
        allBtns.forEach(b => b.style.pointerEvents = 'none');

        // Next Q Delay
        setTimeout(() => {
            currentQ++;
            loadQuestion();
        }, 1500);
    }

    function handleTimeOut() {
        if (isAnswered) return;
        isAnswered = true;
        const correctIndex = quizData[currentQ].correct;
        const allBtns = document.querySelectorAll('.option-btn');
        
        allBtns[correctIndex].classList.add('correct');
        playFailure();
        showSadEmoji();
        
        setTimeout(() => {
            currentQ++;
            loadQuestion();
        }, 1500);
    }

    function finishQuiz() {
        clearInterval(timerInterval);
        document.getElementById('quiz-screen').classList.remove('active');
        document.getElementById('result-screen').classList.add('active');

        const percentage = Math.round((score / (currentQ === 0 ? 1 : currentQ)) * 100); // Score based on questions attempted if early exit, or total? Usually total for early exit implies "giving up", but let's base it on attempted or total. Prompt says "Show results based on questions answered so far".
        
        // Actually, "based on questions answered so far" implies the denominator is currentQ.
        // However, standard quizzes usually count remaining as 0. Let's do Denominator = currentQ (if >0).
        const total = currentQ === 0 ? 1 : currentQ; // Prevent div by 0
        const finalPercent = Math.round((score / total) * 100);

        // Update Circle
        const circle = document.getElementById('scoreCircle');
        circle.style.setProperty('--score-deg', `${finalPercent * 3.6}deg`);
        document.getElementById('finalScore').innerText = `${finalPercent}%`;

        // Message
        const msg = document.getElementById('feedbackMsg');
        if (finalPercent >= 80) msg.innerText = "üèÜ Outstanding Performance!";
        else if (finalPercent >= 50) msg.innerText = "üëè Well Done! Keep it up.";
        else msg.innerText = "üìö Practice makes perfect!";

        document.getElementById('statsText').innerText = `You scored ${score} out of ${total} questions attempted.`;
    }

    // --- ANIMATIONS ---
    function showSadEmoji() {
        const el = document.getElementById('sadEmoji');
        el.style.display = 'block';
        setTimeout(() => { el.style.display = 'none'; }, 1000);
    }

    // Simple Confetti Canvas
    function triggerConfetti() {
        const canvas = document.getElementById('overlay-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        let particles = [];
        const colors = ['#00e676', '#2979ff', '#ff1744', '#ffea00'];

        for(let i=0; i<100; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                w: Math.random() * 10 + 5,
                h: Math.random() * 10 + 5,
                color: colors[Math.floor(Math.random() * colors.length)],
                speed: Math.random() * 5 + 2,
                angle: Math.random() * 360
            });
        }

        let animationId;
        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            let active = false;
            particles.forEach(p => {
                p.y += p.speed;
                p.angle += 2;
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.angle * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
                ctx.restore();
                if(p.y < canvas.height) active = true;
            });

            if(active) requestAnimationFrame(update);
            else ctx.clearRect(0,0, canvas.width, canvas.height);
        }
        update();
    }
</script>
</body>
</html>