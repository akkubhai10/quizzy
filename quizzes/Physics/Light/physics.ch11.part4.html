<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics Master Quiz (Q151-198)</title>
    <style>
        /* --- FONTS & GLOBAL --- */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

        :root {
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --accent-green: #00e676;
            --accent-red: #ff1744;
            --accent-blue: #2979ff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            /* Vibrant Mesh Gradient */
            background: 
                radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            background-color: #0f0c29;
            background-size: 200% 200%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            color: var(--text-primary);
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- GLASSMORPHISM CARD --- */
        .app-container {
            width: 100%;
            max-width: 800px;
            min-height: 85vh;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 25px;
            position: relative;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            display: flex;
            flex-direction: column;
            margin: 10px;
            transition: height 0.3s ease;
        }

        /* --- UTILITY & ANIMATION --- */
        .hidden { display: none !important; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        @keyframes pulseRed { 0% { color: white; } 50% { color: #ff1744; text-shadow: 0 0 10px #ff1744; transform: scale(1.1); } 100% { color: white; } }

        .fade-in { animation: fadeIn 0.5s ease forwards; }
        .shake { animation: shake 0.4s ease; }
        .pulse-text { animation: pulseRed 0.8s infinite; font-weight: bold; }

        /* --- START SCREEN --- */
        .start-screen {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex-grow: 1;
            gap: 20px;
        }

        .title h1 { font-size: 2.5rem; font-weight: 700; text-shadow: 0 4px 15px rgba(0,0,0,0.3); margin-bottom: 5px; background: linear-gradient(to right, #00c6ff, #0072ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent;}
        .title p { font-size: 1rem; color: var(--text-secondary); letter-spacing: 1px; }

        .controls {
            background: rgba(0,0,0,0.2);
            padding: 25px;
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .input-group { margin-bottom: 20px; text-align: left; }
        .input-group label { display: block; font-size: 0.9rem; margin-bottom: 8px; color: #ccc; }
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
            outline: none;
            transition: 0.3s;
        }
        .input-group input:focus { background: rgba(255,255,255,0.2); border-color: rgba(255,255,255,0.3); }

        .btn-start {
            background: linear-gradient(135deg, #F09819 0%, #EDDE5D 100%); /* Gold/Yellow */
            border: none;
            padding: 15px 50px;
            border-radius: 50px;
            color: #333;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(240, 152, 25, 0.4);
            margin-top: 10px;
        }
        .btn-start:hover { transform: scale(1.05); box-shadow: 0 6px 20px rgba(240, 152, 25, 0.6); }

        /* --- QUIZ UI --- */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--glass-border);
            margin-bottom: 20px;
            position: relative;
        }

        .progress-bar-container {
            position: absolute;
            top: -25px; left: -25px;
            width: calc(100% + 50px);
            height: 6px;
            background: rgba(255,255,255,0.05);
            border-radius: 25px 25px 0 0;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #11998e, #38ef7d);
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px rgba(56, 239, 125, 0.7);
        }

        .header-item { text-align: center; }
        .header-label { font-size: 0.8rem; color: #aaa; display: block; text-transform: uppercase; letter-spacing: 1px; }
        .header-value { font-size: 1.3rem; font-weight: 700; }

        .timer-circle {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: rgba(0,0,0,0.2);
            border: 2px solid rgba(255,255,255,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.2rem;
            transition: color 0.3s;
        }

        .question-box { margin-bottom: 30px; padding: 10px; }
        .q-en { font-size: 1.3rem; font-weight: 600; display: block; margin-bottom: 10px; line-height: 1.4; color: #fff; }
        .q-hi { font-size: 1.1rem; color: #ddd; display: block; font-weight: 400; line-height: 1.5; }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        @media (max-width: 650px) { .options-grid { grid-template-columns: 1fr; } }

        .option-btn {
            background: rgba(255,255,255,0.08);
            border: 1px solid var(--glass-border);
            padding: 18px;
            border-radius: 16px;
            color: white;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        .option-btn:hover { background: rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.4); transform: translateY(-2px); }
        .option-btn span { display: block; pointer-events: none; }
        .opt-en { font-weight: 600; font-size: 1rem; margin-bottom: 5px; color: #fff; }
        .opt-hi { font-size: 0.9rem; color: #bbb; }

        /* Feedback States */
        .correct { 
            background: rgba(0, 230, 118, 0.2) !important; 
            border-color: var(--accent-green) !important; 
            box-shadow: 0 0 15px rgba(0, 230, 118, 0.3);
        }
        .wrong { 
            background: rgba(255, 23, 68, 0.2) !important; 
            border-color: var(--accent-red) !important; 
            box-shadow: 0 0 15px rgba(255, 23, 68, 0.3);
        }

        /* Large Emoji Overlay */
        .feedback-overlay {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 6rem;
            z-index: 20;
            pointer-events: none;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5));
        }

        .btn-finish {
            margin-top: 30px;
            width: 100%;
            padding: 15px;
            background: rgba(255, 23, 68, 0.1);
            border: 1px solid rgba(255, 23, 68, 0.3);
            color: #ff8a80;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .btn-finish:hover { background: var(--accent-red); color: white; box-shadow: 0 5px 15px rgba(255, 23, 68, 0.4); }

        /* --- RESULT SCREEN --- */
        .result-screen { text-align: center; padding: 20px; display: flex; flex-direction: column; justify-content: center; height: 100%; }
        .score-circle {
            width: 150px; height: 150px;
            border-radius: 50%;
            border: 8px solid rgba(255,255,255,0.1);
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 800;
            background: rgba(0,0,0,0.2);
            color: var(--accent-green);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .message { font-size: 1.8rem; margin-bottom: 30px; font-weight: 600; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; }
        .stat-item { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); }
        
        /* --- CONFETTI CANVAS --- */
        #confetti {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;
        }
    </style>
</head>
<body>

    <canvas id="confetti"></canvas>

    <div class="app-container">
        
        <div id="start-screen" class="start-screen fade-in">
            <div class="title">
                <h1>Physics Master</h1>
                <p>Questions 151-198 (Bilingual)</p>
            </div>
            
            <div class="controls">
                <div class="input-group">
                    <label>Timer per Question (Seconds)</label>
                    <input type="number" id="timerInput" placeholder="e.g. 20 (Leave 0 for no timer)" min="5">
                </div>
                <div class="input-group">
                    <label>Shuffle Questions?</label>
                    <select id="shuffleInput">
                        <option value="yes">Yes (Randomize)</option>
                        <option value="no">No (Sequential)</option>
                    </select>
                </div>
                <button class="btn-start" onclick="startGame()">Start Quiz</button>
            </div>
        </div>

        <div id="quiz-screen" class="hidden">
            <div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div>
            
            <div class="quiz-header">
                <div class="header-item">
                    <span class="header-label">Question</span>
                    <div class="header-value" id="q-counter">151/198</div>
                </div>
                <div class="header-item">
                    <span class="header-label">Score</span>
                    <div class="header-value" style="color: var(--accent-green);" id="score-display">0</div>
                </div>
                <div id="timer-display" class="timer-circle hidden">--</div>
            </div>

            <div class="question-box">
                <span id="q-text-en" class="q-en">Loading...</span>
                <span id="q-text-hi" class="q-hi">Loading...</span>
            </div>

            <div id="options-container" class="options-grid">
                </div>

            <div id="feedback-emoji" class="feedback-overlay hidden"></div>

            <button class="btn-finish" onclick="finishGame()">Finish & Show Results</button>
        </div>

        <div id="result-screen" class="hidden result-screen fade-in">
            <h2 style="margin-bottom: 20px;">Quiz Summary</h2>
            <div class="score-circle" id="final-score">0%</div>
            <p id="final-message" class="message">Message</p>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <small style="color:#aaa; display:block; margin-bottom:5px;">Attempted</small>
                    <div id="stat-total" style="font-weight:bold; font-size:1.4rem;">0</div>
                </div>
                <div class="stat-item">
                    <small style="color:#aaa; display:block; margin-bottom:5px;">Correct</small>
                    <div id="stat-correct" style="font-weight:bold; font-size:1.4rem; color: var(--accent-green)">0</div>
                </div>
            </div>

            <button class="btn-start" onclick="location.reload()">Restart Quiz</button>
        </div>

    </div>

<script>
/* DATA SOURCE: 
   Transcribed Questions 151 - 198 from provided images.
*/
const rawQuestions = [
    {
        qEn: "An air bubble inside a glass slab behaves like:",
        qHi: "एक गोलाकार वायु का बुलबुला किसी कांच के टुकड़े में अन्तःस्थापित है। उस बुलबुले से गुजरती हुई प्रकाश की किरण के लिए वह बुलबुला किसकी तरह व्यवहार करता है ?",
        opts: [
            { en: "Converging Lens", hi: "अभिसारी लेंस" },
            { en: "Diverging Lens", hi: "अपसारी लेंस", correct: true },
            { en: "Plane Converging", hi: "समतल अभिसारी लेंस" },
            { en: "Plane Diverging", hi: "समतल अपसारी लेंस" }
        ]
    },
    {
        qEn: "Red light is used in traffic signals because:",
        qHi: "यातायात सिग्नलों में लाल प्रकाश प्रयुक्त किया जाता है, क्योंकि–",
        opts: [
            { en: "Color of blood is red", hi: "खून का रंग लाल है" },
            { en: "Animals can identify red", hi: "प्राणी (जीव-जन्तु) लाल रंग पहचान सकते है" },
            { en: "Red light scatters the least", hi: "लाल रंग सबसे कम परिक्षेपित होता है", correct: true },
            { en: "Red is symbol of danger", hi: "लाल खतरे का प्रतीक है" }
        ]
    },
    {
        qEn: "The sea appears blue due to:",
        qHi: "समुद्र नीला प्रतीत होता है–",
        opts: [
            { en: "Excess depth", hi: "अधिक गहराई के कारण" },
            { en: "Reflection of sky and scattering by water particles", hi: "आकाश के परावर्तन तथा जल के कणों द्वारा प्रकाश के प्रकीर्णन के कारण", correct: true },
            { en: "Blue color of water", hi: "जल के नीले रंग के कारण" },
            { en: "Water surface property", hi: "जल की ऊपरी सतह के कारण" }
        ]
    },
    {
        qEn: "Why does the sun appear reddish at sunrise and sunset?",
        qHi: "सूर्योदय और सूर्यास्त के समय वायुमण्डल में लालिमा किस कारण छा जाती है ?",
        opts: [
            { en: "Refraction of light", hi: "प्रकाश के अपवर्तन" },
            { en: "Reflection of light", hi: "प्रकाश के परावर्तन" },
            { en: "Dispersion of light", hi: "प्रकाश के परिक्षेपण" },
            { en: "Scattering of light", hi: "प्रकाश के प्रकीर्णन", correct: true }
        ]
    },
    {
        qEn: "Which color deviates the most in a rainbow?",
        qHi: "इन्द्रधनुष में किस रंग का विक्षेपण अधिक होता है ?",
        opts: [
            { en: "Violet", hi: "बैगनी", correct: true },
            { en: "Yellow", hi: "पीला" },
            { en: "Red", hi: "लाल" },
            { en: "Blue", hi: "नीला" }
        ]
    },
    {
        qEn: "Stars appear higher than they actually are. This is explained by:",
        qHi: "तारे आकाश में वास्तव में जितनी ऊँचाई पर होते है, वे उससे अधिक ऊँचाई पर प्रतीत होते है। इसकी व्याख्या किसके द्वारा की जा सकती है ?",
        opts: [
            { en: "Atmospheric Refraction", hi: "वायुमण्डलीय अपवर्तन", correct: true },
            { en: "Dispersion of light", hi: "प्रकाश का विक्षेपण" },
            { en: "Total Internal Reflection", hi: "पूर्ण आंतरिक परावर्तन" },
            { en: "Diffraction of light", hi: "प्रकाश का विवर्तन" }
        ]
    },
    {
        qEn: "Why does dry sand appear shiny while wet sand is dull?",
        qHi: "सूखा बालू चमकीला क्यों दिखायी देता है, जबकि गीला बालू द्युतिहीन होता है ?",
        opts: [
            { en: "It is an optical illusion", hi: "यह एक प्रकाशीय भ्रम है" },
            { en: "Due to Reflection", hi: "इसका कारण परावर्तन है", correct: true },
            { en: "Due to Refraction", hi: "इसका कारण अपवर्तन है" },
            { en: "Due to Scattering", hi: "इसका कारण प्रकीर्णन है" }
        ]
    },
    {
        qEn: "Which mirror is used in making a Periscope?",
        qHi: "पेरिस्कोप बनाने में निम्नलिखित में से कौन-सा एक प्रयुक्त होता है ?",
        opts: [
            { en: "Concave lens", hi: "अवतल लेंस" },
            { en: "Concave mirror", hi: "अवतल दर्पण" },
            { en: "Plane mirror", hi: "समतल दर्पण", correct: true },
            { en: "None of these", hi: "इनमें से कोई नहीं" }
        ]
    },
    {
        qEn: "Formation of shiny colors in soap bubbles is due to:",
        qHi: "साबुन के पतले झाग में चमकदार रंगों का बनना किस परिघटना का परिणाम है ?",
        opts: [
            { en: "Multiple Reflection and Interference", hi: "बहुलित परावर्तन और व्यतिकरण", correct: true },
            { en: "Multiple Refraction and Dispersion", hi: "बहुलित अपवर्तन और परिक्षेपण" },
            { en: "Refraction and Dispersion", hi: "अपवर्तन और परिक्षेपण" },
            { en: "Polarization and Interference", hi: "ध्रुवण और व्यतिकरण" }
        ]
    },
    {
        qEn: "Which mirror is used to see vehicles coming from behind?",
        qHi: "वाहन पीछे से आने वाली वस्तुओं को देखने के लिए किसका प्रयोग करते है ?",
        opts: [
            { en: "Convex lens", hi: "उत्तल लेंस" },
            { en: "Concave lens", hi: "अवतल लेंस" },
            { en: "Convex mirror", hi: "उत्तल दर्पण", correct: true },
            { en: "Concave mirror", hi: "अवतल दर्पण" }
        ]
    },
    {
        qEn: "Which is NOT a result of atmospheric refraction?",
        qHi: "निम्न में से क्या वायुमण्डलीय अपवर्तन का परिणाम नहीं है ?",
        opts: [
            { en: "Sun visible before actual sunrise", hi: "सूर्य का अपने वास्तविक उदय से दो या तीन मिनट पहले दिखायी पड़ना" },
            { en: "Sun appearing red at sunset", hi: "सूर्य का सूर्यास्त के समय लाल दिखायी देना", correct: true },
            { en: "Twinkling of stars", hi: "रात में तारों का टिमटिमाना" },
            { en: "Sun appearing higher than actual position", hi: "सूर्य का आकाश में अपनी वास्तविक ऊँचाई पर दिखना" }
        ]
    },
    {
        qEn: "Which mirror is used by dentists to see teeth?",
        qHi: "रोगियों के दांत देखने में दन्त चिकित्सकों द्वारा प्रयुक्त दर्पण होता है–",
        opts: [
            { en: "Convex", hi: "उत्तल" },
            { en: "Concave", hi: "अवतल", correct: true },
            { en: "Plane", hi: "समतल" },
            { en: "None", hi: "इनमें से कोई नहीं" }
        ]
    },
    {
        qEn: "Which type of mirror is used in vehicle headlights?",
        qHi: "वाहनों के अग्रदीपों (हेडलाइटों) में किस प्रकार के दर्पण का इस्तेमाल होता है ?",
        opts: [
            { en: "Plane mirror", hi: "समतल दर्पण" },
            { en: "Convex mirror", hi: "उत्तल दर्पण" },
            { en: "Concave mirror", hi: "अवतल दर्पण", correct: true },
            { en: "Parabolic mirror", hi: "परावलयिक दर्पण" }
        ]
    },
    {
        qEn: "Which mirror is used for shaving?",
        qHi: "दाढ़ी बनाने के लिए काम में लेते है–",
        opts: [
            { en: "Concave mirror", hi: "अवतल दर्पण", correct: true },
            { en: "Plane mirror", hi: "समतल दर्पण" },
            { en: "Convex mirror", hi: "उत्तल दर्पण" },
            { en: "None", hi: "इनमें से कोई नहीं" }
        ]
    },
    {
        qEn: "Which of the following is correct?",
        qHi: "इनमें से कौन सही है ?",
        opts: [
            { en: "1/f = 1/u - 1/v", hi: "1/f = 1/u - 1/v" },
            { en: "f = d/2", hi: "f = d/2" },
            { en: "1/f = 1/u + 1/v", hi: "1/f = 1/u + 1/v", correct: true },
            { en: "f = u + v", hi: "f = u + v" }
        ]
    },
    {
        qEn: "Where is the image of an object formed in the human eye?",
        qHi: "किसी वस्तु का प्रतिबिम्ब मनुष्य की आँख में कहाँ बनता है ?",
        opts: [
            { en: "Cornea", hi: "कॉर्निया" },
            { en: "Iris", hi: "आइरिस" },
            { en: "Pupil", hi: "प्यूपिल" },
            { en: "Retina", hi: "रेटिना", correct: true }
        ]
    },
    {
        qEn: "The image formed on the retina is:",
        qHi: "रेटिना पर नेत्र द्वारा निर्मित प्रतिबिम्ब होता है–",
        opts: [
            { en: "Real, Inverted, Small", hi: "वास्तविक, उल्टा, छोटा", correct: true },
            { en: "Real, Straight, Large", hi: "वास्तविक, सीधा, बड़ा" },
            { en: "Real, Straight, Small", hi: "वास्तविक, सीधा, छोटा" },
            { en: "Virtual, Inverted, Small", hi: "अवास्तविक, उल्टा, छोटा" }
        ]
    },
    {
        qEn: "To see the full image of a person, the minimum height of a plane mirror should be:",
        qHi: "किसी व्यक्ति का पूरा प्रतिबिम्ब देखने के लिए एक समतल दर्पण की न्यूनतम ऊँचाई होती है–",
        opts: [
            { en: "Equal to person's height", hi: "व्यक्ति की ऊँचाई के बराबर" },
            { en: "Half of person's height", hi: "व्यक्ति की ऊँचाई की आधी", correct: true },
            { en: "One fourth of person's height", hi: "व्यक्ति की ऊँचाई की एक चौथाई" },
            { en: "Double person's height", hi: "व्यक्ति की ऊँचाई की दोगुनी" }
        ]
    },
    {
        qEn: "An object is placed between two parallel plane mirrors. Number of images formed:",
        qHi: "एक वस्तु दो समानान्तर समतल दर्पणों के बीच रखी जाती है, तो बने प्रतिबिम्बों की संख्या है–",
        opts: [
            { en: "4", hi: "4" },
            { en: "1", hi: "1" },
            { en: "2", hi: "2" },
            { en: "Infinite", hi: "अनंत", correct: true }
        ]
    },
    {
        qEn: "Two plane mirrors are at 90°. A candle is placed between them. Number of images:",
        qHi: "दो समतल दर्पणों को 90° के कोण पर रखा गया है और उनके मध्य एक मोमबत्ती जल रही है। दर्पण में मोमबत्ती के कितने प्रतिबिम्ब बनेंगे ?",
        opts: [
            { en: "2", hi: "2" },
            { en: "3", hi: "3", correct: true },
            { en: "4", hi: "4" },
            { en: "Infinite", hi: "अनन्त" }
        ]
    },
    {
        qEn: "To get 3 images of an object using plane mirrors, the angle between them should be:",
        qHi: "जब समतल दर्पणों की सहायता से किसी वस्तु के तीन प्रतिबिम्ब प्राप्त करने के लिए दर्पणों के बीच कितना कोण होना चाहिए ?",
        opts: [
            { en: "0°", hi: "0°" },
            { en: "60°", hi: "60°" },
            { en: "90°", hi: "90°", correct: true },
            { en: "45°", hi: "45°" }
        ]
    },
    {
        qEn: "If a person stands between two plane mirrors at 60°, how many images will be seen?",
        qHi: "यदि एक व्यक्ति दो समतल दर्पण जो 60° कोण पर आनत है, के बीच खड़ा हो तब उसे कितने प्रतिबिम्ब दिखेंगे ?",
        opts: [
            { en: "3", hi: "3" },
            { en: "4", hi: "4" },
            { en: "5", hi: "5", correct: true },
            { en: "6", hi: "6" }
        ]
    },
    {
        qEn: "A converging lens is one that:",
        qHi: "अभिसारी लेन्स वह होता है जो–",
        opts: [
            { en: "Spreads rays", hi: "किरणें फैलाता है" },
            { en: "Collects rays", hi: "किरणें एकत्रित करता है", correct: true },
            { en: "Forms imaginary image", hi: "काल्पनिक प्रतिबिम्ब बनाता है" },
            { en: "Forms real image", hi: "वास्तविक प्रतिबिम्ब बनाता है" }
        ]
    },
    {
        qEn: "The color of light is determined by its:",
        qHi: "प्रकाश का रंग निर्धारित होता है, इसके",
        opts: [
            { en: "Amplitude", hi: "आयाम से" },
            { en: "Wavelength", hi: "तरंगदैर्घ्य से", correct: true },
            { en: "Intensity", hi: "तीव्रता से" },
            { en: "Velocity", hi: "वेग से" }
        ]
    },
    {
        qEn: "An air bubble in water behaves like:",
        qHi: "पानी में हवा का बुलबुला वैसे ही काम करेगा, जैसे करता है–",
        opts: [
            { en: "Convex mirror", hi: "उत्तल दर्पण" },
            { en: "Convex lens", hi: "उत्तल लेन्स" },
            { en: "Concave mirror", hi: "अवतल दर्पण" },
            { en: "Concave lens", hi: "अवतल लेन्स", correct: true }
        ]
    },
    {
        qEn: "We receive sunlight on Earth's surface. What type of beam is this?",
        qHi: "हम पृथ्वी के पृष्ठ पर सूर्य का प्रकाश प्राप्त करते हैं। ये प्रकाश के किस प्रकार के किरणपुंज है ?",
        opts: [
            { en: "Diverging", hi: "अपसारी" },
            { en: "Random", hi: "बेतरतीब" },
            { en: "Parallel", hi: "समानांतर", correct: true },
            { en: "Converging", hi: "अभिसारी" }
        ]
    },
    {
        qEn: "Diopter is the unit of:",
        qHi: "डायोप्टर किसकी इकाई है ?",
        opts: [
            { en: "Power of lens", hi: "लेन्स की क्षमता की", correct: true },
            { en: "Focal length", hi: "लेन्स की फोकस दूरी की" },
            { en: "Intensity of light", hi: "प्रकाश की तीव्रता की" },
            { en: "Intensity of sound", hi: "ध्वनि की तीव्रता की" }
        ]
    },
    {
        qEn: "What is the power of sunglasses?",
        qHi: "धूप के चश्मे की क्षमता होती है–",
        opts: [
            { en: "0 Diopter", hi: "0 डायोप्टर", correct: true },
            { en: "1 Diopter", hi: "1 डायोप्टर" },
            { en: "2 Diopter", hi: "2 डायोप्टर" },
            { en: "4 Diopter", hi: "4 डायोप्टर" }
        ]
    },
    {
        qEn: "Focal length of a lens is 25cm. Its power is:",
        qHi: "एक लेंस का फोकसान्तर 25 सेमी० है। उसकी क्षमता होगी–",
        opts: [
            { en: "+2D", hi: "+2D" },
            { en: "+4D", hi: "+4D", correct: true },
            { en: "-2D", hi: "-2D" },
            { en: "-4D", hi: "-4D" }
        ]
    },
    {
        qEn: "A convex lens has focal length 0.2m. Its power is:",
        qHi: "एक उत्तल लेंस की फोकस दूरी 0.2 मीटर है। इसकी क्षमता होगी–",
        opts: [
            { en: "+2D", hi: "+2D" },
            { en: "-2D", hi: "-2D" },
            { en: "-4D", hi: "-4D" },
            { en: "+5D", hi: "+5D", correct: true }
        ]
    },
    {
        qEn: "If power of a lens is +2D, its focal length is:",
        qHi: "यदि किसी ऐनक के लेन्स का पावर +2 डायोप्टर हो, तो इसके फोकस की दूरी होगी–",
        opts: [
            { en: "200 cm", hi: "200 सेमी." },
            { en: "100 cm", hi: "100 सेमी." },
            { en: "50 cm", hi: "50 सेमी.", correct: true },
            { en: "2 cm", hi: "2 सेमी." }
        ]
    },
    {
        qEn: "When a convex lens is dipped in water, its power:",
        qHi: "एक उत्तल लेन्स को जब पानी में डुबाया जाता है तो उसकी क्षमता–",
        opts: [
            { en: "Decreases", hi: "घट जाती है", correct: true },
            { en: "Increases", hi: "बड़ जाती है" },
            { en: "Remains same", hi: "अपरिवर्तित रहती है" },
            { en: "None", hi: "इनमें से कोई नहीं" }
        ]
    },
    {
        qEn: "Splitting of different colors in a Prism is called:",
        qHi: "प्रिज्म (Prism) में प्रकाश के विभिन्न रंगों का विभाजन कहलाता है–",
        opts: [
            { en: "Reflection", hi: "प्रकाश का परावर्तन" },
            { en: "Refraction", hi: "प्रकाश का अपवर्तन" },
            { en: "Diffraction", hi: "प्रकाश का विवर्तन" },
            { en: "Dispersion", hi: "प्रकाश का वर्ण विक्षेपण", correct: true }
        ]
    },
    {
        qEn: "Why do light rays split into colors when passing through a prism?",
        qHi: "प्रिज्म से गुजरने पर सूर्य के प्रकाश की किरणें विभिन्न रंगों में विभक्त हो जाती है, क्योंकि–",
        opts: [
            { en: "Light rays are electromagnetic", hi: "प्रकाश किरणें विद्युत चुम्बकीय तरंगें है।" },
            { en: "Deviation differs for colors", hi: "प्रिज्म की दो सतहों पर किरणों का विचलन होता है।" },
            { en: "Refraction on two surfaces", hi: "प्रिज्म की दो सतहों पर किरणों का अपवर्तन होता है।" },
            { en: "Deviation is different for different rays", hi: "विभिन्न रंगों की किरणों का विचलन भिन्न-भिन्न होता है।", correct: true }
        ]
    },
    {
        qEn: "White light is made of how many colors?",
        qHi: "श्वेत प्रकाश कितने रंगों के मेल से बना होता है ?",
        opts: [
            { en: "3", hi: "3" },
            { en: "4", hi: "4" },
            { en: "5", hi: "5" },
            { en: "7", hi: "7", correct: true }
        ]
    },
    {
        qEn: "When white light passes through a prism, which color deviates the most?",
        qHi: "श्वेत प्रकाश जब प्रिज्म से होकर गुजरता है तो जो वर्ण सबसे अधिक विचलित होता है, वह है–",
        opts: [
            { en: "Red", hi: "लाल" },
            { en: "Violet", hi: "बैगनी", correct: true },
            { en: "Yellow", hi: "पीला" },
            { en: "Blue", hi: "आसमानी" }
        ]
    },
    {
        qEn: "Primary colors are:",
        qHi: "प्राथमिक रंग है–",
        opts: [
            { en: "Colors in nature", hi: "प्रकृति में पाये जाने वाले रंग" },
            { en: "Rainbow colors", hi: "इन्द्र धनुष के रंग" },
            { en: "White light spectrum", hi: "श्वेत प्रकाश के स्पेक्ट्रम के रंग" },
            { en: "Those not made by mixing others", hi: "वे रंग जो अन्य रंगों के मिश्रण से उत्पन्न नहीं किये जा सकते हैं", correct: true }
        ]
    },
    {
        qEn: "The three basic colors are:",
        qHi: "तीन मूल रंग है–",
        opts: [
            { en: "Green, Yellow, Red", hi: "हरा, पीला, लाल" },
            { en: "Blue, Yellow, Red", hi: "नीला, पीला, लाल" },
            { en: "Blue, Red, Green", hi: "नीला, लाल, हरा", correct: true },
            { en: "Blue, Yellow, Green", hi: "नीला, पीला, हरा" }
        ]
    },
    {
        qEn: "The process of separating white light into its colors is:",
        qHi: "श्वेत प्रकाश का अपने विभिन्न रंगों में अलग होने की क्रिया को कहते है ?",
        opts: [
            { en: "Scattering", hi: "प्रकीर्णन" },
            { en: "Dispersion", hi: "परिक्षेपण", correct: true },
            { en: "Diffraction", hi: "विवर्तन" },
            { en: "Spectroscopy", hi: "वर्ण विक्षेपण" }
        ]
    },
    {
        qEn: "Which is NOT a primary color?",
        qHi: "निम्न में कौन-सा प्राथमिक रंग नहीं है ?",
        opts: [
            { en: "Green", hi: "हरा" },
            { en: "Yellow", hi: "पीला", correct: true },
            { en: "Red", hi: "लाल" },
            { en: "Blue", hi: "नीला" }
        ]
    },
    {
        qEn: "Which color has the maximum wavelength?",
        qHi: "निम्नलिखित में से किस रंग का तरंगदैर्घ्य अधिकतम होता है ?",
        opts: [
            { en: "Blue", hi: "नीला" },
            { en: "Yellow", hi: "पीला" },
            { en: "Green", hi: "हरा" },
            { en: "Red", hi: "लाल", correct: true }
        ]
    },
    {
        qEn: "Which color combination is most convenient for day and night time?",
        qHi: "निम्नलिखित में से कौन-सा रंग सम्मिश्रण दिन और रात के समय सर्वाधिक सुविधाजनक होता है ?",
        opts: [
            { en: "Orange and Blue", hi: "नारंगी और नीला" },
            { en: "White and Black", hi: "श्वेत और काला" },
            { en: "Yellow and Blue", hi: "पीला और नीला" },
            { en: "Red and Green", hi: "लाल और हरा", correct: true }
        ]
    },
    {
        qEn: "The color of an opaque object is due to the color it:",
        qHi: "किसी अपारदर्शी वस्तु का रंग उस रंग के कारण होता है, जिसे वह–",
        opts: [
            { en: "Absorbs", hi: "अवशोषित करता है" },
            { en: "Refracts", hi: "अपवर्तित करता है" },
            { en: "Reflects", hi: "परावर्तित करता है", correct: true },
            { en: "Scatters", hi: "प्रकीर्णित करता है" }
        ]
    },
    {
        qEn: "How do green leaves appear in red light?",
        qHi: "हरी पत्तियों का पौधा लाल रोशनी में रखने पर कैसा दिखायी देगा ?",
        opts: [
            { en: "Green", hi: "हरा" },
            { en: "Violet", hi: "बैगनी" },
            { en: "Black", hi: "काला", correct: true },
            { en: "Red", hi: "लाल" }
        ]
    },
    {
        qEn: "Some transport vehicles have yellow lights because:",
        qHi: "कुछ परिवहन वाहनों में अतिरिक्त पीली बत्तियां होती है। ऐसा इसलिए किया जाता है, क्योंकि–",
        opts: [
            { en: "Looks beautiful", hi: "बत्ती पीली होने से वाहन सुन्दर दिखलायी देता है।" },
            { en: "Consumes less power", hi: "पीली बत्ती कम विद्युत् ऊर्जा खर्च करती है।" },
            { en: "Penetrates fog better", hi: "पीला प्रकाश कोहरे को बेधता है जिससे सड़क साफ दिखायी देता है।", correct: true },
            { en: "Doesn't glare eyes", hi: "पीली प्रकाश सड़क पर चलते हुए व्यक्तियों की आँखों में चमक उत्पन्न नहीं करता है।" }
        ]
    },
    {
        qEn: "What is the method to separate the seven colors of light?",
        qHi: "प्रकाश में सात रंग होते है। रंगों को अलग करने का क्या तरीका है ?",
        opts: [
            { en: "Using a prism", hi: "एक प्रिज्म से रंगों को अलग-अलग किया जा सकता है", correct: true },
            { en: "Using a filter", hi: "फिल्टर से रंगों को अलग-अलग किया जा सकता है" },
            { en: "Using plants", hi: "पौधों से रंगों को अलग-अलग किया जा सकता है" },
            { en: "Cannot be separated", hi: "रंगों को अलग-अलग नहीं किया जा सकता है" }
        ]
    },
    {
        qEn: "Red glass appears which color when heated to high temperature?",
        qHi: "लाल कांच को अधिक ताप पर गर्म करने पर वह दिखाई देगा–",
        opts: [
            { en: "Red", hi: "लाल" },
            { en: "Green", hi: "हरा", correct: true },
            { en: "Blue", hi: "नीला" },
            { en: "Yellow", hi: "पीला" }
        ]
    },
    {
        qEn: "The color of light is determined by:",
        qHi: "प्रकाश का रंग निश्चित किया जाता है–",
        opts: [
            { en: "Velocity", hi: "वेग द्वारा" },
            { en: "Amplitude", hi: "आयाम द्वारा" },
            { en: "Wavelength", hi: "तरंगदैर्घ्य द्वारा", correct: true },
            { en: "Frequency", hi: "आवृत्ति द्वारा" }
        ]
    }
];

/* --- LOGIC --- */
let questions = [];
let currentQuestionIndex = 0;
let score = 0;
let timerInterval;
let timeLeft;
let userTimerSetting = 0;
let audioContext;

// Audio Synth
function playSound(type) {
    if (!audioContext) audioContext = new (window.AudioContext || window.webkitAudioContext)();
    
    const osc = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    osc.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    if (type === 'correct') {
        osc.type = 'triangle';
        osc.frequency.setValueAtTime(600, audioContext.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.1);
        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.4);
        osc.start();
        osc.stop(audioContext.currentTime + 0.4);
    } else if (type === 'wrong') {
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(150, audioContext.currentTime);
        osc.frequency.linearRampToValueAtTime(100, audioContext.currentTime + 0.3);
        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.3);
        osc.start();
        osc.stop(audioContext.currentTime + 0.3);
    }
}

// Confetti
const canvas = document.getElementById('confetti');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let particles = [];

function createConfetti() {
    for (let i = 0; i < 60; i++) {
        particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height * 0.5 - canvas.height,
            speed: Math.random() * 5 + 3,
            color: `hsl(${Math.random() * 360}, 80%, 60%)`,
            size: Math.random() * 8 + 4,
            oscillation: Math.random() * 2
        });
    }
}

function updateConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach((p, index) => {
        p.y += p.speed;
        p.x += Math.sin(p.y * 0.01 + p.oscillation);
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
        ctx.fill();
        if (p.y > canvas.height) particles.splice(index, 1);
    });
    if(particles.length > 0) requestAnimationFrame(updateConfetti);
}

// Quiz Functions
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function startGame() {
    const timeInput = document.getElementById('timerInput').value;
    const shuffleInput = document.getElementById('shuffleInput').value;
    
    userTimerSetting = timeInput ? parseInt(timeInput) : 0;
    
    questions = JSON.parse(JSON.stringify(rawQuestions));
    if (shuffleInput === 'yes') shuffleArray(questions);
    
    currentQuestionIndex = 0;
    score = 0;
    
    document.getElementById('start-screen').classList.add('hidden');
    document.getElementById('result-screen').classList.add('hidden');
    document.getElementById('quiz-screen').classList.remove('hidden');
    
    const timerDisplay = document.getElementById('timer-display');
    if (userTimerSetting > 0) timerDisplay.classList.remove('hidden');
    else timerDisplay.classList.add('hidden');

    loadQuestion();
}

function loadQuestion() {
    const q = questions[currentQuestionIndex];
    
    // UI Updates
    document.getElementById('q-counter').innerText = `${(currentQuestionIndex + 1).toString().padStart(2, '0')}/${questions.length}`;
    document.getElementById('score-display').innerText = score;
    
    const progress = ((currentQuestionIndex) / questions.length) * 100;
    document.getElementById('progress-bar').style.width = `${progress}%`;

    // Render Text
    document.getElementById('q-text-en').innerText = q.qEn;
    document.getElementById('q-text-hi').innerText = q.qHi;
    
    // Render Options
    const optContainer = document.getElementById('options-container');
    optContainer.innerHTML = '';
    
    q.opts.forEach((opt, idx) => {
        const btn = document.createElement('div');
        btn.className = 'option-btn';
        btn.onclick = () => checkAnswer(idx, btn);
        btn.innerHTML = `
            <span class="opt-en">${['A','B','C','D'][idx]}. ${opt.en}</span>
            <span class="opt-hi">${opt.hi}</span>
        `;
        optContainer.appendChild(btn);
    });

    // Reset Emoji
    document.getElementById('feedback-emoji').innerHTML = '';
    document.getElementById('feedback-emoji').classList.add('hidden');

    // Timer Logic
    clearInterval(timerInterval);
    const timerEl = document.getElementById('timer-display');
    timerEl.classList.remove('pulse-text');
    timerEl.style.color = "white";

    if (userTimerSetting > 0) {
        timeLeft = userTimerSetting;
        timerEl.innerText = timeLeft;
        
        timerInterval = setInterval(() => {
            timeLeft--;
            timerEl.innerText = timeLeft;
            
            if (timeLeft <= 5) {
                timerEl.classList.add('pulse-text');
                timerEl.style.color = "#ff1744";
            }

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                playBuzz();
                disableOptions();
                setTimeout(() => nextQuestion(), 1500);
            }
        }, 1000);
    }
}

function checkAnswer(selectedIndex, btnElement) {
    clearInterval(timerInterval);
    const q = questions[currentQuestionIndex];
    const isCorrect = q.opts[selectedIndex].correct;
    
    disableOptions();

    const emojiContainer = document.getElementById('feedback-emoji');
    emojiContainer.classList.remove('hidden');

    if (isCorrect) {
        score++;
        btnElement.classList.add('correct');
        playSound('correct');
        createConfetti();
        updateConfetti();
        emojiContainer.innerText = '🎉';
    } else {
        btnElement.classList.add('wrong');
        playSound('wrong');
        emojiContainer.innerText = '😢';
        emojiContainer.classList.add('shake');
        
        // Highlight correct answer
        const allBtns = document.querySelectorAll('.option-btn');
        q.opts.forEach((opt, i) => {
            if (opt.correct) allBtns[i].classList.add('correct');
        });
    }

    document.getElementById('score-display').innerText = score;

    setTimeout(() => {
        emojiContainer.classList.remove('shake');
        nextQuestion();
    }, 1500);
}

function disableOptions() {
    const btns = document.querySelectorAll('.option-btn');
    btns.forEach(b => {
        b.style.pointerEvents = 'none';
        b.style.opacity = '0.7';
    });
}

function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
        loadQuestion();
    } else {
        finishGame();
    }
}

function finishGame() {
    clearInterval(timerInterval);
    document.getElementById('quiz-screen').classList.add('hidden');
    document.getElementById('result-screen').classList.remove('hidden');
    
    // Early Exit Logic: Calculate percentage based on questions ATTEMPTED/SEEN so far.
    // If currentQuestionIndex is 0 (immediate click), avoid division by zero.
    const questionsSeen = currentQuestionIndex === 0 ? 1 : currentQuestionIndex;
    
    const displayTotal = currentQuestionIndex;
    const percentage = Math.round((score / (displayTotal || 1)) * 100);
    
    const scoreEl = document.getElementById('final-score');
    scoreEl.innerText = percentage + "%";
    
    document.getElementById('stat-total').innerText = displayTotal;
    document.getElementById('stat-correct').innerText = score;

    const msgEl = document.getElementById('final-message');
    if (percentage >= 80) msgEl.innerText = "🏆 Outstanding Performance!";
    else if (percentage >= 50) msgEl.innerText = "👏 Well Done! Keep it up.";
    else msgEl.innerText = "📚 Practice makes perfect!";
}

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

</script>
</body>
</html>