<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bilingual Transport Quiz - Science</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-gradient: linear-gradient(45deg, #6a11cb 0%, #2575fc 50%, #ff00cc 100%);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --correct-green: #00e676;
            --wrong-red: #ff1744;
            --text-main: #ffffff;
            --text-sub: #dddddd;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }

        body {
            min-height: 100vh;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            padding: 20px;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            width: 100%;
            max-width: 700px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            color: var(--text-main);
            position: relative;
            z-index: 10;
        }

        /* Progress Bar */
        .progress-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 6px;
            background: rgba(255,255,255,0.1);
            border-top-left-radius: 25px; border-top-right-radius: 25px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%; width: 0%;
            background: var(--correct-green);
            box-shadow: 0 0 10px var(--correct-green);
            transition: width 0.4s ease;
        }

        /* UI Elements */
        .stats-header { display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: 600; }
        .timer { font-size: 1.2rem; }
        .timer.pulse-red { color: var(--wrong-red); animation: pulse 1s infinite; }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .question-text { font-size: 1.2rem; font-weight: 700; margin-bottom: 5px; }
        .hindi-text { font-size: 0.95rem; color: var(--text-sub); margin-bottom: 25px; font-weight: 400; }

        .options-grid { display: grid; gap: 15px; margin-bottom: 30px; }
        .option-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 15px 20px;
            text-align: left;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .option-btn:hover { background: rgba(255, 255, 255, 0.15); transform: translateY(-2px); }
        .option-btn.correct { background: var(--correct-green) !important; color: #000; font-weight: bold; }
        .option-btn.wrong { background: var(--wrong-red) !important; animation: shake 0.5s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .btn-main {
            width: 100%; padding: 15px; border-radius: 50px; border: none;
            background: white; color: #333; font-weight: 700; cursor: pointer;
            transition: transform 0.2s;
        }
        .btn-main:hover { transform: scale(1.02); }

        #start-screen, #result-screen { text-align: center; }
        #quiz-area { display: none; }

        input[type="number"] {
            background: rgba(255,255,255,0.1); border: 1px solid white;
            color: white; padding: 10px; border-radius: 10px; margin: 10px 0; width: 100px;
        }

        .emoji-overlay {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 10rem; display: none; z-index: 1000;
        }

        canvas#confetti {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 9999;
        }

        @media (max-width: 600px) {
            .container { padding: 20px; }
            .question-text { font-size: 1rem; }
        }
    </style>
</head>
<body>

<canvas id="confetti"></canvas>
<div class="emoji-overlay" id="sad-emoji">üò¢</div>

<div class="container">
    <div class="progress-container"><div class="progress-bar" id="progress"></div></div>

    <div id="start-screen">
        <h1 style="margin-bottom: 10px;">Transport Systems Quiz</h1>
        <p style="margin-bottom: 30px;">Plant & Human Body (Q 51-112)</p>
        
        <div style="margin-bottom: 20px;">
            <label>Timer (Seconds per question, 0 for off):</label><br>
            <input type="number" id="timer-setting" value="15" min="0">
        </div>
        
        <div style="margin-bottom: 30px;">
            <input type="checkbox" id="shuffle-setting"> <label for="shuffle-setting">Shuffle Questions</label>
        </div>

        <button class="btn-main" onclick="startQuiz()">START QUIZ</button>
    </div>

    <div id="quiz-area">
        <div class="stats-header">
            <div id="q-counter">Question: 0/0</div>
            <div class="timer" id="timer-display">‚è± --</div>
            <div id="score-display">Score: 0</div>
        </div>

        <div id="question-box">
            <p class="question-text" id="eng-q"></p>
            <p class="hindi-text" id="hin-q"></p>
            
            <div class="options-grid" id="options-box"></div>
        </div>

        <button class="btn-main" style="background: rgba(255,255,255,0.2); color: white;" onclick="endQuiz()">Finish & Show Results</button>
    </div>

    <div id="result-screen" style="display: none;">
        <h2 id="result-title"></h2>
        <h1 style="font-size: 4rem; margin: 20px 0;" id="final-score">0/0</h1>
        <p id="result-msg" style="margin-bottom: 30px;"></p>
        <button class="btn-main" onclick="location.reload()">RESTART QUIZ</button>
    </div>
</div>

<script>
    // --- QUESTION DATA (Extracted from Images) ---
    const quizData = [
        { q: "Which element is used during ATP synthesis in cells?", h: "‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ ‡§Æ‡•á‡§Ç ATP ‡§∏‡§Ç‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§ï‡§ø‡§∏ ‡§§‡§§‡•ç‡§µ ‡§ï‡•Ä ‡§â‡§™‡§Ø‡•ã‡§ó‡§ø‡§§‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", a: ["Boron", "Zinc", "Iron", "Phosphorus"], c: 3 },
        { q: "Transpiration measuring instrument is?", h: "‡§µ‡§æ‡§∑‡•ç‡§™‡•ã‡§§‡•ç‡§∏‡§∞‡•ç‡§ú‡§® ‡§Æ‡§æ‡§™‡•Ä ‡§Ø‡§Ç‡§§‡•ç‡§∞ ‡§π‡•à-", a: ["Hygrometer", "Potometer", "Climometer", "Crescograph"], c: 1 },
        { q: "The process of transpiration occurs in which part of the plant?", h: "‡§™‡•å‡§ß‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§µ‡§æ‡§∑‡•ç‡§™‡•ã‡§§‡•ç‡§∏‡§∞‡•ç‡§ú‡§® ‡§ï‡•Ä ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", a: ["Root", "Stem", "Leaf", "All of these"], c: 3 },
        { q: "In which condition does the rate of transpiration increase?", h: "‡§Ø‡§π ‡§™‡§∞‡§ø‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§µ‡§æ‡§∑‡•ç‡§™‡•ã‡§§‡•ç‡§∏‡§∞‡•ç‡§ú‡§® ‡§ï‡•Ä ‡§¶‡§∞ ‡§¨‡§¢‡§º ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à?", a: ["Low wind speed", "Excess water in soil", "Low humidity and high temp", "High humidity"], c: 2 },
        { q: "What are the two main functions of leaves?", h: "‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§¶‡•ã ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ï‡•å‡§® ‡§∏‡•á ‡§π‡•à-", a: ["Transpiration and Respiration", "Respiration and Digestion", "Photosynthesis and Respiration", "Photosynthesis and Transpiration"], c: 3 },
        { q: "The instrument used to measure respiration is called?", h: "‡§∂‡•ç‡§µ‡§∏‡§® ‡§Æ‡§æ‡§™‡§ï ‡§Ø‡§Ç‡§§‡•ç‡§∞ ‡§ï‡§π‡§≤‡§æ‡§§‡§æ ‡§π‡•à-", a: ["Potometer", "Auxanometer", "Photometer", "Respirometer"], c: 3 },
        { q: "Which element is essential during the splitting of water in photosynthesis?", h: "‡§™‡•ç‡§∞‡§ï‡§æ‡§∂ ‡§∏‡§Ç‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§Æ‡•á‡§Ç ‡§ú‡§≤ ‡§ï‡•á ‡§µ‡§ø‡§ñ‡§Ç‡§°‡§® ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§á‡§®‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§§‡§§‡•ç‡§µ ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à?", a: ["Boron", "Magnesium", "Zinc", "Manganese"], c: 3 },
        { q: "In which direction does the transport of food materials in plants happen?", h: "‡§™‡•å‡§ß‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ñ‡§æ‡§¶‡•ç‡§Ø ‡§™‡§¶‡§æ‡§∞‡•ç‡§•‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§®‡§æ‡§Ç‡§§‡§∞‡§£ ‡§ï‡§ø‡§ß‡§∞-‡§∏‡•á-‡§ï‡§ø‡§ß‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["Root to stem", "Stem to leaf", "Leaf to root", "High conc. to low conc."], c: 2 },
        { q: "Which of the following is an example of Imbibition?", h: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§è‡§ï ‡§Ö‡§Ç‡§§: ‡§∂‡•ã‡§∑‡§£ (Imbibition) ‡§ï‡§æ ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§π‡•à-", a: ["Swelling of dry seeds in water", "Swelling of wooden doors in rain", "Absorption of water by gum/starch", "All of these"], c: 3 },
        { q: "Each stoma in leaves is surrounded by how many guard cells?", h: "‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§•‡§ø‡§§ ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§∞‡§Ç‡§ß‡•ç‡§∞ ‡§ï‡§ø‡§§‡§®‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ ‡§∏‡•á ‡§ò‡§ø‡§∞‡§æ ‡§∞‡§π‡§§‡§æ ‡§π‡•à?", a: ["Two", "Three", "Four", "Not fixed"], c: 0 },
        { q: "Water droplets seen on leaf tips of grass in the morning are from?", h: "‡§ò‡§æ‡§∏‡•ã‡§Ç ‡§ï‡•Ä ‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§ø‡§∞‡•ã‡§Ç ‡§™‡§∞ ‡§∏‡•Å‡§¨‡§π ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§¨‡•Ç‡§Å‡§¶‡•á‡§Ç ‡§¶‡§ø‡§ñ‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§Ø‡§π ‡§ú‡§≤ ‡§∏‡§Ç‡§ö‡§Ø‡§® ‡§ï‡§ø‡§∏‡§∏‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["Atmosphere", "Stomata", "Vascular bundle", "Hydathode (Jalrandhra)"], c: 3 },
        { q: "Assertion: 1. Xylem always transports water upwards. 2. Phloem can transport food both upwards and downwards.", h: "1. ‡§ú‡§æ‡§á‡§≤‡§Æ ‡§Æ‡•á‡§Ç ‡§ú‡§≤ ‡§ï‡§æ ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§® ‡§π‡§Æ‡•á‡§∂‡§æ ‡§ä‡§™‡§∞ ‡§ï‡•Ä ‡§ì‡§∞ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§ 2. ‡§´‡•ç‡§≤‡•ã‡§è‡§Æ ‡§Æ‡•á‡§Ç ‡§≠‡•ã‡§ú‡§® ‡§ï‡§æ ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§® ‡§ä‡§™‡§∞ ‡§ï‡•Ä ‡§ì‡§∞ ‡§Ö‡§•‡§µ‡§æ ‡§®‡•Ä‡§ö‡•á ‡§ï‡•Ä ‡§ì‡§∞ ‡§π‡•ã ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§", a: ["Only 1", "Only 2", "Both 1 and 2", "Neither"], c: 2 },
        { q: "Who discovered the Blood Circulatory System?", h: "‡§∞‡§ï‡•ç‡§§ ‡§™‡§∞‡§ø‡§∏‡§Ç‡§ö‡§∞‡§£ ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§ï‡•Ä ‡§ñ‡•ã‡§ú ‡§ï‡§ø‡§∏‡§®‡•á ‡§ï‡§ø‡§Ø‡§æ?", a: ["William Harvey", "Karl Landsteiner", "De Castello", "Linnaeus"], c: 0 },
        { q: "Which is NOT true regarding the human heart?", h: "‡§Æ‡§æ‡§®‡§µ ‡§π‡•É‡§¶‡§Ø ‡§ï‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§è‡§ï ‡§∏‡§π‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?", a: ["It has 4 chambers", "It is the busiest organ", "Weight is 1.5 to 2 kg", "It is the pumping organ"], c: 2 },
        { q: "What is the average weight of a human heart?", h: "‡§Æ‡§æ‡§®‡§µ ‡§π‡•É‡§¶‡§Ø ‡§ï‡§æ ‡§î‡§∏‡§§ ‡§≠‡§æ‡§∞ ‡§≤‡§ó‡§≠‡§ó ‡§ï‡§ø‡§§‡§®‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["200 g", "300 g", "400 g", "500 g"], c: 1 },
        { q: "The protective membrane on the outer layer of the heart is?", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡•á ‡§¨‡§æ‡§π‡•ç‡§Ø ‡§™‡§∞‡§§ ‡§™‡§∞ ‡§¨‡§®‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ù‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§ï‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", a: ["Pleura", "Keratin", "Pericardium", "Hepatic"], c: 2 },
        { q: "The upper broad parts of the heart are called Atria, divided into left and right.", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡•á ‡§ä‡§™‡§∞ ‡§ï‡•á ‡§ö‡•å‡§°‡§º‡§æ ‡§≠‡§æ‡§ó ‡§Ü‡§≤‡§ø‡§Ç‡§¶ ‡§ï‡§π‡§≤‡§æ‡§§‡§æ ‡§π‡•à ‡§ú‡•ã ‡§¨‡§æ‡§è‡§Å ‡§§‡§•‡§æ ‡§¶‡§æ‡§è‡§Å ‡§π‡§ø‡§∏‡•ç‡§∏‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¨‡§Å‡§ü‡§æ ‡§∞‡§π‡§§‡§æ ‡§π‡•à‡•§", a: ["True", "False"], c: 0 },
        { q: "The structure separating left and right atria/ventricles is?", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡§æ ‡§¶‡§æ‡§Ø‡§æ‡§Å-‡§¨‡§æ‡§Ø‡§æ‡§Å ‡§Ü‡§≤‡§ø‡§Ç‡§¶ ‡§§‡§•‡§æ ‡§¶‡§æ‡§Ø‡§æ‡§Å-‡§¨‡§æ‡§Ø‡§æ‡§Å ‡§®‡§ø‡§≤‡§Ø ‡§ú‡§ø‡§∏ ‡§∏‡§Ç‡§∞‡§ö‡§®‡§æ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§Ö‡§≤‡§ó ‡§∞‡§π‡§§‡§æ ‡§π‡•à, ‡§â‡§∏‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", a: ["Septum", "Valve", "Node", "Lymph"], c: 0 },
        { q: "Tricuspid Valve is found between?", h: "‡§§‡•ç‡§∞‡§ø‡§¶‡§≤‡•Ä ‡§ï‡§™‡§æ‡§ü (Tricuspid Valve) ‡§™‡§æ‡§Ø‡•á ‡§ú‡§æ‡§§‡•á ‡§π‡•à-", a: ["Right atrium and ventricle", "Left atrium and ventricle", "Between both atria", "Between both ventricles"], c: 0 },
        { q: "Valves in the heart allow blood to flow?", h: "‡§π‡•É‡§¶‡§Ø ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§Ø‡•á ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§ï‡§™‡§æ‡§ü (Valve) ‡§∞‡§ï‡•ç‡§§ ‡§ï‡•ã-", a: ["Atrium to Ventricle only", "Ventricle to Atrium only", "Out of heart only", "All of these"], c: 0 },
        { q: "Assertion: 1. Right side of heart has oxygenated blood. 2. Left side has deoxygenated blood.", h: "1. ‡§π‡•É‡§¶‡§Ø ‡§ï‡•á ‡§¶‡§æ‡§Å‡§Ø‡•á ‡§≠‡§æ‡§ó ‡§Æ‡•á‡§Ç ‡§∂‡•Å‡§¶‡•ç‡§ß ‡§∞‡§ï‡•ç‡§§ ‡§™‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§ 2. ‡§π‡•É‡§¶‡§Ø ‡§ï‡•á ‡§¨‡§æ‡§Å‡§Ø‡•á ‡§≠‡§æ‡§ó ‡§Æ‡•á‡§Ç ‡§Ö‡§∂‡•Å‡§¶‡•ç‡§ß ‡§∞‡§ï‡•ç‡§§ ‡§™‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§", a: ["Both Correct", "Both Wrong", "1 correct", "2 correct"], c: 1 },
        { q: "One heart beat consists of?", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡•á ‡§ï‡§ï‡•ç‡§∑‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§∂‡§ø‡§•‡§ø‡§≤‡§® ‡§ï‡•ã ‡§°‡§æ‡§Ø‡§∏‡•ç‡§ü‡•ã‡§≤ ‡§§‡§•‡§æ ‡§∏‡§Ç‡§ï‡•Å‡§ö‡§® ‡§ï‡•ã ‡§∏‡§ø‡§∏‡•ç‡§ü‡•ã‡§≤ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§∏‡§ø‡§∏‡•ç‡§ü‡•ã‡§≤ ‡§§‡§•‡§æ ‡§°‡§æ‡§Ø‡§∏‡•ç‡§ü‡•ã‡§≤ ‡§Æ‡§ø‡§≤‡§ï‡§∞-", a: ["1 beat", "2 beats", "Circulation", "Pulse"], c: 0 },
        { q: "How many times does a heart beat in a minute?", h: "‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§Æ‡§ø‡§®‡§ü ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§§‡§®‡•Ä ‡§π‡•É‡§¶‡§Ø ‡§ß‡§°‡§º‡§ï‡§®‡•á ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", a: ["50-55", "72-75", "120-125", "230-240"], c: 1 },
        { q: "Where are Semilunar Valves found?", h: "‡§π‡•É‡§¶‡§Ø ‡§Æ‡•á‡§Ç ‡§Ö‡§∞‡•ç‡§ß‡§ö‡§®‡•ç‡§¶‡•ç‡§∞‡§æ‡§ï‡§æ‡§∞ ‡§µ‡§æ‡§≤‡•ç‡§µ (Semilunar Valve) ‡§ï‡§π‡§æ‡§Å ‡§™‡§æ‡§Ø‡•á ‡§ú‡§æ‡§§‡•á ‡§π‡•à?", a: ["Pulmonary arch origin", "Aorta origin", "Both A and B", "Between atrium and ventricle"], c: 2 },
        { q: "Where does the Pulmonary Arch originate?", h: "‡§´‡•Å‡§´‡•ç‡§´‡•Å‡§∏ ‡§ö‡§æ‡§™ (Pulmonary arch) ‡§ï‡§π‡§æ‡§Å ‡§∏‡•á ‡§®‡§ø‡§ï‡§≤‡§§‡•Ä ‡§π‡•à?", a: ["Left Atrium", "Left Ventricle", "Right Atrium", "Right Ventricle"], c: 3 },
        { q: "Where does the Aorta originate?", h: "‡§Æ‡§π‡§æ‡§ß‡§Æ‡§®‡•Ä (Aorta) ‡§ï‡§π‡§æ‡§Å ‡§∏‡•á ‡§®‡§ø‡§ï‡§≤‡§§‡•Ä ‡§π‡•à?", a: ["Left Atrium", "Left Ventricle", "Right Atrium", "Right Ventricle"], c: 1 },
        { q: "Which fluid protects the heart from friction?", h: "‡§π‡•É‡§¶‡§Ø ‡§ó‡§§‡§ø ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§® ‡§π‡•É‡§¶‡§Ø ‡§î‡§∞ ‡§™‡•á‡§∞‡•ã‡§ï‡§æ‡§∞‡•ç‡§°‡§ø‡§Ø‡§≤ ‡§ù‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§ò‡§∞‡•ç‡§∑‡§£ ‡§∏‡•á ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§§‡§æ ‡§π‡•à-", a: ["Pericardium", "Pericardial Cavity", "Pericardial Fluid", "Cardiac Muscle"], c: 2 },
        { q: "Which chamber has the thickest wall?", h: "‡§®‡§ø‡§Æ‡•ç‡§®‡§æ‡§Ç‡§ï‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏‡§ï‡•Ä ‡§¶‡•Ä‡§µ‡§æ‡§∞ ‡§∏‡§¨‡§∏‡•á ‡§Æ‡•ã‡§ü‡•Ä ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", a: ["Right Atrium", "Left Atrium", "Left Ventricle", "Right Ventricle"], c: 2 },
        { q: "Precaval and Postcaval veins open into?", h: "‡§Ö‡§ó‡•ç‡§∞ ‡§§‡§•‡§æ ‡§™‡§∂‡•ç‡§ö ‡§Æ‡§π‡§æ‡§∂‡§ø‡§∞‡§æ‡§è‡§Å ‡§π‡•É‡§¶‡§Ø ‡§ï‡•á ‡§ï‡§ø‡§∏ ‡§≠‡§æ‡§ó ‡§Æ‡•á‡§Ç ‡§ñ‡•Å‡§≤‡§§‡•Ä ‡§π‡•à?", a: ["Right Atrium", "Left Atrium", "Right Ventricle", "Left Ventricle"], c: 0 },
        { q: "What is normal blood pressure?", h: "‡§è‡§ï ‡§∏‡•ç‡§µ‡§∏‡•ç‡§• ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§ï‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§Æ‡•á‡§Ç ‡§∞‡§ï‡•ç‡§§-‡§¶‡§æ‡§¨ ‡§ï‡§ø‡§§‡§®‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["120/80 mmHg", "160/95 mmHg", "130/90 mmHg", "80/120 mmHg"], c: 0 },
        { q: "Blood Pressure is?", h: "‡§∞‡§ï‡•ç‡§§‡§ö‡§æ‡§™ (Blood Pressure) ‡§π‡•ã‡§§‡§æ ‡§π‡•à-", a: ["Pressure in veins", "Pressure in arteries", "Both A and B", "Neither"], c: 1 },
        { q: "Blood pressure is generated by?", h: "‡§∞‡§ï‡•ç‡§§ ‡§™‡§∞ ‡§¶‡§¨‡§æ‡§µ ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§π‡•ã‡§§‡§æ ‡§π‡•à-", a: ["Ventricle contraction", "Ventricle relaxation", "Both", "Atria contraction"], c: 0 },
        { q: "Assertion: 1. Pressure is higher in veins than arteries. 2. Pressure is higher in arteries than veins.", h: "1. ‡§ß‡§Æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§∂‡§ø‡§∞‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§∞‡§ï‡•ç‡§§ ‡§™‡§∞ ‡§¶‡§¨‡§æ‡§µ ‡§Ö‡§ß‡§ø‡§ï ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§ 2. ‡§∂‡§ø‡§∞‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§æ ‡§ß‡§Æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∞‡§ï‡•ç‡§§ ‡§™‡§∞ ‡§¶‡§¨‡§æ‡§µ ‡§Ö‡§ß‡§ø‡§ï ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§", a: ["Only 1", "Only 2", "Both", "None"], c: 1 },
        { q: "Blood pressure during running?", h: "‡§¶‡•å‡§°‡§º ‡§≤‡§ó‡§æ‡§§‡•á ‡§∏‡§Æ‡§Ø ‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§ï‡§æ ‡§∞‡§ï‡•ç‡§§‡§ö‡§æ‡§™-", a: ["Increases", "Decreases", "Fluctuates", "Stays same"], c: 0 },
        { q: "Blood pressure while sleeping?", h: "‡§∏‡•ã‡§§‡•á ‡§∏‡§Æ‡§Ø ‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§ï‡§æ ‡§∞‡§ï‡•ç‡§§ ‡§ö‡§æ‡§™-", a: ["Increases", "Decreases", "Stays same", "Zero"], c: 1 },
        { q: "Where is pulse rate measured from?", h: "‡§®‡§æ‡§°‡§º‡•Ä ‡§¶‡§∞ ‡§ï‡§π‡§æ‡§Å ‡§∏‡•á ‡§Æ‡§æ‡§™‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?", a: ["Artery", "Vein", "Skin", "Nerve"], c: 0 },
        { q: "Pressure generated by ventricle contraction is?", h: "‡§®‡§ø‡§≤‡§Ø ‡§ï‡•á ‡§∏‡§Ç‡§ï‡•Å‡§ö‡§® ‡§∏‡•á ‡§∞‡§ï‡•ç‡§§ ‡§Æ‡•á‡§Ç ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§π‡•ã‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§¶‡§¨‡§æ‡§µ ‡§ï‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", a: ["Systolic", "Diastolic", "Normal", "None"], c: 0 },
        { q: "How many chambers in human heart?", h: "‡§Æ‡§æ‡§®‡§µ ‡§π‡•É‡§¶‡§Ø ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§§‡§®‡•á ‡§ï‡•ã‡§∑‡•ç‡§†‡§ï ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç?", a: ["1", "2", "3", "4"], c: 3 },
        { q: "Time taken for one heart beat?", h: "‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§ï‡•á ‡§π‡•É‡§¶‡§Ø ‡§ï‡•ã ‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§ß‡§°‡§º‡§ï‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§§‡§®‡§æ ‡§∏‡§Æ‡§Ø ‡§≤‡§ó‡§§‡§æ ‡§π‡•à?", a: ["1s", "1 min", "1.5s", "0.8s"], c: 3 },
        { q: "Instrument to measure BP?", h: "‡§∞‡§ï‡•ç‡§§ ‡§ö‡§æ‡§™ ‡§ï‡•Ä ‡§Æ‡§æ‡§™ ‡§ï‡§ø‡§∏ ‡§â‡§™‡§ï‡§∞‡§£ ‡§∏‡•á ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à?", a: ["Sphygmomanometer", "Manometer", "Pacemaker", "ECG"], c: 0 },
        { q: "Instrument to detect heart disease?", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡•Ä ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§∞‡•ã‡§ó‡•ã‡§Ç ‡§ï‡§æ ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§®‡•á ‡§π‡•á‡§§‡•Å ‡§ï‡§ø‡§∏ ‡§â‡§™‡§ï‡§∞‡§£ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?", a: ["Pacemaker", "Electrocardiogram", "Sphygmomanometer", "Manometer"], c: 1 },
        { q: "ECG records the activity of?", h: "ECG ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ï‡§ø‡§∏‡§ï‡•Ä ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§Ø‡•á ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?", a: ["Heart", "Lungs", "Brain", "Muscles"], c: 0 },
        { q: "Process of gas exchange in blood during respiration?", h: "‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∂‡•ç‡§µ‡§∏‡§® ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§® ‡§ó‡•à‡§∏‡•á‡§Ç ‡§∞‡•Ç‡§ß‡§ø‡§∞ ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§´‡§ø‡§∞ ‡§â‡§∏‡•á ‡§õ‡•ã‡§°‡§º‡§§‡•Ä ‡§π‡•à?", a: ["Active transport", "Diffusion", "Osmosis", "Both A and B"], c: 1 },
        { q: "Normal systolic pressure?", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∏‡§ø‡§∏‡•ç‡§ü‡•ã‡§≤‡§ø‡§ï ‡§™‡•ç‡§∞‡•á‡§∂‡§∞ ‡§ï‡§ø‡§§‡§®‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["120 mmHg", "80 mmHg", "140 mmHg", "180 mmHg"], c: 0 },
        { q: "What is Jarvic-7?", h: "‡§ú‡§æ‡§∞‡•ç‡§µ‡§ø‡§ï-7 (Jarvic-7) ‡§π‡•à-", a: ["Electronic leg", "Pacemaker", "Artificial heart", "Artificial eye"], c: 2 },
        { q: "Function of heart in human body?", h: "‡§Æ‡§æ‡§®‡§µ ‡§∂‡§∞‡•Ä‡§∞ ‡§Æ‡•á‡§Ç ‡§π‡•É‡§¶‡§Ø ‡§ï‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§π‡•à-", a: ["Pumping station", "Energy provider", "Temp controller", "None"], c: 0 },
        { q: "How many times heart beats in average lifetime?", h: "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ú‡•Ä‡§µ‡§® ‡§ï‡§æ‡§≤ ‡§Æ‡•á‡§Ç ‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§ï‡§æ ‡§π‡•É‡§¶‡§Ø ‡§≤‡§ó‡§≠‡§ó ‡§ï‡§ø‡§§‡§®‡•Ä ‡§¨‡§æ‡§∞ ‡§ß‡§°‡§º‡§ï‡§§‡§æ ‡§π‡•à?", a: ["1 Billion", "2 Billion", "3 Billion", "4 Billion"], c: 1 },
        { q: "Sound of Lub-Dub is produced by?", h: "‡§≤‡§¨-‡§°‡§¨ ‡§ß‡•ç‡§µ‡§®‡§ø ‡§ï‡§ø‡§∏‡§ï‡•Ä ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["Intestine", "Stomach", "Kidney", "Heart"], c: 3 },
        { q: "Instrument used to hear heart sound?", h: "‡§π‡•É‡§¶‡§Ø ‡§∏‡•á ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§≤‡§¨-‡§≤‡§¨ ‡§ß‡•ç‡§µ‡§®‡§ø ‡§ï‡•ã ‡§ï‡§ø‡§∏ ‡§Ø‡§Ç‡§§‡•ç‡§∞ ‡§∏‡•á ‡§∏‡•Å‡§®‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à?", a: ["Sphygmomanometer", "Manometer", "ECG", "Stethoscope"], c: 3 },
        { q: "Blood filling and exiting heart is called?", h: "‡§∞‡§ï‡•ç‡§§ ‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§® ‡§π‡•É‡§¶‡§Ø ‡§Æ‡•á‡§Ç ‡§∞‡§ï‡•ç‡§§ ‡§ï‡§æ ‡§≠‡§∞‡§®‡§æ ‡§§‡§•‡§æ ‡§´‡§ø‡§∞ ‡§â‡§∏‡§ï‡§æ ‡§¨‡§æ‡§π‡§∞ ‡§®‡§ø‡§ï‡§≤‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§≤‡§æ‡§§‡§æ ‡§π‡•à?", a: ["Systole", "Diastole", "Cardiac Cycle", "Double Circulation"], c: 2 },
        { q: "Blood passes through heart how many times in one cycle?", h: "‡§Æ‡§æ‡§®‡§µ ‡§∂‡§∞‡•Ä‡§∞ ‡§Æ‡•á‡§Ç ‡§∞‡§ï‡•ç‡§§-‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§ï‡•á ‡§è‡§ï ‡§ö‡§ï‡•ç‡§∞ ‡§™‡•Ç‡§∞‡§æ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§∞‡§ï‡•ç‡§§ ‡§π‡•É‡§¶‡§Ø ‡§∏‡•á ‡§π‡•ã‡§ï‡§∞ ‡§ï‡§ø‡§§‡§®‡•Ä ‡§¨‡§æ‡§∞ ‡§ó‡•Å‡§ú‡§∞‡§§‡§æ ‡§π‡•à?", a: ["1", "2", "3", "4"], c: 1 },
        { q: "One heart beat includes?", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡•á 1 ‡§ß‡§°‡§º‡§ï‡§® ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•à‡§Ç-", a: ["1 Systole 1 Diastole", "2 Systole", "2 Diastole", "2 Systole 1 Diastole"], c: 0 },
        { q: "Central pumping organ is?", h: "‡§Æ‡§æ‡§®‡§µ ‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡§æ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡•Ä‡§Ø ‡§™‡§Ç‡§™ ‡§Ö‡§Ç‡§ó ‡§π‡•à-", a: ["Heart", "Kidney", "Liver", "Lungs"], c: 0 },
        { q: "Pacemaker is also called?", h: "‡§™‡•á‡§∏‡§Æ‡•á‡§ï‡§∞ ‡§ï‡•ã ‡§ï‡§π‡§§‡•á ‡§π‡•à-", a: ["S-A Node", "A-V Node", "Bundle of His", "Purkinje fibers"], c: 0 },
        { q: "Heart rate is controlled by?", h: "‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§Æ‡•á‡§Ç ‡§π‡•É‡§¶‡§Ø-‡§ó‡§§‡§ø ‡§ï‡§æ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§π‡•ã‡§§‡§æ ‡§π‡•à-", a: ["S-A Node", "Nerve system", "A-V Node", "All"], c: 3 },
        { q: "Pacemaker system includes?", h: "‡§™‡•á‡§∏‡§Æ‡•á‡§ï‡§∞ ‡§§‡§Ç‡§§‡•ç‡§∞ (Pacemaker system) ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§§‡§æ ‡§π‡•à-", a: ["S-A node", "A-V node", "Bundle of His", "Purkinje fibers", "All of these"], c: 4 },
        { q: "What is S-A Node?", h: "S-A ‡§®‡•ã‡§° ‡§π‡•à-", a: ["Connective tissue", "Epithelial tissue", "Nervous tissue", "Muscular tissue"], c: 3 },
        { q: "Path of electrical impulse in heart?", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡•á ‡§ß‡§°‡§º‡§ï‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§π‡•á‡§§‡•Å S-A ‡§®‡•ã‡§° ‡§Æ‡•á‡§Ç ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§µ‡§ø‡§¶‡•ç‡§Ø‡•Å‡§§‡•Ä‡§Ø ‡§§‡§∞‡§Ç‡§ó ‡§ï‡§ø‡§∏ ‡§™‡§• ‡§∏‡•á ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§§‡•Ä ‡§π‡•à?", a: ["AV Node -> His -> Purkinje", "AV Node -> Purkinje -> His", "Purkinje -> His -> AV Node", "His -> Purkinje -> AV Node"], c: 0 },
        { q: "Valves in heart...?", h: "‡§π‡•É‡§¶‡§Ø ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§•‡§ø‡§§ ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§ï‡§™‡§æ‡§ü (Valve)-", a: ["Control flow", "Control pressure", "Protect atria", "Protect ventricle"], c: 0 }
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let timer;
    let timeLeft;

    // --- SOUND SYSTEM (Web Audio API) ---
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playTone(freq, type, duration) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = type;
        osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
        gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();
        osc.stop(audioCtx.currentTime + duration);
    }

    // --- LOGIC ---
    function startQuiz() {
        const shuffle = document.getElementById('shuffle-setting').checked;
        currentQuestions = shuffle ? [...quizData].sort(() => Math.random() - 0.5) : [...quizData];
        
        currentIndex = 0;
        score = 0;
        
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('quiz-area').style.display = 'block';
        
        showQuestion();
    }

    function showQuestion() {
        const q = currentQuestions[currentIndex];
        document.getElementById('eng-q').innerText = q.q;
        document.getElementById('hin-q').innerText = q.h;
        document.getElementById('q-counter').innerText = `Question: ${currentIndex + 1}/${currentQuestions.length}`;
        document.getElementById('score-display').innerText = `Score: ${score}`;
        
        const optionsBox = document.getElementById('options-box');
        optionsBox.innerHTML = '';
        
        q.a.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerHTML = `<div>${opt}</div>`;
            btn.onclick = () => checkAnswer(i, btn);
            optionsBox.appendChild(btn);
        });

        updateProgress();
        startTimer();
    }

    function startTimer() {
        clearInterval(timer);
        const limit = parseInt(document.getElementById('timer-setting').value);
        if (limit <= 0) {
            document.getElementById('timer-display').innerText = "‚è± Off";
            return;
        }

        timeLeft = limit;
        const display = document.getElementById('timer-display');
        display.classList.remove('pulse-red');
        
        timer = setInterval(() => {
            timeLeft--;
            display.innerText = `‚è± ${timeLeft}s`;
            if (timeLeft < 5) display.classList.add('pulse-red');
            if (timeLeft <= 0) {
                clearInterval(timer);
                autoFail();
            }
        }, 1000);
    }

    function checkAnswer(idx, btn) {
        clearInterval(timer);
        const q = currentQuestions[currentIndex];
        const buttons = document.querySelectorAll('.option-btn');
        buttons.forEach(b => b.onclick = null); // Disable further clicks

        if (idx === q.c) {
            score++;
            btn.classList.add('correct');
            playTone(880, 'sine', 0.5); // "Ting"
            triggerConfetti();
        } else {
            btn.classList.add('wrong');
            buttons[q.c].classList.add('correct');
            playTone(110, 'sawtooth', 0.5); // "Buzz"
            showSadEmoji();
        }

        setTimeout(() => {
            currentIndex++;
            if (currentIndex < currentQuestions.length) showQuestion();
            else endQuiz();
        }, 1500);
    }

    function autoFail() {
        const q = currentQuestions[currentIndex];
        const buttons = document.querySelectorAll('.option-btn');
        buttons[q.c].classList.add('correct');
        playTone(110, 'sawtooth', 0.5);
        setTimeout(() => {
            currentIndex++;
            if (currentIndex < currentQuestions.length) showQuestion();
            else endQuiz();
        }, 1500);
    }

    function updateProgress() {
        const prg = (currentIndex / currentQuestions.length) * 100;
        document.getElementById('progress').style.width = prg + "%";
    }

    function endQuiz() {
        clearInterval(timer);
        document.getElementById('quiz-area').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        
        const finalScoreText = document.getElementById('final-score');
        finalScoreText.innerText = `${score} / ${currentQuestions.length}`;
        
        const pct = (score / currentQuestions.length) * 100;
        const title = document.getElementById('result-title');
        const msg = document.getElementById('result-msg');
        
        if (pct >= 80) {
            title.innerText = "üèÜ Outstanding Performance!";
            msg.innerText = "You have mastered the transport system topics!";
            triggerConfetti();
        } else if (pct >= 50) {
            title.innerText = "üëè Well Done! Keep it up.";
            msg.innerText = "Good job, but there's room for improvement.";
        } else {
            title.innerText = "üìö Practice makes perfect!";
            msg.innerText = "Review the material and try again to improve your score.";
        }
    }

    function showSadEmoji() {
        const emoji = document.getElementById('sad-emoji');
        emoji.style.display = 'block';
        setTimeout(() => emoji.style.display = 'none', 1000);
    }

    function triggerConfetti() {
        const canvas = document.getElementById('confetti');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particles = [];
        for (let i = 0; i < 100; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                r: Math.random() * 6 + 4,
                d: Math.random() * 10,
                color: `hsl(${Math.random() * 360}, 70%, 50%)`,
                tilt: Math.random() * 10 - 10
            });
        }
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, i) => {
                p.y += Math.cos(p.d) + 1 + p.r / 2;
                p.tilt = Math.sin(p.d) * 15;
                ctx.beginPath();
                ctx.lineWidth = p.r;
                ctx.strokeStyle = p.color;
                ctx.moveTo(p.x + p.tilt + p.r / 2, p.y);
                ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r / 2);
                ctx.stroke();
            });
            if (particles[0].y < canvas.height * 2) requestAnimationFrame(draw);
        }
        draw();
    }
</script>
</body>
</html>