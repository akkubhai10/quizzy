<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Human Physiology Quiz - Bilingual</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ffffff;
            --secondary: #ddd;
            --accent-green: #00e676;
            --accent-red: #ff1744;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #ff758c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            color: var(--primary);
        }

        /* Glassmorphism Card */
        .quiz-card {
            width: 90%;
            max-width: 600px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 25px;
            border: 1px solid var(--glass-border);
            padding: 30px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            position: relative;
            z-index: 10;
        }

        /* Progress Bar */
        .progress-bar-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 25px 25px 0 0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%; width: 0%;
            background: linear-gradient(90deg, #00f2fe, #4facfe);
            box-shadow: 0 0 10px #00f2fe;
            transition: width 0.4s ease;
        }

        /* UI Elements */
        .stats-row { display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: 600; font-size: 0.9rem; }
        .timer-circle { font-size: 1.2rem; }
        .pulse-red { color: var(--accent-red); animation: pulse 1s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        .question-text { font-size: 1.2rem; font-weight: 700; margin-bottom: 8px; }
        .hindi-text { font-size: 0.95rem; color: var(--secondary); margin-bottom: 25px; font-weight: 400; }

        /* Options */
        .options-grid { display: grid; gap: 12px; }
        .option-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            color: var(--primary);
            font-size: 1rem;
        }
        .option-btn:hover:not(:disabled) { background: rgba(255, 255, 255, 0.15); transform: scale(1.02); }
        .option-btn:disabled { cursor: default; }
        
        .correct { background: var(--accent-green) !important; color: #000 !important; font-weight: 700; }
        .wrong { background: var(--accent-red) !important; animation: shake 0.4s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        /* Screens */
        #start-screen, #result-screen { text-align: center; }
        #quiz-screen { display: none; }
        .btn-start {
            margin-top: 20px; padding: 15px 40px; border-radius: 50px; border: none;
            background: #fff; color: #764ba2; font-weight: 700; cursor: pointer; transition: 0.3s;
        }
        .btn-start:hover { transform: scale(1.1); box-shadow: 0 0 20px rgba(255,255,255,0.4); }

        .sad-emoji {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 10rem; display: none; z-index: 1000;
        }

        canvas#confetti {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 9999;
        }

        .finish-btn {
            margin-top: 25px; background: transparent; border: 1px solid var(--secondary);
            color: var(--secondary); padding: 8px 15px; border-radius: 10px; cursor: pointer;
            font-size: 0.8rem;
        }

        @media (max-width: 480px) {
            .quiz-card { padding: 20px; }
            .question-text { font-size: 1rem; }
        }
    </style>
</head>
<body>

<canvas id="confetti"></canvas>
<div class="sad-emoji" id="sad-emoji">üò¢</div>

<div class="quiz-card">
    <div class="progress-bar-container"><div class="progress-fill" id="progress"></div></div>

    <div id="start-screen">
        <h1 style="margin-bottom: 10px;">Human Physiology Quiz</h1>
        <p style="color: var(--secondary);">Module: Transport & Blood (Q. 101-150)</p>
        
        <div style="margin-top: 30px;">
            <label style="display: block; margin-bottom: 10px;">Timer (Seconds per Question)</label>
            <input type="number" id="timer-input" value="15" min="0" 
                   style="padding: 10px; border-radius: 10px; border: none; text-align: center; width: 80px;">
            <p style="font-size: 0.7rem; margin-top: 5px;">Set to 0 to disable</p>
        </div>

        <div style="margin-top: 20px;">
            <label><input type="checkbox" id="shuffle-toggle"> Shuffle Questions</label>
        </div>

        <button class="btn-start" onclick="initQuiz()">START QUIZ</button>
    </div>

    <div id="quiz-screen">
        <div class="stats-row">
            <div id="q-counter">Question 00/50</div>
            <div class="timer-circle" id="timer-display">‚è± --</div>
            <div id="score-display">Score: 0</div>
        </div>

        <div class="question-container">
            <div class="question-text" id="eng-q"></div>
            <div class="hindi-text" id="hin-q"></div>
        </div>

        <div class="options-grid" id="options-container"></div>

        <button class="finish-btn" onclick="showResults()">Finish & Show Results</button>
    </div>

    <div id="result-screen" style="display: none;">
        <h2 id="result-status" style="font-size: 2rem;"></h2>
        <div style="font-size: 4rem; margin: 20px 0;" id="final-score">0</div>
        <p id="result-msg" style="margin-bottom: 30px;"></p>
        <button class="btn-start" onclick="location.reload()">RESTART QUIZ</button>
    </div>
</div>

<script>
    // --- QUESTION DATA (101-150) ---
    const quizData = [
        { q: "Filling of blood in the heart and then its exit during circulation is called?", h: "‡§∞‡§ï‡•ç‡§§ ‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§ï‡•á ‡§¶‡•å‡§∞‡§æ‡§® ‡§π‡•É‡§¶‡§Ø ‡§Æ‡•á‡§Ç ‡§∞‡§ï‡•ç‡§§ ‡§ï‡§æ ‡§≠‡§∞‡§®‡§æ ‡§§‡§•‡§æ ‡§´‡§ø‡§∞ ‡§â‡§∏‡§ï‡§æ ‡§¨‡§æ‡§π‡§∞ ‡§®‡§ø‡§ï‡§≤‡§®‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§≤‡§æ‡§§‡§æ ‡§π‡•à?", a: ["Systole", "Diastole", "Cardiac-cycle", "Double-circulation"], c: 2 },
        { q: "How many times does blood pass through the heart in one full cycle in human body?", h: "‡§Æ‡§æ‡§®‡§µ ‡§∂‡§∞‡•Ä‡§∞ ‡§Æ‡•á‡§Ç ‡§∞‡§ï‡•ç‡§§-‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§ï‡•á ‡§è‡§ï ‡§ö‡§ï‡•ç‡§∞ ‡§™‡•Ç‡§∞‡§æ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§∞‡§ï‡•ç‡§§ ‡§π‡•É‡§¶‡§Ø ‡§∏‡•á ‡§π‡•ã‡§ï‡§∞ ‡§ï‡§ø‡§§‡§®‡•Ä ‡§¨‡§æ‡§∞ ‡§ó‡•Å‡§ú‡§∞‡§§‡§æ ‡§π‡•à?", a: ["1 time", "2 times", "3 times", "4 times"], c: 1 },
        { q: "One heartbeat consists of?", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡•á 1 ‡§ß‡§°‡§º‡§ï‡§® ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•à-", a: ["1 Systole 1 Diastole", "2 Systole", "2 Diastole", "2 Systole 1 Diastole"], c: 0 },
        { q: "The central pumping organ of the human body is?", h: "‡§Æ‡§æ‡§®‡§µ ‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡§æ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡•Ä‡§Ø ‡§™‡§Ç‡§™ ‡§Ö‡§Ç‡§ó (Central Pumping Organ) ‡§π‡•à-", a: ["Heart", "Kidney", "Liver", "Lungs"], c: 0 },
        { q: "Pacemaker is also called?", h: "‡§™‡•á‡§∏‡§Æ‡•á‡§ï‡§∞ ‡§ï‡•ã ‡§ï‡§π‡§§‡•á ‡§π‡•à-", a: ["S-A Node", "A-V Node", "Bundle of His", "Purkinje fibers"], c: 0 },
        { q: "Heartbeat in humans is controlled by?", h: "‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§Æ‡•á‡§Ç ‡§π‡•É‡§¶‡§Ø-‡§ó‡§§‡§ø ‡§ï‡§æ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§π‡•ã‡§§‡§æ ‡§π‡•à-", a: ["S-A Node", "Nervous System", "A-V Node", "All of these together"], c: 3 },
        { q: "The Pacemaker system includes?", h: "‡§™‡•á‡§∏‡§Æ‡•á‡§ï‡§∞ ‡§§‡§Ç‡§§‡•ç‡§∞ (Pacemaker system) ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§§‡§æ ‡§π‡•à-", a: ["S-A node", "A-V node", "Bundle of His", "Purkinje fibers", "All of these"], c: 4 },
        { q: "S-A Node is a?", h: "S-A ‡§®‡•ã‡§° ‡§π‡•à-", a: ["Connective tissue", "Epithelial tissue", "Nerve tissue", "Muscle tissue"], c: 3 },
        { q: "Through which path does the electrical wave generated in S-A Node travel to control heartbeats?", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡•á ‡§ß‡§°‡§º‡§ï‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§π‡•á‡§§‡•Å S-A ‡§®‡•ã‡§° ‡§Æ‡•á‡§Ç ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§µ‡§ø‡§¶‡•ç‡§Ø‡•Å‡§§‡•Ä‡§Ø ‡§§‡§∞‡§Ç‡§ó ‡§ï‡§ø‡§∏ ‡§™‡§• ‡§∏‡•á ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§§‡•Ä ‡§π‡•à?", a: ["AV-node -> Bundle of his -> Purkinje Fibres", "AV-node -> Purkinje Fibres -> Bundle of his", "Purkinje Fibres -> Bundle of his -> AV-node", "Bundle of his -> Purkinje Fibres -> AV-node"], c: 0 },
        { q: "Consider these: 1. SA-node is connected to Sympathetic/Vagus nerves. 2. Sympathetic fibers increase heart rate. 3. Vagus fibers decrease heart rate.", h: "1. ‡§™‡•á‡§∏‡§Æ‡•á‡§ï‡§∞ ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§ï‡•á ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§π‡•á‡§§‡•Å SA-node ‡§™‡§∞ ‡§∏‡§ø‡§Æ‡•ç‡§™‡•à‡§•‡•á‡§ü‡§ø‡§ï ‡§î‡§∞ ‡§µ‡•à‡§ó‡§∏ ‡§®‡§æ‡§Æ‡§ï ‡§∏‡•ç‡§µ‡§æ‡§Ø‡§§‡•ç‡§§ ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§ú‡•Å‡§°‡§º‡•á ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§ 2. ‡§∏‡§ø‡§Æ‡•ç‡§™‡•à‡§•‡•á‡§ü‡§ø‡§ï ‡§§‡§Ç‡§§‡•Å ‡§π‡•É‡§¶‡§Ø ‡§ó‡§§‡§ø ‡§ï‡•ã ‡§¨‡§¢‡§º‡§æ‡§§‡§æ ‡§π‡•à‡•§ 3. ‡§µ‡•à‡§ó‡§∏ ‡§§‡§Ç‡§§‡•Å ‡§π‡•É‡§¶‡§Ø ‡§ó‡§§‡§ø ‡§ï‡•ã ‡§ò‡§ü‡§æ‡§§‡§æ ‡§π‡•à‡•§", a: ["Only 1", "1 and 2", "Only 3", "1, 2 and 3"], c: 3 },
        { q: "Which of the following is correct?", h: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§∏‡§æ ‡§è‡§ï ‡§∏‡§π‡•Ä ‡§π‡•à?", a: ["The whole heart expands together", "The whole heart contracts together", "Heart does not expand or contract together", "None of these"], c: 2 },
        { q: "Various valves located in the heart...?", h: "‡§π‡•É‡§¶‡§Ø ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§•‡§ø‡§§ ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§ï‡§™‡§æ‡§ü (Valve)-", a: ["Control flow of blood", "Control blood pressure", "Protect atria", "Protect ventricles"], c: 0 },
        { q: "Consider these: 1. Lower blood pH increases heart rate. 2. Higher blood pH decreases heart rate.", h: "1. ‡§∞‡•Ç‡§ß‡§ø‡§∞ ‡§ï‡§æ pH ‡§Æ‡§æ‡§® ‡§ï‡§Æ ‡§π‡•ã‡§®‡•á ‡§∏‡•á ‡§π‡•É‡§¶‡§Ø ‡§ï‡•Ä ‡§ó‡§§‡§ø ‡§¨‡§¢‡§º‡§§‡•Ä ‡§π‡•à‡•§ 2. ‡§∞‡•Ç‡§ß‡§ø‡§∞ ‡§ï‡§æ pH ‡§Æ‡§æ‡§® ‡§Ö‡§ß‡§ø‡§ï ‡§π‡•ã‡§®‡•á ‡§∏‡•á ‡§π‡•É‡§¶‡§Ø ‡§ï‡•Ä ‡§ó‡§§‡§ø ‡§ï‡§Æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡•§", a: ["Only 1", "Only 2", "Both 1 and 2", "Neither 1 nor 2"], c: 2 },
        { q: "In which direction does blood transport occur in veins?", h: "‡§∂‡§ø‡§∞‡§æ‡§ì‡§Ç ‡§Æ‡•á‡§Ç ‡§∞‡§ï‡•ç‡§§ ‡§ï‡§æ ‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§ï‡§ø‡§∏ ‡§¶‡§ø‡§∂‡§æ ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["From organs to heart", "From heart to organs", "Inside the wall of heart", "One organ to another without heart"], c: 0 },
        { q: "In which direction does blood transport occur in arteries?", h: "‡§ß‡§Æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∞‡§ï‡•ç‡§§ ‡§ï‡§æ ‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§ï‡§ø‡§∏ ‡§¶‡§ø‡§∂‡§æ ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["From organs to heart", "From heart to organs", "Inside the wall of heart", "One organ to another without heart"], c: 1 },
        { q: "Where do Coronary vessels supply blood?", h: "‡§ï‡•ã‡§∞‡•ã‡§®‡§∞‡•Ä ‡§µ‡§æ‡§π‡§ø‡§®‡§ø‡§Ø‡§æ‡§Å ‡§ï‡§π‡§æ‡§Å ‡§∞‡§ï‡•ç‡§§ ‡§™‡•ç‡§∞‡§µ‡§æ‡§π‡§ø‡§§ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à?", a: ["From organs to heart", "From heart to organs", "Inside the walls of the heart", "One organ to another without heart"], c: 2 },
        { q: "Where do Portal vessels supply blood?", h: "‡§™‡•ã‡§∞‡•ç‡§ü‡§≤ ‡§µ‡§æ‡§π‡§ø‡§®‡§ø‡§Ø‡§æ‡§Å ‡§ï‡§π‡§æ‡§Å ‡§∞‡§ï‡•ç‡§§ ‡§™‡•ç‡§∞‡§µ‡§æ‡§π‡§ø‡§§ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à?", a: ["From organs to heart", "From heart to organs", "Inside the wall of heart", "From one organ to another"], c: 3 },
        { q: "The activity of the heart is conducted by?", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡•Ä ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", a: ["Hormones", "Medulla Oblongata", "Automatic action", "All of these"], c: 3 },
        { q: "Through which of these is oxygenated blood carried?", h: "‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•å‡§®-‡§∏‡•Ä ‡§∞‡•Ç‡§ß‡§ø‡§∞ ‡§µ‡§æ‡§π‡§ø‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ë‡§ï‡•ç‡§∏‡•Ä‡§ï‡•É‡§§ ‡§∞‡§ï‡•ç‡§§ ‡§≤‡•á ‡§ú‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?", a: ["Pulmonary Artery", "Aorta", "Capillaries", "Pulmonary Vein"], c: 3 },
        { q: "Pulmonary vein carrying pure blood from lungs opens into?", h: "‡§´‡•á‡§´‡§°‡§º‡•ã‡§Ç ‡§∏‡•á ‡§∂‡•Å‡§¶‡•ç‡§ß ‡§∞‡§ï‡•ç‡§§ ‡§≤‡§æ‡§ï‡§∞ ‡§´‡•Å‡§´‡•ç‡§´‡•Å‡§∏‡•Ä‡§Ø ‡§∂‡§ø‡§∞‡§æ ‡§ñ‡•Å‡§≤‡§§‡•Ä ‡§π‡•à-", a: ["Left Ventricle", "Right Ventricle", "Left Atrium", "Right Atrium"], c: 2 },
        { q: "Which of the following is NOT correct?", h: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§è‡§ï ‡§∏‡§π‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?", a: ["Veins carry impure blood", "Vein walls are thinner than arteries", "Veins have valves at intervals", "Blood pressure in veins is higher than arteries"], c: 3 },
        { q: "Consider these: 1. Pulmonary artery carries impure blood to lungs. 2. Pulmonary vein carries pure blood from lungs.", h: "1. ‡§ß‡§Æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§´‡•Å‡§´‡•ç‡§´‡•Å‡§∏ ‡§ß‡§Æ‡§®‡•Ä ‡§Ö‡§™‡§µ‡§æ‡§¶ ‡§π‡•à ‡§ú‡•ã ‡§Ö‡§∂‡•Å‡§¶‡•ç‡§ß ‡§∞‡§ï‡•ç‡§§ ‡§ï‡•ã ‡§π‡•É‡§¶‡§Ø ‡§∏‡•á ‡§´‡•á‡§´‡§°‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§≤‡•á ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡•§ 2. ‡§∂‡§ø‡§∞‡§æ‡§ì‡§Ç ‡§Æ‡•á‡§Ç ‡§´‡•Å‡§´‡•ç‡§´‡•Å‡§∏ ‡§∂‡§ø‡§∞‡§æ ‡§Ö‡§™‡§µ‡§æ‡§¶ ‡§π‡•à ‡§ú‡•ã ‡§∂‡•Å‡§¶‡•ç‡§ß ‡§∞‡§ï‡•ç‡§§ ‡§ï‡•ã ‡§´‡•á‡§´‡§°‡§º‡•ã‡§Ç ‡§∏‡•á ‡§π‡•É‡§¶‡§Ø ‡§Æ‡•á‡§Ç ‡§≤‡§æ‡§§‡•Ä ‡§π‡•à‡•§", a: ["Only 1", "Only 2", "Both 1 and 2", "Neither"], c: 2 },
        { q: "The sound 'Dub' in the heart is produced by?", h: "‡§π‡•É‡§¶‡§Ø ‡§Æ‡•á‡§Ç '‡§°‡§¨' ‡§ï‡•Ä ‡§ß‡•ç‡§µ‡§®‡§ø ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", a: ["Closing of bicuspid valve", "Closing of tricuspid valve", "Closing of semilunar valve", "Opening of semilunar valve"], c: 2 },
        { q: "Blood is supplied to the heart muscles by?", h: "‡§π‡•É‡§¶‡§Ø ‡§ï‡•Ä ‡§™‡•á‡§∂‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§∞‡§ï‡•ç‡§§ ‡§™‡§π‡•Å‡§Å‡§ö‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à-", a: ["Carotid artery", "Coronary artery", "Aorta", "Pulmonary artery"], c: 1 },
        { q: "The Pulmonary artery originates from?", h: "‡§´‡•Å‡§´‡•ç‡§´‡•Å‡§∏ ‡§ß‡§Æ‡§®‡•Ä ‡§ï‡•Ä ‡§â‡§§‡•ç‡§™‡§§‡•ç‡§§‡§ø ‡§π‡•ã‡§§‡•Ä ‡§π‡•à-", a: ["Right Ventricle", "Left Ventricle", "Right Atrium", "Left Atrium"], c: 0 },
        { q: "Which blood vessel has thick, elastic walls and no valves?", h: "‡§ï‡§ø‡§∏ ‡§∞‡§ï‡•ç‡§§ ‡§®‡§≤‡•Ä ‡§ï‡•Ä ‡§¶‡•Ä‡§µ‡§æ‡§∞‡•á‡§Ç ‡§Æ‡•ã‡§ü‡•Ä, ‡§≤‡§ö‡•Ä‡§≤‡•Ä ‡§§‡§•‡§æ ‡§ï‡§™‡§æ‡§ü‡§π‡•Ä‡§® (Without Valve) ‡§π‡•ã‡§§‡•Ä ‡§π‡•à‡§Ç?", a: ["Artery", "Vein", "Both", "None of these"], c: 0 },
        { q: "Digested food from intestine first reaches which organ via Hepatic Portal Vessels?", h: "‡§Ø‡§ï‡•É‡§§ ‡§®‡§ø‡§µ‡§æ‡§π‡§ø‡§ï‡§æ ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§Ü‡§Å‡§§ ‡§Æ‡•á‡§Ç ‡§™‡§ö‡§æ ‡§π‡•Å‡§Ü ‡§≠‡•ã‡§ú‡§® ‡§∏‡§∞‡•ç‡§µ‡§™‡•ç‡§∞‡§•‡§Æ ‡§™‡§π‡•Å‡§Å‡§ö‡§§‡§æ ‡§π‡•à-", a: ["Heart", "Liver", "Kidney", "Lungs"], c: 1 },
        { q: "Blood vessels carrying blood from body towards heart are called?", h: "‡§∂‡§∞‡•Ä‡§∞ ‡§∏‡•á ‡§π‡•É‡§¶‡§Ø ‡§ï‡•Ä ‡§ì‡§∞ ‡§∞‡§ï‡•ç‡§§ ‡§≤‡•á ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§∞‡§ï‡•ç‡§§ ‡§µ‡§æ‡§π‡§ø‡§®‡•Ä ‡§ï‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", a: ["Artery", "Vein", "Pulmonary Artery", "Pulmonary Vein"], c: 1 },
        { q: "The amount of blood pumped by the heart in each beat or cardiac cycle is?", h: "‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§ß‡§°‡§º‡§ï‡§® ‡§Ø‡§æ ‡§ï‡§æ‡§∞‡•ç‡§°‡§ø‡§Ø‡§ï ‡§ö‡§ï‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§π‡•É‡§¶‡§Ø ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∞‡•Ç‡§ß‡§ø‡§∞ ‡§ï‡•ã ‡§¨‡§æ‡§π‡§∞ ‡§ï‡•Ä ‡§ì‡§∞ ‡§™‡§Ç‡§™ ‡§ï‡§ø‡§Ø‡•á ‡§ú‡§æ‡§®‡•á ‡§ï‡•Ä ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§π‡•à-", a: ["20 ml", "50 ml", "70 ml", "100 ml"], c: 2 },
        { q: "Consider: 1. Pulmonary vein carries impure blood to right ventricle. 2. Pulmonary artery carries pure blood to left atrium.", h: "1. ‡§™‡§≤‡•ç‡§Æ‡•ã‡§®‡§∞‡•Ä ‡§∂‡§ø‡§∞‡§æ ‡§Ö‡§∂‡•Å‡§¶‡•ç‡§ß ‡§∞‡§ï‡•ç‡§§ ‡§ï‡•ã ‡§¶‡§æ‡§π‡§ø‡§®‡•á ‡§®‡§ø‡§≤‡§Ø ‡§∏‡•á ‡§´‡•á‡§´‡§°‡§º‡§æ ‡§Æ‡•á‡§Ç ‡§™‡§π‡•Å‡§Å‡§ö‡§æ‡§§‡§æ ‡§π‡•à‡•§ 2. ‡§™‡§≤‡•ç‡§Æ‡•ã‡§®‡§∞‡•Ä ‡§ß‡§Æ‡§®‡•Ä ‡§∂‡•Å‡§¶‡•ç‡§ß ‡§∞‡§ï‡•ç‡§§ ‡§ï‡•ã ‡§´‡•á‡§´‡§°‡§º‡§æ ‡§∏‡•á ‡§¨‡§æ‡§Ø‡•á‡§Ç ‡§Ü‡§≤‡§ø‡§Ç‡§¶ ‡§Æ‡•á‡§Ç ‡§™‡§π‡•Å‡§Å‡§ö‡§æ‡§§‡§æ ‡§π‡•à‡•§", a: ["Only 1", "Only 2", "Both", "Neither (Both Incorrect)"], c: 3 },
        { q: "What is the outermost layer of arteries called?", h: "‡§ß‡§Æ‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§∏‡§¨‡§∏‡•á ‡§¨‡§æ‡§π‡§∞‡•Ä ‡§™‡§∞‡§§ ‡§ï‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", a: ["Tunica intima", "Tunica media", "Tunica externa", "Venule"], c: 2 },
        { q: "What type of tissue are Blood and Lymph?", h: "‡§∞‡§ï‡•ç‡§§ ‡§§‡§•‡§æ ‡§≤‡§æ‡§∏‡•Ä‡§ï‡§æ ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§â‡§§‡•ç‡§§‡§ï ‡§π‡•à?", a: ["Connective tissue", "Fluid Connective tissue", "Epithelial tissue", "Muscle tissue"], c: 1 },
        { q: "Blood volume is what percentage of human body weight?", h: "‡§Æ‡§æ‡§®‡§µ ‡§∂‡§∞‡•Ä‡§∞ ‡§Æ‡•á‡§Ç ‡§∞‡§ï‡•ç‡§§ ‡§ï‡•Ä ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§∂‡§∞‡•Ä‡§∞ ‡§ï‡•á ‡§≠‡§æ‡§∞ ‡§ï‡§æ ‡§≤‡§ó‡§≠‡§ó ‡§ï‡§ø‡§§‡§®‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["5 Percent", "9 Percent", "12 Percent", "7 Percent"], c: 3 },
        { q: "Average blood volume in an adult human is?", h: "‡§è‡§ï ‡§µ‡§Ø‡§∏‡•ç‡§ï ‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§Æ‡•á‡§Ç ‡§î‡§∏‡§§‡§® ‡§ï‡§ø‡§§‡§®‡§æ ‡§∞‡§ï‡•ç‡§§ ‡§™‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?", a: ["2-3 Litres", "5-6 Litres", "10-12 Litres", "9-12 Litres"], c: 1 },
        { q: "Blood is thick and sticky due to the presence of?", h: "‡§Æ‡§æ‡§®‡§µ ‡§∞‡§ï‡•ç‡§§ ‡§ï‡§ø‡§∏‡§ï‡•Ä ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ ‡§ó‡§æ‡§¢‡§º‡§æ, ‡§≤‡§∏‡§≤‡§∏‡§æ ‡§î‡§∞ ‡§∏‡•ç‡§Ø‡§æ‡§® ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["Albumin protein", "Glucose", "Cholesterol", "Excessive water"], c: 0 },
        { q: "The pH value of human blood is?", h: "‡§Æ‡§æ‡§®‡§µ-‡§∞‡§ï‡•ç‡§§ ‡§ï‡§æ pH ‡§Æ‡§æ‡§® ‡§ï‡§ø‡§§‡§®‡§æ ‡§π‡•à?", a: ["6.8", "7.4", "2.3", "8.1"], c: 1 },
        { q: "Plasma (liquid part) makes up what % of total blood volume?", h: "‡§∞‡§ï‡•ç‡§§ ‡§ï‡§æ ‡§§‡§∞‡§≤ ‡§≠‡§æ‡§ó ‡§™‡•ç‡§≤‡§æ‡§ú‡•ç‡§Æ‡§æ ‡§Ü‡§Ø‡§§‡§® ‡§ï‡•á ‡§π‡§ø‡§∏‡§æ‡§¨ ‡§∏‡•á ‡§™‡•Ç‡§∞‡•á ‡§∞‡§ï‡•ç‡§§ ‡§ï‡§æ ‡§ï‡§∞‡•Ä‡§¨ ‡§ï‡§ø‡§§‡§®‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["25 Percent", "35 Percent", "55 Percent", "75 Percent"], c: 2 },
        { q: "Serum is defined as?", h: "‡§∏‡•Ä‡§∞‡§Æ ‡§ï‡§π‡§≤‡§æ‡§§‡§æ ‡§π‡•à-", a: ["Plasma with fibrinogen", "Plasma with prothrombin", "Plasma excluding fibrinogen", "Plasma excluding prothrombin"], c: 2 },
        { q: "Blood is a...?", h: "‡§∞‡§ï‡•ç‡§§ ‡§π‡•à-", a: ["Fluid connective tissue", "Actual connective tissue", "Adipose tissue", "Skeletal tissue"], c: 0 },
        { q: "What is present in maximum quantity in blood plasma?", h: "‡§∞‡§ï‡•ç‡§§ ‡§™‡•ç‡§≤‡§æ‡§ú‡•ç‡§Æ‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡§∞‡•ç‡§µ‡§æ‡§ß‡§ø‡§ï ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§Æ‡•á‡§Ç ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§ ‡§∞‡§π‡§§‡•á ‡§π‡•à-", a: ["Water", "Glucose", "Protein", "Inorganic salts"], c: 0 },
        { q: "Water percentage in blood plasma is approximately?", h: "‡§∞‡§ï‡•ç‡§§ ‡§™‡•ç‡§≤‡§æ‡§ú‡•ç‡§Æ‡§æ ‡§Æ‡•á‡§Ç ‡§ú‡§≤ ‡§ï‡•Ä ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§≤‡§ó‡§≠‡§ó ‡§ï‡§ø‡§§‡§®‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["55-60%", "40-45%", "More than 90%", "80%"], c: 2 },
        { q: "Protein percentage in blood plasma is?", h: "‡§∞‡§ï‡•ç‡§§ ‡§™‡•ç‡§≤‡§æ‡§ú‡•ç‡§Æ‡§æ ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡•ã‡§ü‡•Ä‡§® ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§ ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡§ø‡§§‡§®‡•Ä ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", a: ["5%", "7%", "9%", "11%"], c: 1 },
        { q: "Which of these proteins are found in blood plasma?", h: "‡§∞‡§ï‡•ç‡§§ ‡§™‡•ç‡§≤‡§æ‡§ú‡•ç‡§Æ‡§æ ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§™‡•ç‡§∞‡•ã‡§ü‡•Ä‡§® ‡§™‡§æ‡§Ø‡•á ‡§ú‡§æ‡§§‡•á ‡§π‡•à?", a: ["Albumin", "Globulin", "Fibrinogen", "All of these"], c: 3 },
        { q: "What is the remaining part of plasma called if clotting factors are removed?", h: "‡§∞‡•Ç‡§ß‡§ø‡§∞ ‡§ï‡•ã ‡§•‡§ï‡•ç‡§ï‡§æ ‡§¨‡§®‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§ï‡§æ‡§∞‡§ï‡•ã‡§Ç ‡§ï‡•ã ‡§Ø‡§¶‡§ø ‡§®‡§ø‡§ï‡§æ‡§≤ ‡§¶‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è ‡§§‡•ã ‡§™‡•ç‡§≤‡§æ‡§ú‡•ç‡§Æ‡§æ ‡§ï‡§æ ‡§∂‡•á‡§∑ ‡§¨‡§ö‡§æ ‡§≠‡§æ‡§ó ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§≤‡§æ‡§§‡§æ ‡§π‡•à?", a: ["Lymph", "Serum", "Creatine", "Mucus"], c: 1 },
        { q: "Consider: 1. Fibrinogen, Globulin, Albumin are major plasma proteins. 2. Fibrinogen helps in clotting. 3. Albumin helps in osmotic balance.", h: "1. ‡§´‡§æ‡§á‡§¨‡•ç‡§∞‡§ø‡§®‡•ã‡§ú‡•á‡§®, ‡§ó‡•ç‡§≤‡•ã‡§¨‡•ç‡§Ø‡•Å‡§Æ‡•Ä‡§® ‡§§‡§•‡§æ ‡§è‡§≤‡•ç‡§Ø‡•Å‡§Æ‡§ø‡§® ‡§∞‡§ï‡•ç‡§§ ‡§™‡•ç‡§≤‡§æ‡§ú‡•ç‡§Æ‡§æ ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§Ø‡•á ‡§ú‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§™‡•ç‡§∞‡•ã‡§ü‡•Ä‡§® ‡§π‡•à‡•§ 2. ‡§´‡§æ‡§á‡§¨‡•ç‡§∞‡§ø‡§®‡•ã‡§ú‡•á‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§∞‡§ï‡•ç‡§§ ‡§ï‡•ã ‡§•‡§ï‡•ç‡§ï‡§æ ‡§¨‡§®‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§ 3. ‡§è‡§≤‡•ç‡§Ø‡•Å‡§Æ‡§ø‡§® ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§™‡§∞‡§æ‡§∏‡§∞‡§£‡•Ä ‡§∏‡§Ç‡§§‡•Å‡§≤‡§® ‡§¨‡§®‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§", a: ["Only 1", "1 and 2", "1, 2 and 3", "Only 1 again"], c: 2 },
        { q: "Which protein plays a vital role in blood clotting?", h: "‡§∞‡§ï‡•ç‡§§ ‡§ï‡•ã ‡§•‡§ï‡•ç‡§ï‡§æ ‡§¨‡§®‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡•ã‡§ü‡•Ä‡§® ‡§ï‡•Ä ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", a: ["Globulin", "Albumin", "Fibrinogen", "Casein"], c: 2 },
        { q: "Blood corpuscles make up what percentage of human blood?", h: "‡§Æ‡§æ‡§®‡§µ ‡§∞‡§ï‡•ç‡§§ ‡§ï‡§æ ‡§≤‡§ó‡§≠‡§ó ‡§ï‡§ø‡§§‡§®‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§ ‡§≠‡§æ‡§ó ‡§∞‡•Ç‡§ß‡§ø‡§∞‡§æ‡§£‡•Å (Blood-Corpuscle) ‡§ï‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", a: ["55-60%", "40-45%", "More than 90%", "20-30%"], c: 1 },
        { q: "Which of the following is NOT correct?", h: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§è‡§ï ‡§∏‡§π‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?", a: ["RBCs are most numerous", "RBC lifespan is longest", "Iron protein hemoglobin is only in RBCs", "RBC count decreases at high altitude"], c: 3 },
        { q: "Which is a nucleus-less blood cell?", h: "‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ï ‡§µ‡§ø‡§π‡•Ä‡§® ‡§∞‡•Ç‡§ß‡§ø‡§∞ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ ‡§π‡•à-", a: ["RBC", "WBC", "Platelets", "Both RBC and Platelets"], c: 3 },
        { q: "Lifespan of RBC is?", h: "‡§≤‡§æ‡§≤ ‡§∞‡§ï‡•ç‡§§ ‡§ï‡§£‡§ø‡§ï‡§æ‡§ì‡§Ç RBC ‡§ï‡§æ ‡§ú‡•Ä‡§µ‡§® ‡§ï‡§æ‡§≤ ‡§π‡•ã‡§§‡§æ ‡§π‡•à-", a: ["20 days", "120 days", "130 days", "240 days"], c: 1 }
    ];

    // --- APP STATE ---
    let currentQuestions = [];
    let score = 0;
    let currentIdx = 0;
    let timerId = null;
    let timeLeft = 0;
    let isTransitioning = false;

    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    // --- SYNTHESIZED SOUNDS ---
    function playSound(freq, type, duration) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = type;
        osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
        gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();
        osc.stop(audioCtx.currentTime + duration);
    }

    // --- CORE LOGIC ---
    function initQuiz() {
        const shuffle = document.getElementById('shuffle-toggle').checked;
        currentQuestions = shuffle ? [...quizData].sort(() => Math.random() - 0.5) : [...quizData];
        
        score = 0;
        currentIdx = 0;
        
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('quiz-screen').style.display = 'block';
        
        loadQuestion();
    }

    function loadQuestion() {
        isTransitioning = false;
        const q = currentQuestions[currentIdx];
        
        // Update UI
        document.getElementById('q-counter').innerText = `Question ${currentIdx + 1}/${currentQuestions.length}`;
        document.getElementById('score-display').innerText = `Score: ${score}`;
        document.getElementById('eng-q').innerText = q.q;
        document.getElementById('hin-q').innerText = q.h;
        
        const optionsBox = document.getElementById('options-container');
        optionsBox.innerHTML = '';
        
        q.a.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => handleAnswer(i, btn);
            optionsBox.appendChild(btn);
        });

        updateProgressBar();
        resetTimer();
    }

    function resetTimer() {
        clearInterval(timerId);
        const inputVal = parseInt(document.getElementById('timer-input').value);
        if (inputVal <= 0) {
            document.getElementById('timer-display').innerText = '‚è± Off';
            return;
        }

        timeLeft = inputVal;
        const display = document.getElementById('timer-display');
        display.classList.remove('pulse-red');
        display.innerText = `‚è± ${timeLeft}s`;

        timerId = setInterval(() => {
            timeLeft--;
            display.innerText = `‚è± ${timeLeft}s`;
            if (timeLeft <= 5) display.classList.add('pulse-red');
            if (timeLeft <= 0) {
                clearInterval(timerId);
                autoTimeout();
            }
        }, 1000);
    }

    function handleAnswer(selectedIdx, btn) {
        if (isTransitioning) return;
        isTransitioning = true;
        clearInterval(timerId);

        const q = currentQuestions[currentIdx];
        const buttons = document.querySelectorAll('.option-btn');
        buttons.forEach(b => b.disabled = true);

        if (selectedIdx === q.c) {
            score++;
            btn.classList.add('correct');
            playSound(800, 'sine', 0.2);
            triggerConfetti();
        } else {
            btn.classList.add('wrong');
            buttons[q.c].classList.add('correct');
            playSound(200, 'sawtooth', 0.3);
            showSadEmoji();
        }

        setTimeout(nextStep, 1500);
    }

    function autoTimeout() {
        if (isTransitioning) return;
        isTransitioning = true;
        const q = currentQuestions[currentIdx];
        const buttons = document.querySelectorAll('.option-btn');
        buttons.forEach(b => {
            b.disabled = true;
            if (parseInt(Array.from(buttons).indexOf(b)) === q.c) b.classList.add('correct');
        });
        playSound(200, 'sawtooth', 0.3);
        showSadEmoji();
        setTimeout(nextStep, 1500);
    }

    function nextStep() {
        currentIdx++;
        if (currentIdx < currentQuestions.length) {
            loadQuestion();
        } else {
            showResults();
        }
    }

    function updateProgressBar() {
        const pct = (currentIdx / currentQuestions.length) * 100;
        document.getElementById('progress').style.width = pct + '%';
    }

    function showResults() {
        clearInterval(timerId);
        document.getElementById('quiz-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('progress').style.width = '100%';
        
        const finalScore = document.getElementById('final-score');
        finalScore.innerText = `${score} / ${currentQuestions.length}`;
        
        const pct = (score / currentQuestions.length) * 100;
        const status = document.getElementById('result-status');
        const msg = document.getElementById('result-msg');

        if (pct >= 80) {
            status.innerText = "üèÜ Outstanding!";
            msg.innerText = "Excellent performance! You have a great grasp of the subject.";
            triggerConfetti();
        } else if (pct >= 50) {
            status.innerText = "üëè Well Done!";
            msg.innerText = "Good job! Keep it up and you'll reach the top.";
        } else {
            status.innerText = "üìö Keep Practicing";
            msg.innerText = "Practice makes perfect! Try again to improve your score.";
        }
    }

    // --- EFFECTS ---
    function showSadEmoji() {
        const emoji = document.getElementById('sad-emoji');
        emoji.style.display = 'block';
        setTimeout(() => emoji.style.display = 'none', 1000);
    }

    function triggerConfetti() {
        const canvas = document.getElementById('confetti');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const pieces = [];
        for (let i = 0; i < 50; i++) {
            pieces.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                s: Math.random() * 6 + 4,
                c: `hsl(${Math.random() * 360}, 100%, 50%)`
            });
        }

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            pieces.forEach(p => {
                p.y += p.s;
                ctx.fillStyle = p.color || p.c;
                ctx.fillRect(p.x, p.y, 10, 10);
            });
            if (pieces[0].y < canvas.height) requestAnimationFrame(update);
        }
        update();
    }
</script>

</body>
</html>