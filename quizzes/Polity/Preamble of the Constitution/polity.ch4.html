<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Constitution Preamble Quiz (Bilingual)</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-main: #ffffff;
            --text-secondary: #dddddd;
            --accent-green: #00e676;
            --accent-red: #ff5252;
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-main);
            overflow-x: hidden;
            padding: 10px;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Glassmorphism Container */
        .container {
            width: 100%;
            max-width: 600px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 25px;
            border: 1px solid var(--glass-border);
            padding: 25px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            position: relative;
            overflow: hidden;
            min-height: 600px;
            display: flex;
            flex-direction: column;
        }

        /* Screens */
        .screen {
            display: none;
            flex-direction: column;
            height: 100%;
            flex: 1;
        }

        .screen.active {
            display: flex;
        }

        /* Start Screen */
        .start-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            gap: 20px;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .input-group {
            width: 100%;
            text-align: left;
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 15px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        input[type="number"] {
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            border: none;
            background: rgba(255,255,255,0.2);
            color: white;
            font-family: inherit;
            outline: none;
        }

        /* Toggle Switch */
        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }

        .switch input { opacity: 0; width: 0; height: 0; }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(255,255,255,0.3);
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider { background-color: var(--accent-green); }
        input:checked + .slider:before { transform: translateX(24px); }

        .btn-primary {
            background: white;
            color: #333;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 20px;
            width: 100%;
        }

        .btn-primary:hover { transform: scale(1.05); }

        /* Quiz Interface */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        .progress-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 5px;
            background: var(--accent-green);
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px var(--accent-green);
        }

        .timer-badge {
            background: rgba(0,0,0,0.3);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .pulse-red {
            color: var(--accent-red);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .question-box {
            background: rgba(0,0,0,0.15);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 4px solid var(--text-main);
        }

        .q-en {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .q-hi {
            font-size: 0.95rem;
            color: var(--text-secondary);
            font-weight: 400;
        }

        .options-grid {
            display: grid;
            gap: 12px;
            overflow-y: auto;
            max-height: 350px;
            padding-right: 5px;
        }

        /* Custom Scrollbar */
        .options-grid::-webkit-scrollbar { width: 5px; }
        .options-grid::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 5px; }

        .option-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 12px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
        }

        .option-btn:hover { background: rgba(255,255,255,0.2); }

        .opt-en { font-weight: 600; font-size: 1rem; margin-bottom: 2px; }
        .opt-hi { font-size: 0.85rem; color: #ddd; }

        .correct { background: rgba(0, 230, 118, 0.4) !important; border-color: var(--accent-green) !important; }
        .wrong { background: rgba(255, 82, 82, 0.4) !important; border-color: var(--accent-red) !important; }

        /* Feedback Overlays */
        #sad-overlay {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            display: none;
            z-index: 100;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translate(-50%, -50%); }
            25% { transform: translate(-55%, -50%); }
            75% { transform: translate(-45%, -50%); }
        }

        /* Result Screen */
        .result-card {
            text-align: center;
            padding: 20px;
        }
        .score-big { font-size: 3rem; font-weight: bold; margin: 20px 0; }
        .msg { font-size: 1.2rem; margin-bottom: 30px; color: var(--text-secondary); }

        /* Early Exit Button */
        .early-exit-btn {
            margin-top: auto;
            background: rgba(255, 82, 82, 0.2);
            border: 1px solid var(--accent-red);
            color: white;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        .early-exit-btn:hover { background: rgba(255, 82, 82, 0.4); }

        /* Confetti Canvas */
        #confetti {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

    </style>
</head>
<body>

    <canvas id="confetti"></canvas>

    <div class="container">
        <div id="progress" class="progress-bar"></div>

        <div id="start-screen" class="screen active">
            <div class="start-content">
                <div style="font-size: 3rem;">üèõÔ∏è</div>
                <h1>Constitution Quiz<br><span style="font-size: 1.2rem; color: #ddd;">‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞‡•Ä</span></h1>
                
                <div class="input-group">
                    <label>‚è±Ô∏è Timer per question (seconds) / ‡§∏‡§Æ‡§Ø (0 = Off)</label>
                    <input type="number" id="timeInput" placeholder="e.g. 30" value="30">
                </div>

                <div class="input-group toggle-container">
                    <label>üîÄ Shuffle Questions / ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§Æ‡§ø‡§≤‡§æ‡§è‡§Ç</label>
                    <label class="switch">
                        <input type="checkbox" id="shuffleToggle">
                        <span class="slider"></span>
                    </label>
                </div>

                <button class="btn-primary" onclick="startQuiz()">Start Quiz / ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
            </div>
        </div>

        <div id="quiz-screen" class="screen">
            <div class="quiz-header">
                <span id="q-counter">Q: 01/20</span>
                <div class="timer-badge" id="timer-box">
                    <span>‚è≥</span> <span id="timer-text">--</span>
                </div>
                <span id="score-display">Score: 0</span>
            </div>

            <div class="question-box">
                <div class="q-en" id="q-en"></div>
                <div class="q-hi" id="q-hi"></div>
            </div>

            <div class="options-grid" id="options-container">
                </div>

            <div id="sad-overlay">üò¢</div>

            <button class="early-exit-btn" onclick="finishEarly()">End Quiz & Show Result / ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</button>
        </div>

        <div id="result-screen" class="screen">
            <div class="start-content result-card">
                <div id="result-emoji" style="font-size: 4rem;">üèÜ</div>
                <h2>Quiz Completed!</h2>
                <div class="score-big" id="final-score">0 / 0</div>
                <p class="msg" id="result-msg">Performance Message</p>
                <button class="btn-primary" onclick="resetQuiz()">Restart Quiz / ‡§™‡•Å‡§®: ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç</button>
            </div>
        </div>
    </div>

<script>
    // --- Data: Questions extracted from images and translated ---
    const rawQuestions = [
        {
            en: "In which country's constitution was the Preamble first included?",
            hi: "‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§ï‡•ã ‡§∏‡§∞‡•ç‡§µ‡§™‡•ç‡§∞‡§•‡§Æ ‡§ï‡§ø‡§∏ ‡§¶‡•á‡§∂ ‡§ï‡•Ä ‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡•ç‡§Æ‡§ø‡§≤‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ?",
            options: [
                { en: "America", hi: "‡§Ö‡§Æ‡•á‡§∞‡§ø‡§ï‡§æ" },
                { en: "Britain", hi: "‡§¨‡•ç‡§∞‡§ø‡§ü‡•á‡§®" },
                { en: "India", hi: "‡§≠‡§æ‡§∞‡§§" },
                { en: "Ireland", hi: "‡§Ü‡§Ø‡§∞‡§≤‡•à‡§Ç‡§°" }
            ],
            correct: 0 // (a)
        },
        {
            en: "Who among the following called the Preamble the 'Identity Card of the Constitution'?",
            hi: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡§ø‡§∏‡§®‡•á ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§ï‡•ã '‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§ï‡§æ ‡§™‡§∞‡§ø‡§ö‡§Ø ‡§™‡§§‡•ç‡§∞' ‡§ï‡§π‡§æ ‡§π‡•à?",
            options: [
                { en: "K.M. Munshi", hi: "‡§ï‡•á. ‡§è‡§Æ. ‡§Æ‡•Å‡§Ç‡§∂‡•Ä" },
                { en: "Granville Austin", hi: "‡§ó‡•ç‡§∞‡•á‡§®‡§µ‡§ø‡§≤‡•á ‡§ë‡§∏‡•ç‡§ü‡§ø‡§®" },
                { en: "Justin P.N. Bhagwati", hi: "‡§ú‡§∏‡•ç‡§ü‡§ø‡§® ‡§™‡•Ä.‡§è‡§®. ‡§≠‡§ó‡§µ‡§§‡•Ä" },
                { en: "N.A. Palkhivala", hi: "‡§è‡§®. ‡§è. ‡§™‡§æ‡§≤‡§ï‡•Ä‡§µ‡§æ‡§≤‡§æ" }
            ],
            correct: 3 // (d)
        },
        {
            en: "The Preamble of the Indian Constitution was drafted and presented to the Constituent Assembly by whom?",
            hi: "‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡§ø‡§∏‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¨‡§®‡§æ‡§è ‡§ó‡§è ‡§è‡§µ‡§Ç ‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§∏‡§≠‡§æ ‡§Æ‡•á‡§Ç ‡§™‡•á‡§∂ ‡§ï‡§ø‡§Ø‡•á ‡§ó‡§Ø‡•á?",
            options: [
                { en: "Dr. B.R. Ambedkar", hi: "‡§°‡•â. ‡§¨‡•Ä. ‡§Ü‡§∞. ‡§Ö‡§Æ‡•ç‡§¨‡•á‡§°‡§ï‡§∞" },
                { en: "Mahatma Gandhi", hi: "‡§Æ‡§π‡§æ‡§§‡•ç‡§Æ‡§æ ‡§ó‡§æ‡§Å‡§ß‡•Ä" },
                { en: "Pandit Nehru", hi: "‡§™‡§Ç‡§°‡§ø‡§§ ‡§®‡•á‡§π‡§∞‡•Å" },
                { en: "Maulana Abul Kalam Azad", hi: "‡§Æ‡•å‡§≤‡§æ‡§®‡§æ ‡§Ö‡§¨‡•Å‡§≤ ‡§ï‡§≤‡§æ‡§Æ ‡§Ü‡§ú‡§æ‡§¶" }
            ],
            correct: 2 // (c)
        },
        {
            en: "The Preamble of the Indian Constitution was amended by which Constitutional Amendment?",
            hi: "‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§ï‡•á ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§ï‡•ã ‡§ï‡§ø‡§∏ ‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§∏‡§Ç‡§∂‡•ã‡§ß‡§® ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∏‡§Ç‡§∂‡•ã‡§ß‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ?",
            options: [
                { en: "44th", hi: "44‡§µ‡•á‡§Ç" },
                { en: "42nd", hi: "42‡§µ‡•á‡§Ç" },
                { en: "24th", hi: "24‡§µ‡•á‡§Ç" },
                { en: "61st", hi: "61‡§µ‡•á‡§Ç" }
            ],
            correct: 1 // (b)
        },
        {
            en: "Which word was NOT added by the 42nd Constitutional Amendment in the Preamble?",
            hi: "‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§Æ‡•á‡§Ç 42‡§µ‡•á‡§Ç ‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§∏‡§Ç‡§∂‡•ã‡§ß‡§® ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ï‡•å‡§®-‡§∏‡§æ ‡§∂‡§¨‡•ç‡§¶ ‡§®‡§π‡•Ä‡§Ç ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ?",
            options: [
                { en: "Socialist", hi: "‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶‡•Ä" },
                { en: "Fraternity", hi: "‡§¨‡§Ç‡§ß‡•Å‡§§‡•ç‡§µ" },
                { en: "Integrity", hi: "‡§Ö‡§ñ‡§Ç‡§°‡§§‡§æ" },
                { en: "Secular", hi: "‡§™‡§Ç‡§•‡§®‡§ø‡§∞‡§™‡•á‡§ï‡•ç‡§∑‡§§‡§æ" }
            ],
            correct: 1 // (b) - Fraternity was original
        },
        {
            en: "How many types of Justice are discussed in the Preamble?",
            hi: "‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§§‡§®‡•á ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§®‡•ç‡§Ø‡§æ‡§Ø ‡§ï‡•Ä ‡§ö‡§∞‡•ç‡§ö‡§æ ‡§ï‡•Ä ‡§ó‡§à ‡§π‡•à?",
            options: [
                { en: "Four", hi: "‡§ö‡§æ‡§∞" },
                { en: "Five", hi: "‡§™‡§æ‡§Å‡§ö" },
                { en: "Three", hi: "‡§§‡•Ä‡§®" },
                { en: "Seven", hi: "‡§∏‡§æ‡§§" }
            ],
            correct: 2 // (c) - Social, Economic, Political
        },
        {
            en: "How many types of Liberty are mentioned in the Preamble?",
            hi: "‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§§‡§®‡•á ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§∏‡•ç‡§µ‡§§‡§Ç‡§§‡•ç‡§∞‡§§‡§æ ‡§ï‡§æ ‡§â‡§≤‡•ç‡§≤‡•á‡§ñ ‡§π‡•à?",
            options: [
                { en: "Five", hi: "‡§™‡§æ‡§Å‡§ö" },
                { en: "Four", hi: "‡§ö‡§æ‡§∞" },
                { en: "Three", hi: "‡§§‡•Ä‡§®" },
                { en: "Seven", hi: "‡§∏‡§æ‡§§" }
            ],
            correct: 0 // (a) - Thought, Expression, Belief, Faith, Worship
        },
        {
            en: "How many types of Equality are mentioned in the Preamble?",
            hi: "‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§§‡§®‡•á ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§∏‡§Æ‡§æ‡§®‡§§‡§æ ‡§ï‡§æ ‡§â‡§≤‡•ç‡§≤‡•á‡§ñ ‡§π‡•à?",
            options: [
                { en: "Two", hi: "‡§¶‡•ã" },
                { en: "Three", hi: "‡§§‡•Ä‡§®" },
                { en: "Four", hi: "‡§ö‡§æ‡§∞" },
                { en: "Seven", hi: "‡§∏‡§æ‡§§" }
            ],
            correct: 0 // (a) - Status and Opportunity
        },
        {
            en: "Which type of liberty is NOT mentioned in the Preamble?",
            hi: "‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§∏‡•ç‡§µ‡§§‡§Ç‡§§‡•ç‡§∞‡§§‡§æ ‡§ï‡§æ ‡§â‡§≤‡•ç‡§≤‡•á‡§ñ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡•Ä ‡§ó‡§à ‡§π‡•à?",
            options: [
                { en: "Thought", hi: "‡§µ‡§ø‡§ö‡§æ‡§∞" },
                { en: "Expression", hi: "‡§Ö‡§≠‡§ø‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø" },
                { en: "Belief", hi: "‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏" },
                { en: "Equality", hi: "‡§∏‡§Æ‡§§‡§æ" }
            ],
            correct: 3 // (d) - Equality is separate, not a liberty here
        },
        {
            en: "What is the correct order of words given in the Preamble?",
            hi: "‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§¶‡§ø‡§Ø‡•á ‡§ó‡§Ø‡•á ‡§∂‡§¨‡•ç‡§¶‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§ï‡•ç‡§∞‡§Æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
            options: [
                { en: "Sov, Sec, Soc, Dem, Rep", hi: "‡§∏‡§Ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡•ç‡§∞‡§≠‡•Å‡§§‡•ç‡§µ ‡§∏‡§Ç‡§™‡§®‡•ç‡§®, ‡§ß‡§∞‡•ç‡§Æ‡§®‡§ø‡§∞‡§™‡•á‡§ï‡•ç‡§∑, ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶‡•Ä, ‡§≤‡•ã‡§ï‡§§‡§æ‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï ‡§ó‡§£‡§∞‡§æ‡§ú‡•ç‡§Ø" },
                { en: "Dem, Soc, Sec, Sov", hi: "‡§≤‡•ã‡§ï‡§§‡§æ‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï ‡§ó‡§£‡§∞‡§æ‡§ú‡•ç‡§Ø, ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶‡•Ä, ‡§ß‡§∞‡•ç‡§Æ‡§®‡§ø‡§∞‡§™‡•á‡§ï‡•ç‡§∑, ‡§π‡§Æ ‡§≠‡§æ‡§∞‡§§ ‡§ï‡•á ‡§≤‡•ã‡§ó" },
                { en: "Sov, Soc, Sov(sic)", hi: "‡§∏‡§Ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡•ç‡§∞‡§≠‡•Å‡§§‡•ç‡§µ ‡§∏‡§Ç‡§™‡§®‡•ç‡§®, ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶‡•Ä, ‡§∏‡§Ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡•ç‡§∞‡§≠‡•Å‡§§‡•ç‡§µ ‡§∏‡§Ç‡§™‡§®‡•ç‡§®" },
                { en: "Sov, Soc, Sec, Dem, Rep", hi: "‡§∏‡§Ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡•ç‡§∞‡§≠‡•Å‡§§‡•ç‡§µ ‡§∏‡§Ç‡§™‡§®‡•ç‡§®, ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶‡•Ä, ‡§™‡§Ç‡§•‡§®‡§ø‡§∞‡§™‡•á‡§ï‡•ç‡§∑, ‡§≤‡•ã‡§ï‡§§‡§æ‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï ‡§ó‡§£‡§∞‡§æ‡§ú‡•ç‡§Ø" }
            ],
            correct: 3 // (d)
        },
        {
            en: "Which justice is NOT mentioned in the Preamble?",
            hi: "‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§®‡•ç‡§Ø‡§æ‡§Ø ‡§ï‡•Ä ‡§¨‡§æ‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§π‡•Ä ‡§ó‡§à ‡§π‡•à?",
            options: [
                { en: "Social Justice", hi: "‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§®‡•ç‡§Ø‡§æ‡§Ø" },
                { en: "Economic Justice", hi: "‡§Ü‡§∞‡•ç‡§•‡§ø‡§ï ‡§®‡•ç‡§Ø‡§æ‡§Ø" },
                { en: "Political Justice", hi: "‡§∞‡§æ‡§ú‡§®‡•Ä‡§§‡§ø ‡§®‡•ç‡§Ø‡§æ‡§Ø" },
                { en: "Environmental Justice", hi: "‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£‡•Ä‡§Ø ‡§®‡•ç‡§Ø‡§æ‡§Ø" }
            ],
            correct: 3 // (d)
        },
        {
            en: "What is the meaning of the word 'Sovereign' mentioned in the Preamble?",
            hi: "‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§â‡§≤‡•ç‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§∏‡§Ç‡§™‡•ç‡§∞‡§≠‡•Å‡§§‡§æ ‡§∂‡§¨‡•ç‡§¶ ‡§ï‡§æ ‡§Ü‡§∂‡§Ø ‡§π‡•à-",
            options: [
                { en: "India is not dependent on any other country.", hi: "‡§≠‡§æ‡§∞‡§§ ‡§® ‡§§‡•ã ‡§ï‡§ø‡§∏‡•Ä ‡§Ö‡§®‡•ç‡§Ø ‡§¶‡•á‡§∂ ‡§™‡§∞ ‡§®‡§ø‡§∞‡•ç‡§≠‡§∞ ‡§π‡•à..." },
                { en: "No power above India, free to conduct affairs.", hi: "‡§≠‡§æ‡§∞‡§§ ‡§ï‡•á ‡§ä‡§™‡§∞ ‡§î‡§∞ ‡§ï‡•ã‡§à ‡§∂‡§ï‡•ç‡§§‡§ø ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à..." },
                { en: "India can acquire foreign territory.", hi: "‡§≠‡§æ‡§∞‡§§ ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§µ‡§ø‡§¶‡•á‡§∂‡•Ä ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§ï‡§æ ‡§∏‡•Ä‡§Æ‡§æ ‡§Ö‡§ß‡§ø‡§ó‡•ç‡§∞‡§π‡§£ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§" },
                { en: "All of the above", hi: "‡§â‡§™‡§∞‡•ç‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡§≠‡•Ä‡•§" }
            ],
            correct: 3 // (d)
        },
        {
            en: "The word 'Socialist' was added to the Preamble by which amendment?",
            hi: "‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶‡•Ä ‡§∂‡§¨‡•ç‡§¶ ‡§ï‡•ã ‡§ï‡§ø‡§∏ ‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§∏‡§Ç‡§∂‡•ã‡§ß‡§® ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ?",
            options: [
                { en: "44th", hi: "44‡§µ‡•á‡§Ç" },
                { en: "42nd", hi: "42‡§µ‡•á‡§Ç" },
                { en: "24th", hi: "24‡§µ‡•á‡§Ç" },
                { en: "52nd", hi: "52‡§µ‡•á‡§Ç" }
            ],
            correct: 1 // (b)
        },
        {
            en: "What type of Socialism is in India?",
            hi: "‡§≠‡§æ‡§∞‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶ ‡§π‡•à?",
            options: [
                { en: "Democratic Socialism", hi: "‡§≤‡•ã‡§ï‡§§‡§æ‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶" },
                { en: "State Socialism", hi: "‡§∞‡§æ‡§ú‡•ç‡§Ø‡§æ‡§∂‡•ç‡§∞‡§ø‡§§ ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶" },
                { en: "European Socialism", hi: "‡§Ø‡•Ç‡§∞‡•ã‡§™‡§ø‡§Ø‡§® ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶" },
                { en: "All of these", hi: "‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§∏‡§≠‡•Ä‡•§" }
            ],
            correct: 0 // (a)
        },
        {
            en: "Which socialism believes in mixed economy?",
            hi: "‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶ ‡§ï‡§æ ‡§µ‡§π ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™ ‡§ú‡•ã ‡§Æ‡§ø‡§∂‡•ç‡§∞‡§ø‡§§ ‡§Ö‡§∞‡•ç‡§•‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ ‡§Æ‡•á‡§Ç ‡§Ü‡§∏‡•ç‡§•‡§æ ‡§∞‡§ñ‡§§‡§æ ‡§π‡•à, ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§≤‡§æ‡§§‡§æ ‡§π‡•à?",
            options: [
                { en: "European Socialism", hi: "‡§Ø‡•Ç‡§∞‡•ã‡§™‡§ø‡§Ø‡§® ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶" },
                { en: "Democratic Socialism", hi: "‡§≤‡•ã‡§ï‡§§‡§æ‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶" },
                { en: "State Socialism", hi: "‡§∞‡§æ‡§ú‡•ç‡§Ø‡§æ‡§∂‡•ç‡§∞‡§ø‡§§ ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶" },
                { en: "All of these", hi: "‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§∏‡§≠‡•Ä‡•§" }
            ],
            correct: 1 // (b)
        },
        {
            en: "The word 'Integrity' was added to the Indian Constitution in which year?",
            hi: "‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§Ö‡§ñ‡§Ç‡§°‡§§‡§æ ‡§∂‡§¨‡•ç‡§¶ ‡§ï‡§¨ ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ?",
            options: [
                { en: "1976", hi: "1976" },
                { en: "1978", hi: "1978" },
                { en: "1975", hi: "1975" },
                { en: "1989", hi: "1989" }
            ],
            correct: 0 // (a)
        },
        {
            en: "Indian Socialism is a blend of which two socialisms?",
            hi: "‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶ ‡§ï‡§ø‡§® ‡§¶‡•ã ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶ ‡§ï‡§æ ‡§Æ‡§ø‡§∂‡•ç‡§∞‡§£ ‡§π‡•à?",
            options: [
                { en: "Gandhian & Fabian", hi: "‡§ó‡§æ‡§Å‡§ß‡•Ä‡§µ‡§æ‡§¶‡•Ä ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶ & ‡§´‡•á‡§¨‡§ø‡§Ø‡§® ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶" },
                { en: "French & Marxist", hi: "‡§´‡•ç‡§∞‡•á‡§Ç‡§ö‡§ø‡§Ø‡§® ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶ & ‡§Æ‡§æ‡§∞‡•ç‡§ï‡•ç‡§∏‡§µ‡§æ‡§¶‡•Ä ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶" },
                { en: "Marxist & Gandhian", hi: "‡§Æ‡§æ‡§∞‡•ç‡§ï‡•ç‡§∏‡§µ‡§æ‡§¶‡•Ä ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶ & ‡§ó‡§æ‡§Å‡§ß‡•Ä‡§µ‡§æ‡§¶‡•Ä ‡§∏‡§Æ‡§æ‡§ú‡§µ‡§æ‡§¶" },
                { en: "A and C", hi: "a ‡§î‡§∞ c" }
            ],
            correct: 2 // (c) - Actually leans towards Gandhian, but mix of Marx & Gandhi
        },
        {
            en: "In which case did the Supreme Court say Preamble IS a part of the Constitution?",
            hi: "‡§â‡§ö‡•ç‡§ö‡§§‡§Æ ‡§®‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§≤‡§Ø ‡§®‡•á ‡§ï‡§ø‡§∏ ‡§µ‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§ï‡§π‡§æ ‡§π‡•à ‡§ï‡§ø ‡§™‡•ç‡§∞‡§∏‡•ç‡§§‡§æ‡§µ‡§®‡§æ ‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§ï‡§æ ‡§≠‡§æ‡§ó ‡§π‡•à?",
            options: [
                { en: "Kesavananda Bharati (1973)", hi: "‡§ï‡•á‡§∂‡§µ‡§æ‡§®‡§Ç‡§¶ ‡§≠‡§æ‡§∞‡§§‡•Ä ‡§Æ‡§æ‡§Æ‡§≤‡•á (1973)" },
                { en: "Berubari Union (1960)", hi: "‡§¨‡•á‡§∞‡•Å‡§¨‡§æ‡§°‡§º‡•Ä ‡§∏‡§Ç‡§ò (1960)" },
                { en: "Shankari Prasad (1951)", hi: "‡§∂‡§Ç‡§ï‡§∞‡•Ä ‡§™‡•ç‡§∞‡§∏‡§æ‡§¶ ‡§µ‡§æ‡§¶ (1951)" },
                { en: "UC of India (1995)", hi: "UC ‡§ë‡§´ ‡§á‡§Ç‡§°‡§ø‡§Ø‡§æ ‡§µ‡§æ‡§¶ (1995)" }
            ],
            correct: 0 // (a)
        }
    ];

    // --- State Variables ---
    let questions = [];
    let currentQIndex = 0;
    let score = 0;
    let timer = null;
    let timeLeft = 0;
    let timeLimit = 30; // Default
    let audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    // --- Elements ---
    const startScreen = document.getElementById('start-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultScreen = document.getElementById('result-screen');
    const qCounter = document.getElementById('q-counter');
    const scoreDisplay = document.getElementById('score-display');
    const progressBar = document.getElementById('progress');
    const timerText = document.getElementById('timer-text');
    const timerBox = document.getElementById('timer-box');
    const qEn = document.getElementById('q-en');
    const qHi = document.getElementById('q-hi');
    const optsContainer = document.getElementById('options-container');
    const sadOverlay = document.getElementById('sad-overlay');

    // --- Audio System (Web Audio API) ---
    function playSound(type) {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain);
        gain.connect(audioCtx.destination);

        if (type === 'ting') {
            osc.type = 'sine';
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1200, audioCtx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        } else if (type === 'buzz') {
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.3);
            gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gain.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.3);
        }
    }

    // --- Core Logic ---

    function startQuiz() {
        // Get settings
        const userTime = document.getElementById('timeInput').value;
        const shuffle = document.getElementById('shuffleToggle').checked;

        timeLimit = userTime && userTime > 0 ? parseInt(userTime) : 0;
        
        // Prepare questions
        questions = [...rawQuestions];
        if (shuffle) {
            questions.sort(() => Math.random() - 0.5);
        }

        // Reset state
        currentQIndex = 0;
        score = 0;
        scoreDisplay.innerText = `Score: 0`;

        // Switch Screens
        startScreen.classList.remove('active');
        quizScreen.classList.add('active');
        
        loadQuestion();
    }

    function loadQuestion() {
        // Check end
        if (currentQIndex >= questions.length) {
            showResult();
            return;
        }

        // Reset UI
        clearInterval(timer);
        timerBox.classList.remove('pulse-red');
        sadOverlay.style.display = 'none';
        
        const qData = questions[currentQIndex];

        // Update Text
        qEn.innerText = `${currentQIndex + 1}. ${qData.en}`;
        qHi.innerText = qData.hi;
        qCounter.innerText = `Q: ${currentQIndex + 1}/${questions.length}`;
        
        // Update Progress
        const percent = ((currentQIndex) / questions.length) * 100;
        progressBar.style.width = `${percent}%`;

        // Render Options
        optsContainer.innerHTML = '';
        qData.options.forEach((opt, idx) => {
            const btn = document.createElement('div');
            btn.className = 'option-btn';
            btn.onclick = () => checkAnswer(btn, idx);
            btn.innerHTML = `
                <div class="opt-en">${String.fromCharCode(97 + idx)}) ${opt.en}</div>
                <div class="opt-hi">${opt.hi}</div>
            `;
            optsContainer.appendChild(btn);
        });

        // Start Timer if enabled
        if (timeLimit > 0) {
            timeLeft = timeLimit;
            timerText.innerText = timeLeft;
            timerBox.style.display = 'flex';
            
            timer = setInterval(() => {
                timeLeft--;
                timerText.innerText = timeLeft;
                if (timeLeft < 5) timerBox.classList.add('pulse-red');
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    // Time's up - treat as wrong or skip? Let's show correct and move on.
                    handleTimeUp();
                }
            }, 1000);
        } else {
            timerBox.style.display = 'none';
        }
    }

    function checkAnswer(selectedBtn, selectedIdx) {
        clearInterval(timer);
        
        // Disable all clicks
        const allOpts = document.querySelectorAll('.option-btn');
        allOpts.forEach(btn => btn.onclick = null);

        const correctIdx = questions[currentQIndex].correct;

        if (selectedIdx === correctIdx) {
            // Correct
            selectedBtn.classList.add('correct');
            playSound('ting');
            fireConfetti();
            score++;
            scoreDisplay.innerText = `Score: ${score}`;
        } else {
            // Wrong
            selectedBtn.classList.add('wrong');
            allOpts[correctIdx].classList.add('correct'); // Show correct
            playSound('buzz');
            sadOverlay.style.display = 'block';
        }

        setTimeout(() => {
            currentQIndex++;
            loadQuestion();
        }, 1500);
    }

    function handleTimeUp() {
        const allOpts = document.querySelectorAll('.option-btn');
        allOpts.forEach(btn => btn.onclick = null);
        
        // Just show correct answer
        const correctIdx = questions[currentQIndex].correct;
        allOpts[correctIdx].classList.add('correct');
        playSound('buzz');

        setTimeout(() => {
            currentQIndex++;
            loadQuestion();
        }, 1500);
    }

    function finishEarly() {
        clearInterval(timer);
        showResult();
    }

    function showResult() {
        quizScreen.classList.remove('active');
        resultScreen.classList.add('active');
        progressBar.style.width = '100%';

        const finalScoreElem = document.getElementById('final-score');
        const msgElem = document.getElementById('result-msg');
        const emojiElem = document.getElementById('result-emoji');

        const percentage = (score / (currentQIndex || 1)) * 100; // Calculate based on questions seen

        finalScoreElem.innerText = `${score} / ${questions.length}`;

        if (percentage >= 80) {
            emojiElem.innerText = "üèÜ";
            msgElem.innerText = "Outstanding Performance! / ‡§¨‡•á‡§π‡§§‡§∞‡•Ä‡§® ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®!";
            fireConfetti();
        } else if (percentage >= 50) {
            emojiElem.innerText = "üëè";
            msgElem.innerText = "Well Done! Keep it up. / ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ö‡•ç‡§õ‡•á! ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç‡•§";
        } else {
            emojiElem.innerText = "üìö";
            msgElem.innerText = "Practice makes perfect! Try again. / ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à‡•§";
        }
    }

    function resetQuiz() {
        resultScreen.classList.remove('active');
        startScreen.classList.add('active');
        progressBar.style.width = '0%';
    }

    // --- Confetti Effect (Simple Implementation) ---
    function fireConfetti() {
        const canvas = document.getElementById('confetti');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particles = [];
        const colors = ['#ff5252', '#00e676', '#2979ff', '#ffeb3b', '#e040fb'];

        for(let i=0; i<100; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                color: colors[Math.floor(Math.random() * colors.length)],
                size: Math.random() * 8 + 4,
                speed: Math.random() * 5 + 2,
                angle: Math.random() * 6.2
            });
        }

        let animationFrame;

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            let active = false;
            particles.forEach(p => {
                p.y += p.speed;
                p.x += Math.sin(p.angle);
                p.angle += 0.1;
                
                if(p.y < canvas.height) {
                    ctx.fillStyle = p.color;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
                    ctx.fill();
                    active = true;
                }
            });

            if(active) animationFrame = requestAnimationFrame(update);
            else ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        update();
    }

    // Resize canvas fix
    window.addEventListener('resize', () => {
        const canvas = document.getElementById('confetti');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });

</script>
</body>
</html>