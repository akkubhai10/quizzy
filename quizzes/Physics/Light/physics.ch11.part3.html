<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics Master Quiz (Q101-150)</title>
    <style>
        /* --- FONTS & GLOBAL --- */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

        :root {
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --accent-green: #00e676;
            --accent-red: #ff1744;
            --accent-blue: #2979ff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            /* Vibrant Mesh Gradient */
            background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
            background: radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                        radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                        radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            background-color: #1a1a2e;
            background-size: 200% 200%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            color: var(--text-primary);
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- GLASSMORPHISM CARD --- */
        .app-container {
            width: 100%;
            max-width: 800px;
            min-height: 85vh;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 25px;
            position: relative;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            display: flex;
            flex-direction: column;
            margin: 10px;
            transition: height 0.3s ease;
        }

        /* --- UTILITY & ANIMATION --- */
        .hidden { display: none !important; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        @keyframes pulseRed { 0% { color: white; } 50% { color: #ff1744; text-shadow: 0 0 10px #ff1744; transform: scale(1.1); } 100% { color: white; } }

        .fade-in { animation: fadeIn 0.5s ease forwards; }
        .shake { animation: shake 0.4s ease; }
        .pulse-text { animation: pulseRed 0.8s infinite; font-weight: bold; }

        /* --- START SCREEN --- */
        .start-screen {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex-grow: 1;
            gap: 20px;
        }

        .title h1 { font-size: 2.5rem; font-weight: 700; text-shadow: 0 4px 15px rgba(0,0,0,0.3); margin-bottom: 5px; background: linear-gradient(to right, #fff, #a5b4fc); -webkit-background-clip: text; -webkit-text-fill-color: transparent;}
        .title p { font-size: 1rem; color: var(--text-secondary); letter-spacing: 1px; }

        .controls {
            background: rgba(0,0,0,0.2);
            padding: 25px;
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .input-group { margin-bottom: 20px; text-align: left; }
        .input-group label { display: block; font-size: 0.9rem; margin-bottom: 8px; color: #ccc; }
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
            outline: none;
            transition: 0.3s;
        }
        .input-group input:focus { background: rgba(255,255,255,0.2); border-color: rgba(255,255,255,0.3); }

        .btn-start {
            background: linear-gradient(135deg, #FF61D2 0%, #FE9090 100%);
            border: none;
            padding: 15px 50px;
            border-radius: 50px;
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(254, 144, 144, 0.4);
            margin-top: 10px;
        }
        .btn-start:hover { transform: scale(1.05); box-shadow: 0 6px 20px rgba(254, 144, 144, 0.6); }

        /* --- QUIZ UI --- */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--glass-border);
            margin-bottom: 20px;
            position: relative;
        }

        .progress-bar-container {
            position: absolute;
            top: -25px; left: -25px;
            width: calc(100% + 50px);
            height: 6px;
            background: rgba(255,255,255,0.05);
            border-radius: 25px 25px 0 0;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00c6ff, #0072ff);
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px rgba(0, 114, 255, 0.7);
        }

        .header-item { text-align: center; }
        .header-label { font-size: 0.8rem; color: #aaa; display: block; text-transform: uppercase; letter-spacing: 1px; }
        .header-value { font-size: 1.3rem; font-weight: 700; }

        .timer-circle {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: rgba(0,0,0,0.2);
            border: 2px solid rgba(255,255,255,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.2rem;
            transition: color 0.3s;
        }

        .question-box { margin-bottom: 30px; padding: 10px; }
        .q-en { font-size: 1.3rem; font-weight: 600; display: block; margin-bottom: 10px; line-height: 1.4; color: #fff; }
        .q-hi { font-size: 1.1rem; color: #ddd; display: block; font-weight: 400; line-height: 1.5; }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        @media (max-width: 650px) { .options-grid { grid-template-columns: 1fr; } }

        .option-btn {
            background: rgba(255,255,255,0.08);
            border: 1px solid var(--glass-border);
            padding: 18px;
            border-radius: 16px;
            color: white;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        .option-btn:hover { background: rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.4); transform: translateY(-2px); }
        .option-btn span { display: block; pointer-events: none; }
        .opt-en { font-weight: 600; font-size: 1rem; margin-bottom: 5px; color: #fff; }
        .opt-hi { font-size: 0.9rem; color: #bbb; }

        /* Feedback States */
        .correct { 
            background: rgba(0, 230, 118, 0.2) !important; 
            border-color: var(--accent-green) !important; 
            box-shadow: 0 0 15px rgba(0, 230, 118, 0.3);
        }
        .wrong { 
            background: rgba(255, 23, 68, 0.2) !important; 
            border-color: var(--accent-red) !important; 
            box-shadow: 0 0 15px rgba(255, 23, 68, 0.3);
        }

        /* Large Emoji Overlay */
        .feedback-overlay {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 6rem;
            z-index: 20;
            pointer-events: none;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5));
        }

        .btn-finish {
            margin-top: 30px;
            width: 100%;
            padding: 15px;
            background: rgba(255, 23, 68, 0.1);
            border: 1px solid rgba(255, 23, 68, 0.3);
            color: #ff8a80;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .btn-finish:hover { background: var(--accent-red); color: white; box-shadow: 0 5px 15px rgba(255, 23, 68, 0.4); }

        /* --- RESULT SCREEN --- */
        .result-screen { text-align: center; padding: 20px; display: flex; flex-direction: column; justify-content: center; height: 100%; }
        .score-circle {
            width: 150px; height: 150px;
            border-radius: 50%;
            border: 8px solid rgba(255,255,255,0.1);
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 800;
            background: rgba(0,0,0,0.2);
            color: var(--accent-green);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .message { font-size: 1.8rem; margin-bottom: 30px; font-weight: 600; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; }
        .stat-item { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); }
        
        /* --- CONFETTI CANVAS --- */
        #confetti {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;
        }
    </style>
</head>
<body>

    <canvas id="confetti"></canvas>

    <div class="app-container">
        
        <div id="start-screen" class="start-screen fade-in">
            <div class="title">
                <h1>Physics Master</h1>
                <p>Questions 101-150 (Bilingual)</p>
            </div>
            
            <div class="controls">
                <div class="input-group">
                    <label>Timer per Question (Seconds)</label>
                    <input type="number" id="timerInput" placeholder="e.g. 20 (Leave 0 for no timer)" min="5">
                </div>
                <div class="input-group">
                    <label>Shuffle Questions?</label>
                    <select id="shuffleInput">
                        <option value="yes">Yes (Randomize)</option>
                        <option value="no">No (Sequential)</option>
                    </select>
                </div>
                <button class="btn-start" onclick="startGame()">Start Quiz</button>
            </div>
        </div>

        <div id="quiz-screen" class="hidden">
            <div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div>
            
            <div class="quiz-header">
                <div class="header-item">
                    <span class="header-label">Question</span>
                    <div class="header-value" id="q-counter">101/150</div>
                </div>
                <div class="header-item">
                    <span class="header-label">Score</span>
                    <div class="header-value" style="color: var(--accent-green);" id="score-display">0</div>
                </div>
                <div id="timer-display" class="timer-circle hidden">--</div>
            </div>

            <div class="question-box">
                <span id="q-text-en" class="q-en">Loading...</span>
                <span id="q-text-hi" class="q-hi">Loading...</span>
            </div>

            <div id="options-container" class="options-grid">
                </div>

            <div id="feedback-emoji" class="feedback-overlay hidden"></div>

            <button class="btn-finish" onclick="finishGame()">Finish & Show Results</button>
        </div>

        <div id="result-screen" class="hidden result-screen fade-in">
            <h2 style="margin-bottom: 20px;">Quiz Summary</h2>
            <div class="score-circle" id="final-score">0%</div>
            <p id="final-message" class="message">Message</p>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <small style="color:#aaa; display:block; margin-bottom:5px;">Attempted</small>
                    <div id="stat-total" style="font-weight:bold; font-size:1.4rem;">0</div>
                </div>
                <div class="stat-item">
                    <small style="color:#aaa; display:block; margin-bottom:5px;">Correct</small>
                    <div id="stat-correct" style="font-weight:bold; font-size:1.4rem; color: var(--accent-green)">0</div>
                </div>
            </div>

            <button class="btn-start" onclick="location.reload()">Restart Quiz</button>
        </div>

    </div>

<script>
/* DATA SOURCE: 
   Transcribed Questions 101 - 150 from provided images.
*/
const rawQuestions = [
    {
        qEn: "The wave theory of light was proposed by:",
        qHi: "प्रकाश का तरंग सिद्धान्त किसके द्वारा प्रस्थापित किया गया था ?",
        opts: [
            { en: "Newton", hi: "न्यूटन के द्वारा" },
            { en: "Huygens", hi: "हाइगेन्स के द्वारा", correct: true },
            { en: "Planck", hi: "प्लांक के द्वारा" },
            { en: "Faraday", hi: "फैराडे के द्वारा" }
        ]
    },
    {
        qEn: "Which of the following phenomena helps to decide that light is a transverse wave?",
        qHi: "निम्नलिखित में से कौन-सी परिघटना यह निर्णय लेने में सहायक होती है कि प्रकाश एक अनुप्रस्थ तरंग है ?",
        opts: [
            { en: "Interference", hi: "व्यतिकरण" },
            { en: "Diffraction", hi: "विवर्तन" },
            { en: "Polarization", hi: "ध्रुवीकरण", correct: true },
            { en: "Refraction", hi: "अपवर्तन" }
        ]
    },
    {
        qEn: "Who discovered the electromagnetic nature of light?",
        qHi: "प्रकाश के विद्युत चुम्बकीय स्वरूप की खोज किसने की ?",
        opts: [
            { en: "Snell", hi: "स्नेल" },
            { en: "Newton", hi: "न्यूटन" },
            { en: "Maxwell", hi: "मैक्सवेल", correct: true },
            { en: "Young", hi: "यंग" }
        ]
    },
    {
        qEn: "Who first demonstrated the diffraction of light waves?",
        qHi: "किसने सर्वप्रथम यह दिखलाया कि प्रकाश तरंगों का विवर्तन होता है ?",
        opts: [
            { en: "Grimaldi", hi: "ग्रेमाल्डी", correct: true },
            { en: "Young", hi: "यंग" },
            { en: "Maxwell", hi: "मैक्सवेल" },
            { en: "Foucault", hi: "फोकाल्ट" }
        ]
    },
    {
        qEn: "Who propounded the Photoelectric Effect?",
        qHi: "प्रकाश विद्युत प्रभाव का प्रतिपादन किया–",
        opts: [
            { en: "Compton", hi: "कॉम्पटन" },
            { en: "Maxwell", hi: "मैक्सवेल" },
            { en: "Einstein", hi: "आइन्स्टीन", correct: true },
            { en: "Newton", hi: "न्यूटन" }
        ]
    },
    {
        qEn: "Which of the following phenomena does not occur in both light and sound?",
        qHi: "निम्नलिखित में से कौन-सी घटना प्रकाश और ध्वनि दोनों में घटित नहीं होती है ?",
        opts: [
            { en: "Diffraction", hi: "विवर्तन" },
            { en: "Polarization", hi: "ध्रुवण", correct: true },
            { en: "Reflection", hi: "परावर्तन" },
            { en: "Refraction", hi: "अपवर्तन" }
        ]
    },
    {
        qEn: "The bending of light from the corners of an obstacle is called:",
        qHi: "किसी अवरोध की कोर (किनारे) से प्रकाश का मुड़ना कहलाता है ?",
        opts: [
            { en: "Dispersion", hi: "विक्षेपण" },
            { en: "Diffraction", hi: "विवर्तन", correct: true },
            { en: "Refraction", hi: "अपवर्तन" },
            { en: "Interference", hi: "व्यतिकरण" }
        ]
    },
    {
        qEn: "Which of the following principles confirms the wave nature of light?",
        qHi: "निम्नलिखित में से कौन-सा सिद्धान्त प्रकाश के तरंग प्रकृति की पुष्टि करता है ?",
        opts: [
            { en: "Newton's Corpuscular Theory", hi: "न्यूटन का कणिका सिद्धान्त" },
            { en: "Theory of Interference", hi: "व्यतिकरण का सिद्धान्त", correct: true },
            { en: "Electromagnetic wave theory", hi: "प्रकाश का विद्युत चुम्बकीय तरंग सिद्धान्त" },
            { en: "None of these", hi: "इनमें से कोई नहीं" }
        ]
    },
    {
        qEn: "The nature of light radiation is:",
        qHi: "प्रकाश विकिरण की प्रकृति होती है–",
        opts: [
            { en: "Like wave", hi: "तरंग के समान" },
            { en: "Like particle", hi: "कण के समान" },
            { en: "Like both wave and particle", hi: "तरंग एवं कण दोनों के समान", correct: true },
            { en: "Like neither wave nor particle", hi: "तरंग एवं कण के समान नहीं" }
        ]
    },
    {
        qEn: "The phenomenon of light bouncing back from a smooth surface is called:",
        qHi: "प्रकाश के चिकने पृष्ठ से टकराकर वापस लौटने की घटना को कहते है–",
        opts: [
            { en: "Refraction of light", hi: "प्रकाश का अपवर्तन" },
            { en: "Reflection of light", hi: "प्रकाश का परावर्तन", correct: true },
            { en: "Diffraction of light", hi: "प्रकाश का विवर्तन" },
            { en: "Scattering of light", hi: "प्रकाश का प्रकीर्णन" }
        ]
    },
    {
        qEn: "The phenomenon of polarization in light proves that light waves are:",
        qHi: "प्रकाश में ध्रुवण की घटना से यह सिद्ध होता है कि प्रकाश तरंगें है–",
        opts: [
            { en: "Sharp", hi: "तीक्ष्ण" },
            { en: "Progressive", hi: "प्रगामी" },
            { en: "Transverse", hi: "अनुप्रस्थ", correct: true },
            { en: "Longitudinal", hi: "अनुदैर्ध्य" }
        ]
    },
    {
        qEn: "Sun gives energy at the rate of 4 × 10^26 Joules/sec. Its mass decreases at rate of:",
        qHi: "सूर्य लगभग 4 × 10^26 जूल प्रति सेकण्ड की दर से ऊर्जा दे रहा है। सूर्य से इतनी ऊर्जा निकलने से उसका द्रव्यमान किस दर से कम हो रहा है ?",
        opts: [
            { en: "4 × 10^7 kg s^-1", hi: "4 × 10^7 kg s^-1" },
            { en: "4 × 10^9 kg s^-1", hi: "4 × 10^9 kg s^-1", correct: true },
            { en: "4 × 10^11 kg s^-1", hi: "4 × 10^11 kg s^-1" },
            { en: "4 × 10^13 kg s^-1", hi: "4 × 10^13 kg s^-1" }
        ]
    },
    {
        qEn: "Who first measured the speed of light?",
        qHi: "प्रकाश का वेग सर्वप्रथम किसने ज्ञात किया ?",
        opts: [
            { en: "Galileo", hi: "गैलिलियो" },
            { en: "Newton", hi: "न्यूटन" },
            { en: "Roemer", hi: "रोमर", correct: true },
            { en: "Michelson", hi: "माइकेल्सन" }
        ]
    },
    {
        qEn: "In which of the following is the speed of light maximum?",
        qHi: "प्रकाश का वेग किसमें अधिकतम होता है ?",
        opts: [
            { en: "Diamond", hi: "हीरे" },
            { en: "Water", hi: "पानी" },
            { en: "Vacuum", hi: "निर्वात", correct: true },
            { en: "Hydrogen", hi: "हाइड्रोजन" }
        ]
    },
    {
        qEn: "With the increase in temperature of the medium, the speed of light:",
        qHi: "माध्यम के तापमान में वृद्धि के साथ प्रकाश की गति–",
        opts: [
            { en: "Increases", hi: "बढ़ती है" },
            { en: "Decreases", hi: "घटती है" },
            { en: "Remains the same", hi: "वैसी ही रहती है", correct: true },
            { en: "Suddenly drops", hi: "सहसा गिर जाती है" }
        ]
    },
    {
        qEn: "The speed of light in water, glass, and diamond is in the order:",
        qHi: "जल, कांच व हीरे में प्रकाश की चाल निम्न क्रम में होती है–",
        opts: [
            { en: "Diamond > Glass > Water", hi: "हीरा > कांच > जल" },
            { en: "Water > Glass > Diamond", hi: "जल > कांच > हीरा", correct: true },
            { en: "Glass > Diamond > Water", hi: "कांच > हीरा > जल" },
            { en: "Diamond > Water > Glass", hi: "हीरा > जल > कांच" }
        ]
    },
    {
        qEn: "How much time does it take for light to travel from Moon to Earth?",
        qHi: "चन्द्रमा से पृथ्वी तक आने में प्रकाश को लगभग कितना समय लगता है ?",
        opts: [
            { en: "8 minutes", hi: "8 मिनट" },
            { en: "8 seconds", hi: "8 सेकण्ड" },
            { en: "1 second", hi: "1 सेकण्ड", correct: true },
            { en: "100 seconds", hi: "100 सेकण्ड" }
        ]
    },
    {
        qEn: "How much time does sunlight take to reach us?",
        qHi: "सूर्य का प्रकाश हमारे पास लगभग कितने समय में पहुँचता है ?",
        opts: [
            { en: "8 minutes", hi: "8 मिनट", correct: true },
            { en: "2 minutes", hi: "2 मिनट" },
            { en: "6 minutes", hi: "6 मिनट" },
            { en: "4 minutes", hi: "4 मिनट" }
        ]
    },
    {
        qEn: "The speed of light is:",
        qHi: "प्रकाश का वेग है–",
        opts: [
            { en: "3 × 10^8 cm/sec", hi: "3 × 10^8 cm/sec" },
            { en: "3 × 10^8 m/sec", hi: "3 × 10^8 m/sec", correct: true },
            { en: "3 × 10^8 km/sec", hi: "3 × 10^8 km/sec" },
            { en: "3 × 10^8 mile/sec", hi: "3 × 10^8 mile/sec" }
        ]
    },
    {
        qEn: "Which part of the sun is visible during a solar eclipse?",
        qHi: "सूर्य ग्रहण के समय सूर्य का कौन-सा भाग दिखायी देता है ?",
        opts: [
            { en: "Chromosphere", hi: "वर्णमण्डल" },
            { en: "Corona", hi: "किरीट (कोरोना)", correct: true },
            { en: "Photosphere", hi: "प्रभामण्डल" },
            { en: "No part", hi: "कोई भाग नहीं" }
        ]
    },
    {
        qEn: "The maximum duration of a total solar eclipse is:",
        qHi: "पूर्ण सूर्य ग्रहण का अधिकतम समय होता है–",
        opts: [
            { en: "250 seconds", hi: "250 सेकण्ड" },
            { en: "460 seconds", hi: "460 सेकण्ड", correct: true },
            { en: "500 seconds", hi: "500 सेकण्ड" },
            { en: "600 seconds", hi: "600 सेकण्ड" }
        ]
    },
    {
        qEn: "Solar eclipse occurs when:",
        qHi: "सूर्य ग्रहण तब होता है, जब–",
        opts: [
            { en: "Moon is in the middle", hi: "चंद्रमा बीच में हो", correct: true },
            { en: "Earth is in the middle", hi: "पृथ्वी बीच में हो" },
            { en: "Sun is in the middle", hi: "सूर्य बीच में हो" },
            { en: "Sun, Moon, Earth not in line", hi: "सूर्य, चन्द्रमा तथा पृथ्वी एक रेखा में हों तथा बृहस्पति उस रेखा में न हो" }
        ]
    },
    {
        qEn: "Lunar eclipse occurs on:",
        qHi: "चन्द्र ग्रहण घटित होता है–",
        opts: [
            { en: "New Moon day", hi: "अमावस्या के दिन" },
            { en: "Full Moon day", hi: "पूर्णिमा के दिन", correct: true },
            { en: "Half Moon day", hi: "अर्द्धचन्द्र के दिन" },
            { en: "New Moon and Full Moon day", hi: "अमावस्या एवं पूर्णिमा के दिन" }
        ]
    },
    {
        qEn: "Solar eclipse occurs on:",
        qHi: "सूर्य ग्रहण कब होता है ?",
        opts: [
            { en: "New Moon day (Amavasya)", hi: "प्रतिपदा (अमावस्या)", correct: true },
            { en: "Full Moon day", hi: "पूर्णिमा को" },
            { en: "Any day", hi: "किसी भी दिन" },
            { en: "Quarter moon day", hi: "चतुर्थांश चन्द्रमा के दिन" }
        ]
    },
    {
        qEn: "Why does a cut diamond sparkle?",
        qHi: "एक काटा हुआ हीरा क्यों जगमगाता है ?",
        opts: [
            { en: "Due to molecular structure", hi: "इसकी आण्विक संरचना के कारण" },
            { en: "Due to absorption of light", hi: "प्रकाश के शोषण के कारण" },
            { en: "Due to Total Internal Reflection", hi: "पूर्ण आंतरिक परावर्तन के कारण", correct: true },
            { en: "Due to other inherent properties", hi: "कुछ अन्य निहित गुण के कारण" }
        ]
    },
    {
        qEn: "A coin in a vessel filled with water appears raised due to:",
        qHi: "पानी से भरे किसी बर्तन में पड़ा एक सिक्का किस कारण थोड़ा उठा हुआ प्रतीत होता है ?",
        opts: [
            { en: "Reflection of light", hi: "प्रकाश के परावर्तन के कारण" },
            { en: "Refraction of light", hi: "प्रकाश के अपवर्तन के कारण", correct: true },
            { en: "Diffraction of light", hi: "प्रकाश के विवर्तन के कारण" },
            { en: "Dispersion of light", hi: "प्रकाश के परिक्षेपण के कारण" }
        ]
    },
    {
        qEn: "Legs of a person sitting in water appear bent and short due to:",
        qHi: "पानी में लटकाकर बैठे हुए व्यक्ति को उसका पैर मुड़ा हुआ और छोटा दिखायी पड़ता है–",
        opts: [
            { en: "Refraction", hi: "अपवर्तन के कारण", correct: true },
            { en: "Reflection", hi: "परावर्तन के कारण" },
            { en: "Diffraction", hi: "विवर्तन के कारण" },
            { en: "Dispersion", hi: "परिक्षेपण के कारण" }
        ]
    },
    {
        qEn: "When a CD is seen in sunlight, rainbow colors are seen. This is explained by:",
        qHi: "जब एक कॉम्पैक्ट डिस्क (CD) सूर्य के प्रकाश में देखी जाती है तो इन्द्र धनुष के समान रंग दिखाई देते हैं। इसकी व्याख्या की जा सकती है–",
        opts: [
            { en: "Reflection and Diffraction", hi: "परावर्तन एवं विवर्तन की परिघटना के आधार पर", correct: true },
            { en: "Reflection and Transmission", hi: "परावर्तन एवं पारगमन की परिघटना के आधार पर" },
            { en: "Diffraction and Transmission", hi: "विवर्तन एवं पारगमन की परिघटना के आधार पर" },
            { en: "Refraction, Diffraction, Transmission", hi: "अपवर्तन, विवर्तन एवं पारगमन की परिघटना के आधार पर" }
        ]
    },
    {
        qEn: "A fish underwater appears raised above its actual depth due to:",
        qHi: "जल के अंदर पड़ी हुई मछली किस कारण से अपनी वास्तविक गहराई से कुछ ऊपर उठी हुई दिखायी देती है ?",
        opts: [
            { en: "Diffraction of light", hi: "प्रकाश के विवर्तन के कारण" },
            { en: "Refraction of light", hi: "प्रकाश के अपवर्तन के कारण", correct: true },
            { en: "Polarization of light", hi: "प्रकाश के ध्रुवण के कारण" },
            { en: "Reflection of light", hi: "प्रकाश के परावर्तन के कारण" }
        ]
    },
    {
        qEn: "An object inside water appears above its actual position to a person inside water due to:",
        qHi: "जल के अंदर मौजूद व्यक्ति को किस कारण जल की सतह से ऊपर की वस्तु अपनी वास्तविक स्थिति से अपेक्षाकृत ऊँचाई पर प्रतीत होती है ?",
        opts: [
            { en: "Refraction of light", hi: "प्रकाश के अपवर्तन के कारण", correct: true },
            { en: "Reflection of light", hi: "प्रकाश के परावर्तन के कारण" },
            { en: "Interference of light", hi: "प्रकाश के व्यतिकरण के कारण" },
            { en: "Diffraction of light", hi: "प्रकाश के विवर्तन के कारण" }
        ]
    },
    {
        qEn: "A stick dipped in water appears bent. This is due to:",
        qHi: "पानी में डूबी हुई लकड़ी मुड़ी हुई दिखायी देती है। निम्नलिखित कारण से ऐसा प्रतिभासित होता है–",
        opts: [
            { en: "Reflection of light", hi: "प्रकाश का परावर्तन" },
            { en: "Diffraction of light", hi: "प्रकाश का विवर्तन" },
            { en: "Refraction of light", hi: "प्रकाश का अपवर्तन", correct: true },
            { en: "Dispersion of light", hi: "प्रकाश का विसर्जन" }
        ]
    },
    {
        qEn: "When a light ray goes from a rarer medium to a denser medium, it:",
        qHi: "जब प्रकाश की किरण विरल माध्यम से सघन माध्यम में जाती है, तो वह–",
        opts: [
            { en: "Goes straight", hi: "सीधी दिशा में चली जाती है" },
            { en: "Bends towards the normal", hi: "अभिलम्ब की ओर झुक जाती है", correct: true },
            { en: "Bends away from the normal", hi: "अभिलम्ब से दूर हटती है" },
            { en: "None of these", hi: "इनमें से कोई नहीं" }
        ]
    },
    {
        qEn: "Total Internal Reflection occurs when light goes from:",
        qHi: "पूर्ण आंतरिक परावर्तन होता है, जब प्रकाश जाती है–",
        opts: [
            { en: "Rarer to Denser, angle > critical", hi: "विरल माध्यम से सघन माध्यम की ओर, आयतन कोण क्रान्तिक कोण से अधिक के साथ" },
            { en: "Denser to Rarer, angle > critical", hi: "सघन माध्यम से विरल माध्यम की ओर, आपतन कोण क्रान्तिक कोण से अधिक के साथ", correct: true },
            { en: "Rarer to Denser", hi: "विरल माध्यम से सघन माध्यम की ओर" },
            { en: "Denser to Rarer", hi: "सघन माध्यम से विरल माध्यम की ओर" }
        ]
    },
    {
        qEn: "Rainbow is formed due to:",
        qHi: "इन्द्रधनुष किस कारण से बनता है ?",
        opts: [
            { en: "Refraction and Dispersion", hi: "अपवर्तन और परिक्षेपण" },
            { en: "Scattering and Refraction", hi: "प्रकीर्णन और अपवर्तन" },
            { en: "Diffraction and Refraction", hi: "विवर्तन और अपवर्तन" },
            { en: "Refraction and Reflection", hi: "अपवर्तन और परावर्तन", correct: true }
        ]
    },
    {
        qEn: "The phenomenon causing Mirage is:",
        qHi: "मृग मरीचिका (Mirage) बनाने वाली प्रघटना को क्या कहते है ?",
        opts: [
            { en: "Interference", hi: "व्यतिकरण" },
            { en: "Diffraction", hi: "विवर्तन" },
            { en: "Polarization", hi: "ध्रुवीकरण" },
            { en: "Total Internal Reflection", hi: "पूर्ण आंतरिक परावर्तन", correct: true }
        ]
    },
    {
        qEn: "Endoscopy is based on:",
        qHi: "पेट अथवा शरीर के अन्य आन्तरिक अंगों के अन्वेषण के लिए प्रयुक्त तकनीक एन्डोस्कोपी (Endoscopy) आधारित है–",
        opts: [
            { en: "Total Internal Reflection", hi: "पूर्ण आन्तरिक परावर्तन परिघटना", correct: true },
            { en: "Interference", hi: "व्यतिकरण परिघटना पर" },
            { en: "Diffraction", hi: "विवर्तन परिघटना पर" },
            { en: "Polarization", hi: "ध्रुवण परिघटना पर" }
        ]
    },
    {
        qEn: "The bottom of a beaker filled with liquid appears raised due to:",
        qHi: "तरल से भरे हुए बीकर का तल किस कारण से कुछ ऊपर उठा हुआ दिखायी देता है ?",
        opts: [
            { en: "Refraction", hi: "अपवर्तन", correct: true },
            { en: "Interference", hi: "व्यतिकरण" },
            { en: "Diffraction", hi: "विवर्तन" },
            { en: "Reflection", hi: "परावर्तन" }
        ]
    },
    {
        qEn: "Internal reflection of light from the Sun can happen if light goes from:",
        qHi: "सूर्य से प्रकाश का आन्तरिक परावर्तन हो सकता है यदि प्रकाश–",
        opts: [
            { en: "Air to Glass", hi: "वायु से काँच में जाए" },
            { en: "Air to Water", hi: "वायु से जल में जाए" },
            { en: "Glass to Air", hi: "काँच से वायु में जाए", correct: true },
            { en: "Water to Glass", hi: "जल से काँच में जाए" }
        ]
    },
    {
        qEn: "Cracked glass appears shiny due to:",
        qHi: "चटका हुआ कांच चटकीला प्रतीत होता है–",
        opts: [
            { en: "Refraction", hi: "अपवर्तन के कारण" },
            { en: "Reflection", hi: "परावर्तन के कारण" },
            { en: "Interference", hi: "व्यतिकरण के कारण" },
            { en: "Total Internal Reflection", hi: "पूर्ण आन्तरिक परावर्तन के कारण", correct: true }
        ]
    },
    {
        qEn: "Rainbows are formed when sunlight on rain drops undergoes:",
        qHi: "इन्द्रधनुष तब बनते हैं, जब सूर्य का प्रकाश–",
        opts: [
            { en: "Refraction and Internal Reflection", hi: "वायुमण्डल में वर्षा बूंदों पर गिरने से अपवर्तन और आंतरिक परावर्तन होने पर", correct: true },
            { en: "Reflection only", hi: "वायुमण्डल में निलंबी वर्षा बूंदों पर गिरने से परावर्तन होने पर विकीर्ण हो जाता है।" },
            { en: "Refraction only", hi: "वायुमण्डल में वर्षा बूंदों पर गिरने से अपवर्तन होने पर विकीर्ण हो जाता है।" },
            { en: "None of these", hi: "दिए गए कथनों में से कोई भी सही नहीं है।" }
        ]
    },
    {
        qEn: "How many colors does a rainbow show?",
        qHi: "इन्द्रधनुष कितने रंग दिखाता है ?",
        opts: [
            { en: "7", hi: "7", correct: true },
            { en: "10", hi: "10" },
            { en: "12", hi: "12" },
            { en: "5", hi: "5" }
        ]
    },
    {
        qEn: "Optical fiber works on the principle of:",
        qHi: "प्रकाशीय फाइबर किस सिद्धांत पर कार्य करता है ?",
        opts: [
            { en: "Refraction", hi: "अपवर्तन" },
            { en: "Scattering", hi: "प्रकीर्णन" },
            { en: "Interference", hi: "व्यतिकरण" },
            { en: "Total Internal Reflection", hi: "पूर्ण आन्तरिक परावर्तन", correct: true }
        ]
    },
    {
        qEn: "What happens when light travels from denser to rarer medium with angle > critical angle?",
        qHi: "सम्बन्धित माध्यम युग्म के क्रांतिक कोण से अधिक आयतन कोण का सघन से विरल माध्यम की ओर जाने वाली प्रकाश किरण क्या करती है ?",
        opts: [
            { en: "Diffraction", hi: "विवर्तन" },
            { en: "Total Internal Reflection", hi: "समग्र आंतरिक परावर्तन", correct: true },
            { en: "Reflection", hi: "परावर्तन" },
            { en: "Refraction", hi: "अपवर्तन" }
        ]
    },
    {
        qEn: "Consider statements about Hypermetropia (Far-sightedness): 1. Can't see far. 2. Can't see near. 3. Near point shifts away. 4. Far point comes closer. Which are correct?",
        qHi: "निम्नलिखित कथनों पर विचार कीजिए– दृष्टि का एक दोष दीर्घदृष्टि है, जिसमें... (1,2,3,4 options)",
        opts: [
            { en: "1 and 3", hi: "1 और 3" },
            { en: "2 and 4", hi: "2 और 4" },
            { en: "1 and 4", hi: "1 और 4" },
            { en: "2 and 3", hi: "2 और 3", correct: true }
        ]
    },
    {
        qEn: "What is a Compound Microscope?",
        qHi: "यौगिक सूक्ष्मदर्शी क्या होता है ?",
        opts: [
            { en: "Microscope with one lens", hi: "ऐसा सूक्ष्मदर्शी जिसमें एक लेंस होता है" },
            { en: "Microscope with two lens sets (Ocular & Eyepiece)", hi: "ऐसा सूक्ष्मदर्शी जिसमें लेंसों के दो सेट होते हैं– एक नेत्राकार लेंस और एक नेत्रक", correct: true },
            { en: "Microscope with concave lenses", hi: "ऐसा सूक्ष्मदर्शी जिसके लेंस अवतल होते है" },
            { en: "Microscope with convex lenses", hi: "ऐसा सूक्ष्मदर्शी जिसके लेंस उत्तल होते है" }
        ]
    },
    {
        qEn: "Why does the sky appear blue?",
        qHi: "किसके कारण आकाश नीला दिखायी पड़ता है ?",
        opts: [
            { en: "Refraction", hi: "अपवर्तन" },
            { en: "Reflection", hi: "परावर्तन" },
            { en: "Scattering", hi: "प्रकीर्णन", correct: true },
            { en: "Dispersion", hi: "विक्षेपण" }
        ]
    },
    {
        qEn: "When light goes from one medium to another, what remains unchanged?",
        qHi: "जब प्रकाश किरण एक माध्यम से दूसरे माध्यम में जाती है, तो इसकी–",
        opts: [
            { en: "Wavelength remains same", hi: "तरंगदैर्घ्य समान बनी रहती है" },
            { en: "Frequency remains same", hi: "आवृत्ति समान बनी रहती है", correct: true },
            { en: "Frequency increases", hi: "आवृत्ति बड़ जाती है" },
            { en: "Wavelength increases", hi: "तरंगदैर्घ्य बड़ जाती है" }
        ]
    },
    {
        qEn: "Sky looks blue because:",
        qHi: "आकाश नीला दिखाई पड़ता है, क्योंकि–",
        opts: [
            { en: "Blue light scatters most", hi: "नीले प्रकाश का प्रकीर्णन सबसे अधिक होता है", correct: true },
            { en: "Red light scatters most", hi: "लाल प्रकाश का प्रकीर्णन सबसे अधिक होता है" },
            { en: "Blue light absorption is least", hi: "नीले प्रकाश का वातावरण में अवशोषण सबसे कम होता है।" },
            { en: "Red light absorption is most", hi: "लाल प्रकाश का वातावरण में अवशोषण सबसे अधिक होता है।" }
        ]
    },
    {
        qEn: "Diffusion of light in the atmosphere is due to:",
        qHi: "वातावरण में प्रकाश का विसरण निम्नलिखित की वजह से होता है–",
        opts: [
            { en: "Carbon dioxide", hi: "कार्बन डाइऑक्साइड" },
            { en: "Dust particles", hi: "धूलकण", correct: true },
            { en: "Helium", hi: "हीलियम" },
            { en: "None", hi: "उपर्युक्त में से कोई नहीं" }
        ]
    },
    {
        qEn: "To an observer on the lunar surface, the sky appears:",
        qHi: "चन्द्र सतह पर एक प्रेक्षक को, दिन के समय आकाश दिखायी देगा–",
        opts: [
            { en: "Light yellow", hi: "हल्का पीला" },
            { en: "Blue", hi: "नीला" },
            { en: "Orange", hi: "नारंगी" },
            { en: "Black", hi: "काला", correct: true }
        ]
    }
];

/* --- LOGIC --- */
let questions = [];
let currentQuestionIndex = 0;
let score = 0;
let timerInterval;
let timeLeft;
let userTimerSetting = 0;
let audioContext;

// Audio Synth
function playSound(type) {
    if (!audioContext) audioContext = new (window.AudioContext || window.webkitAudioContext)();
    
    const osc = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    osc.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    if (type === 'correct') {
        osc.type = 'triangle';
        osc.frequency.setValueAtTime(800, audioContext.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.1);
        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.4);
        osc.start();
        osc.stop(audioContext.currentTime + 0.4);
    } else if (type === 'wrong') {
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(150, audioContext.currentTime);
        osc.frequency.linearRampToValueAtTime(100, audioContext.currentTime + 0.3);
        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.3);
        osc.start();
        osc.stop(audioContext.currentTime + 0.3);
    }
}

// Confetti
const canvas = document.getElementById('confetti');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let particles = [];

function createConfetti() {
    for (let i = 0; i < 60; i++) {
        particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height * 0.5 - canvas.height,
            speed: Math.random() * 5 + 3,
            color: `hsl(${Math.random() * 360}, 80%, 60%)`,
            size: Math.random() * 8 + 4,
            oscillation: Math.random() * 2
        });
    }
}

function updateConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach((p, index) => {
        p.y += p.speed;
        p.x += Math.sin(p.y * 0.01 + p.oscillation);
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
        ctx.fill();
        if (p.y > canvas.height) particles.splice(index, 1);
    });
    if(particles.length > 0) requestAnimationFrame(updateConfetti);
}

// Quiz Functions
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function startGame() {
    const timeInput = document.getElementById('timerInput').value;
    const shuffleInput = document.getElementById('shuffleInput').value;
    
    userTimerSetting = timeInput ? parseInt(timeInput) : 0;
    
    questions = JSON.parse(JSON.stringify(rawQuestions));
    if (shuffleInput === 'yes') shuffleArray(questions);
    
    currentQuestionIndex = 0;
    score = 0;
    
    document.getElementById('start-screen').classList.add('hidden');
    document.getElementById('result-screen').classList.add('hidden');
    document.getElementById('quiz-screen').classList.remove('hidden');
    
    const timerDisplay = document.getElementById('timer-display');
    if (userTimerSetting > 0) timerDisplay.classList.remove('hidden');
    else timerDisplay.classList.add('hidden');

    loadQuestion();
}

function loadQuestion() {
    const q = questions[currentQuestionIndex];
    
    // UI Updates
    document.getElementById('q-counter').innerText = `${(currentQuestionIndex + 1).toString().padStart(2, '0')}/${questions.length}`;
    document.getElementById('score-display').innerText = score;
    
    const progress = ((currentQuestionIndex) / questions.length) * 100;
    document.getElementById('progress-bar').style.width = `${progress}%`;

    // Render Text
    document.getElementById('q-text-en').innerText = q.qEn;
    document.getElementById('q-text-hi').innerText = q.qHi;
    
    // Render Options
    const optContainer = document.getElementById('options-container');
    optContainer.innerHTML = '';
    
    q.opts.forEach((opt, idx) => {
        const btn = document.createElement('div');
        btn.className = 'option-btn';
        btn.onclick = () => checkAnswer(idx, btn);
        btn.innerHTML = `
            <span class="opt-en">${['A','B','C','D'][idx]}. ${opt.en}</span>
            <span class="opt-hi">${opt.hi}</span>
        `;
        optContainer.appendChild(btn);
    });

    // Reset Emoji
    document.getElementById('feedback-emoji').innerHTML = '';
    document.getElementById('feedback-emoji').classList.add('hidden');

    // Timer Logic
    clearInterval(timerInterval);
    const timerEl = document.getElementById('timer-display');
    timerEl.classList.remove('pulse-text');
    timerEl.style.color = "white";

    if (userTimerSetting > 0) {
        timeLeft = userTimerSetting;
        timerEl.innerText = timeLeft;
        
        timerInterval = setInterval(() => {
            timeLeft--;
            timerEl.innerText = timeLeft;
            
            if (timeLeft <= 5) {
                timerEl.classList.add('pulse-text');
                timerEl.style.color = "#ff1744";
            }

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                playBuzz();
                disableOptions();
                setTimeout(() => nextQuestion(), 1500);
            }
        }, 1000);
    }
}

function checkAnswer(selectedIndex, btnElement) {
    clearInterval(timerInterval);
    const q = questions[currentQuestionIndex];
    const isCorrect = q.opts[selectedIndex].correct;
    
    disableOptions();

    const emojiContainer = document.getElementById('feedback-emoji');
    emojiContainer.classList.remove('hidden');

    if (isCorrect) {
        score++;
        btnElement.classList.add('correct');
        playSound('correct');
        createConfetti();
        updateConfetti();
        emojiContainer.innerText = '🎉';
    } else {
        btnElement.classList.add('wrong');
        playSound('wrong');
        emojiContainer.innerText = '😢';
        emojiContainer.classList.add('shake');
        
        // Highlight correct answer
        const allBtns = document.querySelectorAll('.option-btn');
        q.opts.forEach((opt, i) => {
            if (opt.correct) allBtns[i].classList.add('correct');
        });
    }

    document.getElementById('score-display').innerText = score;

    setTimeout(() => {
        emojiContainer.classList.remove('shake');
        nextQuestion();
    }, 1500);
}

function disableOptions() {
    const btns = document.querySelectorAll('.option-btn');
    btns.forEach(b => {
        b.style.pointerEvents = 'none';
        b.style.opacity = '0.7';
    });
}

function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
        loadQuestion();
    } else {
        finishGame();
    }
}

function finishGame() {
    clearInterval(timerInterval);
    document.getElementById('quiz-screen').classList.add('hidden');
    document.getElementById('result-screen').classList.remove('hidden');
    
    // Early Exit Logic: Calculate percentage based on questions ATTEMPTED/SEEN so far.
    // If currentQuestionIndex is 0 (immediate click), avoid division by zero.
    const questionsSeen = currentQuestionIndex === 0 ? 1 : currentQuestionIndex;
    
    const displayTotal = currentQuestionIndex;
    const percentage = Math.round((score / (displayTotal || 1)) * 100);
    
    const scoreEl = document.getElementById('final-score');
    scoreEl.innerText = percentage + "%";
    
    document.getElementById('stat-total').innerText = displayTotal;
    document.getElementById('stat-correct').innerText = score;

    const msgEl = document.getElementById('final-message');
    if (percentage >= 80) msgEl.innerText = "🏆 Outstanding Performance!";
    else if (percentage >= 50) msgEl.innerText = "👏 Well Done! Keep it up.";
    else msgEl.innerText = "📚 Practice makes perfect!";
}

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

</script>
</body>
</html>