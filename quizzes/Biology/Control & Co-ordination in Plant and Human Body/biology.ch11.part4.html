<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Human Physiology Quiz | 151-204</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --correct: #00b894;
            --wrong: #d63031;
            --glass: rgba(255, 255, 255, 0.1);
            --border: rgba(255, 255, 255, 0.2);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #6c5ce7, #ff7675, #a29bfe);
            background-size: 400% 400%;
            animation: meshGradient 15s ease infinite;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            padding: 20px;
            overflow-x: hidden;
        }

        @keyframes meshGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 25px;
            width: 100%;
            max-width: 800px;
            padding: 40px;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
        }

        .progress-bar {
            position: absolute;
            top: 0; left: 0; height: 6px;
            background: linear-gradient(90deg, #00d2ff, #3a7bd5);
            width: 0%; transition: width 0.3s ease;
            box-shadow: 0 0 10px #00d2ff;
        }

        .screen { display: none; }
        .screen.active { display: flex; flex-direction: column; }

        .header { display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: 600; }

        .timer-circle {
            width: 60px; height: 60px; border-radius: 50%;
            border: 4px solid var(--border);
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 20px; font-size: 1.2rem; font-weight: 700;
        }

        .timer-pulse { color: #ff3f34; border-color: #ff3f34; animation: pulse 0.8s infinite; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        .question-text { font-size: 1.3rem; font-weight: 700; margin-bottom: 5px; }
        .hindi-text { font-size: 1rem; color: #ddd; font-weight: 400; display: block; margin-bottom: 25px; line-height: 1.4; }

        .options-grid { display: grid; grid-template-columns: 1fr; gap: 15px; }

        .option-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border);
            padding: 18px; border-radius: 15px;
            color: white; cursor: pointer; text-align: left;
            transition: 0.2s; display: flex; flex-direction: column;
        }

        .option-btn:hover:not(:disabled) { background: rgba(255,255,255,0.15); transform: translateX(5px); }

        .option-btn.correct { background: var(--correct) !important; border-color: #fff; color: #fff; }
        .option-btn.wrong { background: var(--wrong) !important; border-color: #fff; }

        .btn-action {
            background: white; color: var(--primary); border: none; padding: 15px 30px;
            border-radius: 50px; font-weight: 700; cursor: pointer; transition: 0.3s;
            margin-top: 25px; width: 100%; font-size: 1.1rem;
        }
        .btn-action:hover { transform: scale(1.02); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }

        #sad-emoji {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 8rem; display: none; z-index: 100;
        }

        .shake { animation: shake 0.4s ease-in-out; }
        @keyframes shake { 0%, 100% { transform: translate(-50%, -50%) rotate(0deg); } 25% { transform: translate(-50%, -50%) rotate(-10deg); } 75% { transform: translate(-50%, -50%) rotate(10deg); } }

        #confetti { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; }
    </style>
</head>
<body>

<canvas id="confetti"></canvas>
<div id="sad-emoji">üò¢</div>

<div class="glass-card">
    <div class="progress-bar" id="progress"></div>

    <div id="start-screen" class="screen active">
        <h1 style="text-align: center; margin-bottom: 10px;">Human Biology Quiz</h1>
        <p style="text-align: center; margin-bottom: 30px; opacity: 0.8;">Nervous System & Coordination (Q. 151 - 204)</p>
        
        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 10px;">Timer per Question (Seconds, 0 = Off):</label>
            <input type="number" id="timer-input" placeholder="e.g. 15" 
                   style="width: 100%; padding: 12px; border-radius: 10px; border: none; background: rgba(255,255,255,0.2); color: white;">
        </div>

        <div style="margin-bottom: 30px;">
            <label style="cursor: pointer; display: flex; align-items: center; gap: 10px;">
                <input type="checkbox" id="shuffle-toggle" style="width: 20px; height: 20px;"> Shuffle Questions (‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§Æ‡§ø‡§≤‡§æ‡§è‡§Ç)
            </label>
        </div>

        <button class="btn-action" onclick="initQuiz()">Start Quiz / ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
    </div>

    <div id="quiz-screen" class="screen">
        <div class="header">
            <div id="q-counter">Question 00/54</div>
            <div id="score-counter">Score: 0</div>
        </div>
        
        <div id="timer-display" class="timer-circle">--</div>

        <div id="q-container">
            <h2 class="question-text" id="eng-q"></h2>
            <span class="hindi-text" id="hin-q"></span>
            <div class="options-grid" id="options-box"></div>
        </div>

        <button class="btn-action" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid var(--border);" 
                onclick="endQuiz()">Finish & Show Results</button>
    </div>

    <div id="result-screen" class="screen">
        <h1 style="text-align: center;">Quiz Results</h1>
        <div style="font-size: 4rem; font-weight: 800; text-align: center; margin: 20px 0;" id="final-score">0%</div>
        <p id="result-msg" style="text-align: center; margin-bottom: 30px; font-size: 1.2rem;"></p>
        <button class="btn-action" onclick="location.reload()">Restart Quiz</button>
    </div>
</div>

<script>
    // Full Question Set 151-204
    const questionData = [
        { qE: "What is Adams's Apple?", qH: "‡§Ö‡§µ‡§ü‡•Å ‡§â‡§¶‡•ç‡§∞‡•ç‡§ß (Adams's Apple) ‡§π‡•à?", options: ["Thyroid cartilage (‡§•‡§æ‡§Ø‡§∞‡§æ‡§á‡§° ‡§â‡§™‡§æ‡§∏‡•ç‡§•‡§ø)", "Lymphatic organ (‡§≤‡§æ‡§∏‡•Ä‡§ï‡§æ ‡§Ö‡§Ç‡§ó)", "Parathyroid (‡§™‡§æ‡§∞‡§æ‡§•‡§æ‡§Ø‡§∞‡§æ‡§á‡§° ‡§â‡§™‡§æ‡§∏‡•ç‡§•‡§ø)", "Thyroid sand (‡§•‡§æ‡§Ø‡§∞‡§æ‡§á‡§° ‡§ï‡•Ä ‡§∞‡•á‡§§)"], correct: 0 },
        { qE: "Which gland is called the third eye residue?", qH: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§ó‡•ç‡§∞‡§Ç‡§•‡§ø ‡§ï‡•ã ‡§Ü‡§§‡•ç‡§Æ‡§æ ‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§Ø‡§æ ‡§§‡•Ä‡§∏‡§∞‡•Ä ‡§Ü‡§Å‡§ñ ‡§ï‡§æ ‡§Ö‡§µ‡§∂‡•á‡§∑ ‡§ï‡§π‡§§‡•á ‡§π‡•à?", options: ["Pineal (‡§™‡•Ä‡§®‡•Ä‡§Ö‡§≤)", "Pituitary (‡§™‡•Ä‡§Ø‡•Ç‡§∑)", "Pons (‡§™‡•â‡§®‡•ç‡§∏)", "Hypothalamus (‡§π‡§æ‡§á‡§™‡•ã‡§•‡•à‡§≤‡•á‡§Æ‡§∏)"], correct: 0 },
        { qE: "What should be given to a patient with low blood pressure for relief?", qH: "‡§∞‡§ï‡•ç‡§§‡§ö‡§æ‡§™ ‡§ï‡§Æ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§∞‡•ã‡§ó‡•Ä ‡§ï‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§¶‡•á‡§®‡•á ‡§∏‡•á ‡§Ü‡§∞‡§æ‡§Æ ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ?", options: ["Insulin (‡§á‡§®‡•ç‡§∏‡•Å‡§≤‡§ø‡§®)", "Adrenaline (‡§è‡§°‡•ç‡§∞‡•Ä‡§®‡•á‡§≤‡•Ä‡§®)", "Gastrin (‡§ó‡•à‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä‡§®)", "Estrogen (‡§è‡§∏‡•ç‡§ü‡•ç‡§∞‡•ã‡§ú‡•á‡§®)"], correct: 1 },
        { qE: "What was the first hormone discovered?", qH: "‡§∏‡§∞‡•ç‡§µ‡§™‡•ç‡§∞‡§•‡§Æ ‡§ñ‡•ã‡§ú‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•â‡§∞‡•ç‡§Æ‡•ã‡§® ‡§ï‡•å‡§® ‡§•‡§æ?", options: ["Insulin", "Growth Hormone", "Secretin", "Adrenaline"], correct: 2 },
        { qE: "Which hormone regulates growth in somatic cells?", qH: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§π‡•â‡§∞‡•ç‡§Æ‡•ã‡§® ‡§ï‡§æ‡§Ø‡§ø‡§ï ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§ï‡•ã ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?", options: ["STH", "FSH", "LH", "LTH"], correct: 0 },
        { qE: "Which hormone has an effect opposite to Insulin?", qH: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§π‡•â‡§∞‡•ç‡§Æ‡•ã‡§® ‡§Æ‡•á‡§Ç ‡§á‡§Ç‡§∏‡•Å‡§≤‡§ø‡§® ‡§ï‡§æ ‡§µ‡§ø‡§™‡§∞‡§ø‡§§ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", options: ["Oxytocin", "Aldosterone", "Calcitonin", "Glucagon"], correct: 3 },
        { qE: "Which plant hormone protects crops from frost and cold?", qH: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§™‡§æ‡§¶‡§™ ‡§π‡•â‡§∞‡•ç‡§Æ‡•ã‡§® ‡§™‡§æ‡§≤‡•á ‡§î‡§∞ ‡§†‡§Ç‡§° ‡§∏‡•á ‡§∏‡•á‡§¨ ‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?", options: ["ABA", "IAA", "Gibberellin", "Cytokinin"], correct: 0 },
        { qE: "Consider: 1. Calcitonin increases blood calcium. 2. Parathormone decreases it.", qH: "‡§ï‡§•‡§®‡•ã‡§Ç ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç- 1. ‡§ï‡•à‡§≤‡•ç‡§∏‡•Ä‡§ü‡•ã‡§®‡•Ä‡§® 2. ‡§™‡§æ‡§∞‡§æ‡§•‡•â‡§∞‡•ç‡§Æ‡•ã‡§®", options: ["Only 1", "Only 2", "1 and 2 both", "Neither"], correct: 3 },
        { qE: "Nervous systems of high-level animals consist of?", qH: "‡§â‡§ö‡•ç‡§ö ‡§∏‡•ç‡§§‡§∞‡•Ä‡§Ø ‡§ú‡§Ç‡§§‡•Å‡§ì‡§Ç ‡§ï‡•á ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§¨‡§®‡•á ‡§π‡•ã‡§§‡•á ‡§π‡•à-", options: ["Brain", "Spinal Cord", "Nerves", "All of these"], correct: 3 },
        { qE: "Which is not a part of a Nerve Cell (Neuron)?", qH: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ ‡§ï‡•á ‡§≠‡§æ‡§ó ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?", options: ["Myelin Sheath", "Loop of Henle", "Node of Ranvier", "Schwann cell"], correct: 1 },
        { qE: "Consider: 1. Long axon is called Nerve Fibre. 2. Many fibres form a Nerve.", qH: "‡§ï‡§•‡§®‡•ã‡§Ç ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç- 1. ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§§‡§Ç‡§§‡•Å 2. ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ", options: ["Only 1", "Only 2", "1 and 2 both", "Neither"], correct: 2 },
        { qE: "What is absent in a Nerve Cell?", qH: "‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§Æ‡•ç‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•ç‡§Ø‡§æ ‡§Ö‡§®‡•Å‡§™‡§∏‡•ç‡§•‡§ø‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", options: ["Centrosome", "Ribosome", "ER", "Golgi Body"], correct: 0 },
        { qE: "Where is the nucleus located in a nerve cell?", qH: "‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ ‡§ï‡•á ‡§ï‡§ø‡§∏ ‡§π‡§ø‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§ï‡•á‡§®‡•ç‡§¶‡•ç‡§∞‡§ï ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§ ‡§∞‡§π‡§§‡§æ ‡§π‡•à?", options: ["Myelin Sheath", "Cyton", "Axon", "Dendron"], correct: 1 },
        { qE: "What is it called when one nerve cell meets another?", qH: "‡§ú‡§¨ ‡§è‡§ï ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§§‡§Ç‡§§‡•Å ‡§∏‡•á ‡§ú‡•Å‡•ú‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§â‡§∏‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", options: ["Neuronal Synapse", "Neuromuscular Synapse", "Synaptic Cleft", "Myelin Sheath"], correct: 0 },
        { qE: "What is it called when a nerve meets a muscle?", qH: "‡§ú‡§¨ ‡§è‡§ï ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§§‡§Ç‡§§‡•Å ‡§è‡§ï ‡§Æ‡§æ‡§Ç‡§∏‡§™‡•á‡§∂‡•Ä ‡§∏‡•á ‡§ú‡•Å‡•ú‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§á‡§∏‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", options: ["Neuronal Synapse", "Neuromuscular Synapse", "Synaptic Cleft", "Myelin Sheath"], correct: 1 },
        { qE: "What is the empty space between two nerves called?", qH: "‡§ú‡•ã‡•ú‡•ã‡§Ç ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§ï‡•Å‡§õ ‡§ñ‡§æ‡§≤‡•Ä ‡§ú‡§ó‡§π ‡§∞‡§π‡§§‡§æ ‡§π‡•à‡•§ ‡§á‡§∏ ‡§ñ‡§æ‡§≤‡•Ä ‡§ú‡§ó‡§π ‡§ï‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", options: ["Neuronal Synapse", "Neuromuscular Synapse", "Synaptic Cleft", "Myelin Sheath"], correct: 2 },
        { qE: "Who won the Nobel Prize in 1906 for the Neuron Doctrine?", qH: "‡§®‡•ç‡§Ø‡•Ç‡§∞‡•â‡§® ‡§∏‡§ø‡§¶‡•ç‡§ß‡§æ‡§®‡•ç‡§§ ‡§™‡•ç‡§∞‡§§‡§ø‡§™‡§æ‡§¶‡§® ‡§π‡•á‡§§‡•Å 1906 ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏‡§®‡•á ‡§®‡•ã‡§¨‡•á‡§≤ ‡§™‡•Å‡§∞‡§∏‡•ç‡§ï‡§æ‡§∞ ‡§ú‡•Ä‡§§‡§æ ‡§•‡§æ?", options: ["Henry Moseley", "Pierre Curie", "Santiago Ram√≥n y Cajal", "Luis Alvarez"], correct: 2 },
        { qE: "Which structure's absence prevents nerve cells from dividing?", qH: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§∏‡§Ç‡§∞‡§ö‡§®‡§æ ‡§ï‡•á ‡§Ö‡§≠‡§æ‡§µ ‡§Æ‡•á‡§Ç ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ ‡§µ‡§ø‡§≠‡§æ‡§ú‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§™‡§æ‡§§‡•Ä ‡§π‡•à?", options: ["Golgi Body", "Centrosome", "Nucleus", "Mitochondria"], correct: 1 },
        { qE: "Which element is necessary for electrical signal conduction in nerves?", qH: "‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ‡§ì‡§Ç ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡•Å‡§§‡•Ä‡§Ø ‡§∏‡§Ç‡§ï‡•á‡§§ ‡§∏‡§Ç‡§µ‡§π‡§® ‡§π‡•á‡§§‡•Å ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§§‡§§‡•ç‡§µ ‡§π‡•à?", options: ["Sodium (‡§∏‡•ã‡§Æ‡§ø‡§Ø‡§Æ)", "Rubidium", "Lithium", "Sodium (‡§∏‡•ã‡§°‡§ø‡§Ø‡§Æ)"], correct: 3 },
        { qE: "Consider: 1. Myelin sheath 2. Neurilemma 3. Myelin absent in invertebrates.", qH: "‡§ï‡§•‡§®‡•ã‡§Ç ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç- ‡§Æ‡§æ‡§Ø‡§≤‡•Ä‡§® ‡§∂‡•Ä‡§• ‡§µ ‡§®‡•ç‡§Ø‡•Ç‡§∞‡•Ä‡§≤‡•á‡§Æ‡§æ", options: ["Only 1", "Only 2", "Only 3", "All of these"], correct: 3 },
        { qE: "Where are Schwann cells present?", qH: "‡§∂‡•ç‡§µ‡§æ‡§® ‡§ï‡•ã‡§∂‡§ø‡§ï‡§æ (Schwann cells) ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§ ‡§∞‡§π‡§§‡•á ‡§π‡•à‡§Ç-", options: ["Neurons", "Nephrons", "RBC", "WBC"], correct: 0 },
        { qE: "In a Bipolar Neuron...", qH: "‡§¶‡•ç‡§µ‡§ø‡§ß‡•ç‡§∞‡•Å‡§µ‡•Ä‡§Ø ‡§®‡•ç‡§Ø‡•Ç‡§∞‡•â‡§® (Bipolar Neuron) ‡§Æ‡•á‡§Ç-", options: ["One axon and one dendron", "One axon and two or more dendrons", "Two axons and one dendron", "Two axons and two dendrons"], correct: 0 },
        { qE: "Who secretes the Myelinated Sheath on the Axon?", qH: "‡§®‡•ç‡§Ø‡•Ç‡§∞‡•â‡§® ‡§ï‡•á ‡§è‡§ï‡•ç‡§∏‡•â‡§® ‡§™‡§∞ ‡§∏‡•ç‡§•‡§ø‡§§ ‡§Æ‡§æ‡§Ø‡§≤‡§ø‡§®‡•á‡§ü‡•á‡§° ‡§∂‡•Ä‡§• ‡§ï‡§ø‡§∏‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∏‡•ç‡§§‡•ç‡§∞‡§æ‡§µ‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à-", options: ["Axon", "Schwann cells", "Cytoplasm", "Nissl's granules"], correct: 1 },
        { qE: "Synaptic clefts are present between?", qH: "‡§∏‡•á‡§®‡•á‡§™‡•ç‡§ü‡§ø‡§ï ‡§¶‡§∞‡§æ‡§∞ ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§ ‡§∞‡§π‡§§‡•á ‡§π‡•à-", options: ["One dendron to another", "One axon to another", "Axon and Dendron", "Axon and Cyton"], correct: 2 },
        { qE: "What comes under the Central Nervous System?", qH: "‡§ï‡•á‡§®‡•ç‡§¶‡•ç‡§∞‡•Ä‡§Ø ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§ï‡•á ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§ó‡§§ ‡§Ü‡§§‡•á ‡§π‡•à‡§Ç?", options: ["Brain", "Spinal Cord", "Brain and Spinal Cord", "Cranium and Spinal nerves"], correct: 2 },
        { qE: "Nervous system originates from which primary tissue?", qH: "‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§ï‡•Ä ‡§â‡§§‡•ç‡§™‡§§‡•ç‡§§‡§ø ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§â‡§§‡•ç‡§§‡§ï ‡§∏‡•á ‡§π‡•ã‡§§‡•Ä ‡§π‡•à?", options: ["Ectoderm", "Mesoderm", "Endoderm", "None of these"], correct: 0 },
        { qE: "Human brain is divided into how many parts?", qH: "‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§ï‡§æ ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡§ø‡§§‡§®‡•á ‡§≠‡§æ‡§ó‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§≠‡§æ‡§ú‡§ø‡§§ ‡§π‡•à-", options: ["2", "3", "4", "5"], correct: 1 },
        { qE: "Which is NOT related to the Cerebrum?", qH: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§™‡•ç‡§∞‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?", options: ["Largest part", "Forms anterior and lateral parts", "Has two hemispheres", "None of these"], correct: 3 },
        { qE: "Irregular raised structures in the Cerebral Hemisphere are called?", qH: "‡§™‡•ç‡§∞‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ó‡•ã‡§≤‡§æ‡§∞‡•ç‡§¶‡•ç‡§ß ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§•‡§ø‡§§ ‡§Ö‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§‡§Ü‡§ï‡§æ‡§∞ ‡§â‡§≠‡§∞‡•Ä ‡§π‡•Å‡§à ‡§∏‡§Ç‡§∞‡§ö‡§®‡§æ ‡§ï‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", options: ["Corpus Callosum", "Gyri", "Sulcus", "Pons"], correct: 1 },
        { qE: "The center for intelligence and memory is located in?", qH: "‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø, ‡§ö‡§§‡•Å‡§∞‡§æ‡§à, ‡§∏‡•ç‡§Æ‡§∞‡§£-‡§∂‡§ï‡•ç‡§§‡§ø ‡§ï‡§æ ‡§ï‡•á‡§®‡•ç‡§¶‡•ç‡§∞ ‡§∏‡•ç‡§•‡§ø‡§§ ‡§π‡•à-", options: ["Cerebrum", "Cerebellum", "Diencephalon", "Medulla"], correct: 0 },
        { qE: "Which part controls involuntary acts like coughing and sneezing?", qH: "‡§ñ‡§æ‡§Å‡§∏‡§®‡§æ, ‡§õ‡•Ä‡§Ç‡§ï‡§®‡§æ ‡§î‡§∞ ‡§â‡§≤‡•ç‡§ü‡•Ä ‡§ï‡§∞‡§®‡§æ ‡§ú‡•à‡§∏‡•Ä ‡§Ö‡§®‡•à‡§ö‡•ç‡§õ‡§ø‡§ï ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à?", options: ["Pons Varolii", "Medulla Oblongata", "Cerebellum", "Cerebrum"], correct: 1 },
        { qE: "Which part of brain controls heart rate, blood pressure and breathing?", qH: "‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡§æ ‡§ï‡•å‡§®-‡§∏‡§æ ‡§≠‡§æ‡§ó ‡§π‡•É‡§¶‡§Ø ‡§ó‡§§‡§ø, ‡§∞‡§ï‡•ç‡§§‡§ö‡§æ‡§™ ‡§î‡§∞ ‡§∂‡•ç‡§µ‡§∏‡§® ‡§ó‡§§‡§ø ‡§ï‡•Ä ‡§¶‡§∞ ‡§ï‡•ã ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç?", options: ["Cerebellum", "Cerebrum", "Medulla Oblongata", "Pons"], correct: 2 },
        { qE: "What is the weight of the human brain?", qH: "‡§Æ‡§æ‡§®‡§µ ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡§æ ‡§µ‡§ú‡§® ‡§ï‡§ø‡§§‡§®‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", options: ["2% of body weight", "8% of body weight", "10% of body weight", "12% of body weight"], correct: 0 },
        { qE: "Average volume of human brain?", qH: "‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§ï‡•á ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡§æ ‡§î‡§∏‡§§ ‡§Ü‡§Ø‡§§‡§® ‡§ï‡§ø‡§§‡§®‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", options: ["800 mL", "1200 mL", "1400 mL", "1600 mL"], correct: 2 },
        { qE: "Weight of human brain in grams?", qH: "‡§Æ‡§æ‡§®‡§µ ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§≤‡§ó‡§≠‡§ó ‡§ï‡§ø‡§§‡§®‡•á ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§ï‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", options: ["1350", "1230", "1100", "1500"], correct: 0 },
        { qE: "Which is correct?", qH: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§®-‡§∏‡§æ ‡§è‡§ï ‡§∏‡§π‡•Ä ‡§π‡•à-", options: ["Cerebrum/Diencephalon are forebrain", "Midbrain controls eye muscles", "Hindbrain maintains balance", "All of these"], correct: 3 },
        { qE: "What is the membrane of Fibrous Connective Tissue surrounding the brain?", qH: "‡§§‡§Ç‡§§‡•Å‡§Æ‡§Ø ‡§∏‡§Ç‡§Ø‡•ã‡§ú‡•Ä ‡§â‡§§‡•ç‡§§‡§ï ‡§ï‡•Ä ‡§¨‡§®‡•Ä ‡§ù‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§ú‡•ã ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡•ã ‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§ì‡§∞ ‡§∏‡•á ‡§ò‡•á‡§∞‡•á ‡§∞‡§π‡§§‡•Ä ‡§π‡•à, ‡§â‡§∏‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", options: ["Sulcus", "Gyri", "Cranium", "Meninges"], correct: 3 },
        { qE: "The part of the skull where the brain is located is?", qH: "‡§Æ‡§æ‡§®‡§µ ‡§ñ‡•ã‡§™‡•ú‡•Ä ‡§ï‡§æ ‡§µ‡§π ‡§≠‡§æ‡§ó ‡§ú‡§π‡§æ‡§Å ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§∏‡•ç‡§•‡§ø‡§§ ‡§∞‡§π‡§§‡§æ ‡§π‡•à, ‡§â‡§∏‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç?", options: ["Cranium", "Synapse", "Cerebellum", "Cerebrum"], correct: 0 },
        { qE: "Which part of the brain is the center for memory and emotions?", qH: "‡§Æ‡§æ‡§®‡§µ ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡§æ ‡§ï‡•å‡§®-‡§∏‡§æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§∏‡•ç‡§Æ‡•É‡§§‡§ø ‡§î‡§∞ ‡§≠‡§æ‡§µ‡§®‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§ï‡•á‡§®‡•ç‡§¶‡•ç‡§∞ ‡§π‡•à-", options: ["Cerebrum", "Hypothalamus", "Corpus Callosum", "Midbrain"], correct: 0 },
        { qE: "Consider: Brain is responsible for regulating heart rate.", qH: "‡§ï‡§•‡§®‡•ã‡§Ç ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç- ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§π‡•É‡§¶‡§Ø ‡§ó‡§§‡§ø ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£", options: ["Only 1", "Only 2", "1 and 2 both", "Neither"], correct: 2 },
        { qE: "Regulator for swallowing and vomiting?", qH: "‡§®‡§ø‡§ó‡§≤‡§®‡•á ‡§§‡§•‡§æ ‡§â‡§ó‡§≤‡§®‡•á ‡§ï‡§æ ‡§®‡§ø‡§Ø‡§æ‡§Æ‡§ï ‡§ï‡•á‡§®‡•ç‡§¶‡•ç‡§∞ ‡§π‡•à?", options: ["Cerebellum", "Cerebrum", "Medulla", "Pons"], correct: 2 },
        { qE: "Brain part controlling hunger, thirst and satiety?", qH: "‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡§æ ‡§ï‡•å‡§®-‡§∏‡§æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§≠‡•Ç‡§ñ, ‡§™‡•ç‡§Ø‡§æ‡§∏ ‡§§‡§•‡§æ ‡§™‡§∞‡§ø‡§§‡•É‡§™‡•ç‡§§‡§ø ‡§ï‡§æ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ï‡•á‡§®‡•ç‡§¶‡•ç‡§∞ ‡§π‡•à?", options: ["Cerebral lobes", "Hypothalamus", "Thalamus", "Cerebellum"], correct: 1 },
        { qE: "Brain part controlling temperature, pain and crying?", qH: "‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡§æ ‡§ï‡•å‡§®-‡§∏‡§æ ‡§≠‡§æ‡§ó ‡§ï‡§Æ ‡§Ø‡§æ ‡§Ö‡§ß‡§ø‡§ï ‡§§‡§æ‡§™ ‡§ï‡•á ‡§Ü‡§≠‡§æ‡§∏ ‡§§‡§•‡§æ ‡§¶‡§∞‡•ç‡§¶ ‡§î‡§∞ ‡§∞‡•ã‡§®‡•á ‡§ú‡•à‡§∏‡•Ä ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?", options: ["Midbrain", "Cerebrum", "Diencephalon", "Cerebellum"], correct: 2 },
        { qE: "If the Cerebellum is destroyed...", qH: "‡§Ø‡§¶‡§ø ‡§ï‡§ø‡§∏‡•Ä ‡§ï‡§æ‡§∞‡§£‡§µ‡§∂ ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡§æ ‡§∏‡•á‡§∞‡•Ä‡§¨‡•á‡§≤‡§Æ ‡§π‡§ø‡§∏‡•ç‡§∏‡§æ ‡§®‡§∑‡•ç‡§ü ‡§π‡•ã ‡§ú‡§æ‡§Ø‡•á ‡§§‡•ã-", options: ["Voluntary control of limbs lost", "Difficulty talking", "Hearing affected", "All of these"], correct: 3 },
        { qE: "Number of Cranial Nerves?", qH: "‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§ï‡•á ‡§∂‡§∞‡•Ä‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡•ç‡§∞‡•á‡§®‡§ø‡§Ø‡§≤ ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡§ø‡§§‡§®‡•Ä ‡§π‡•à?", options: ["12 pairs", "13 pairs", "31 pairs", "32 pairs"], correct: 0 },
        { qE: "Number of Spinal Nerves?", qH: "‡§Æ‡§®‡•Å‡§∑‡•ç‡§Ø ‡§ï‡•á ‡§∂‡§∞‡•Ä‡§∞ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§™‡§æ‡§á‡§®‡§≤ ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§ï‡§ø‡§§‡§®‡•Ä ‡§π‡•à?", options: ["15 pairs", "31 pairs", "12 pairs", "32 pairs"], correct: 1 },
        { qE: "Muscle covering the top of the Cranium?", qH: "‡§ï‡•ç‡§∞‡•á‡§®‡§ø‡§Ø‡§Æ ‡§ï‡•á ‡§ä‡§™‡§∞‡•Ä ‡§≠‡§æ‡§ó ‡§ï‡•ã ‡§¢‡§Ç‡§ï‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§Æ‡§æ‡§Ç‡§∏‡§™‡•á‡§∂‡•Ä ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§π‡•à-", options: ["Galea aponeurotica", "Gelia aponeurotica", "Gelia perineurotica", "Gelia hyponeurotica"], correct: 0 },
        { qE: "Control center for Reflex Action?", qH: "‡§™‡•ç‡§∞‡§§‡§ø‡§µ‡§∞‡•ç‡§§‡•Ä ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡§æ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ï‡•á‡§®‡•ç‡§¶‡•ç‡§∞ ‡§π‡•à-", options: ["Brain", "Spinal Cord", "Cerebellum", "Cerebrum"], correct: 1 },
        { qE: "Eyelids closing when an insect flies near. What reaction is this?", qH: "‡§ï‡•Ä‡§ü‡•ã‡§Ç ‡§ï‡•á ‡§Ö‡§ö‡§æ‡§®‡§ï ‡§∏‡§æ‡§Æ‡§®‡•á ‡§∏‡•á ‡§â‡•ú‡§ï‡§∞ ‡§Ü‡§®‡•á ‡§™‡§∞ ‡§™‡§≤‡§ï‡•á‡§Ç ‡§¨‡§Ç‡§¶ ‡§π‡•ã ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§Ø‡§π ‡§ï‡•à‡§∏‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§π‡•à?", options: ["Simple Reflex", "Conditioned Reflex", "Voluntary", "None"], correct: 0 },
        { qE: "Consider: Spinal cord is center for reflex actions.", qH: "‡§ï‡§•‡§®‡•ã‡§Ç ‡§™‡§∞ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç- ‡§Æ‡•á‡§∞‡•Ç‡§ú‡•ç‡§ú‡•Å ‡§™‡•ç‡§∞‡§§‡§ø‡§µ‡§∞‡•ç‡§§‡•Ä ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ", options: ["Only 1", "Only 2", "1 and 2 both", "Neither"], correct: 2 },
        { qE: "Chemical secreted by Sympathetic Nervous System?", qH: "‡§∏‡§ø‡§Æ‡•ç‡§™‡§•‡•à‡§ü‡§ø‡§ï ‡§§‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡§æ ‡§§‡§Ç‡§§‡•ç‡§∞ ‡§ï‡§ø‡§∏ ‡§∞‡§∏‡§æ‡§Ø‡§® ‡§ï‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç?", options: ["Adrenaline", "Nor-adrenaline", "Acetylcholine", "All of these"], correct: 1 },
        { qE: "Location of Crura cerebri and Optic chiasma?", qH: "‡§ï‡•ç‡§∞‡•Ç‡§∞‡§æ ‡§∏‡•á‡§∞‡•á‡§¨‡•ç‡§∞‡•Ä (Crura cerebri) ‡§§‡§•‡§æ ‡§ë‡§™‡•ç‡§ü‡§ø‡§ï ‡§ï‡§æ‡§á‡§ú‡•ç‡§Æ‡§æ (Optic chiasma) ‡§∏‡•ç‡§•‡§ø‡§§ ‡§π‡•à-", options: ["Forebrain", "Midbrain", "Hindbrain", "Spinal Cord"], correct: 1 },
        { qE: "Organ affected by Alzheimer's?", qH: "‡§Ö‡§≤‡•ç‡§ú‡§æ‡§á‡§Æ‡§∞ ‡§∞‡•ã‡§ó ‡§Æ‡•á‡§Ç ‡§Æ‡§æ‡§®‡§µ ‡§ï‡§æ ‡§ï‡•å‡§®-‡§∏‡§æ ‡§Ö‡§Ç‡§ó ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§π‡•ã‡§§‡§æ ‡§π‡•à?", options: ["Lungs", "Brain", "Kidney", "Ear"], correct: 1 },
        { qE: "What is called Brain Sand?", qH: "‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏‡•á ‡§Æ‡§∏‡•ç‡§§‡§ø‡§∑‡•ç‡§ï ‡§ï‡§æ ‡§∞‡•á‡§§ (Brain Sand) ‡§ï‡§π‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?", options: ["Sodium", "Magnesium", "Potassium", "Copper"], correct: 1 } // Note: Usually Pineal sand (Ca/Mg), options suggest Mg context
    ];

    let currentQuestions = [];
    let currentIdx = 0;
    let score = 0;
    let timer = null;
    let timePerQ = 0;
    let isTransitioning = false;

    // Audio Context
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playSound(type) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain);
        gain.connect(audioCtx.destination);

        if (type === 'correct') {
            osc.frequency.setValueAtTime(880, audioCtx.currentTime); 
            osc.type = 'sine';
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.5);
        } else {
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.type = 'sawtooth';
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
            osc.start();
            osc.stop(audioCtx.currentTime + 0.4);
        }
    }

    // Confetti Logic
    function runConfetti() {
        const canvas = document.getElementById('confetti');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let pieces = [];
        for(let i=0; i<100; i++) pieces.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height - canvas.height,
            size: Math.random() * 10 + 5,
            color: `hsl(${Math.random()*360}, 100%, 50%)`,
            v: Math.random() * 3 + 2
        });
        function update() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            pieces.forEach(p => {
                p.y += p.v;
                ctx.fillStyle = p.color;
                ctx.fillRect(p.x, p.y, p.size, p.size);
            });
            if(pieces[0].y < canvas.height) requestAnimationFrame(update);
        }
        update();
    }

    function initQuiz() {
        const tVal = parseInt(document.getElementById('timer-input').value);
        timePerQ = isNaN(tVal) ? 0 : tVal;
        
        currentQuestions = [...questionData];
        if (document.getElementById('shuffle-toggle').checked) {
            currentQuestions.sort(() => Math.random() - 0.5);
        }

        currentIdx = 0;
        score = 0;
        document.getElementById('start-screen').classList.remove('active');
        document.getElementById('quiz-screen').classList.add('active');
        loadQuestion();
    }

    function loadQuestion() {
        if (currentIdx >= currentQuestions.length) return endQuiz();
        
        isTransitioning = false;
        const q = currentQuestions[currentIdx];
        document.getElementById('eng-q').innerText = q.qE;
        document.getElementById('hin-q').innerText = q.qH;
        document.getElementById('q-counter').innerText = `Question ${currentIdx + 1}/${currentQuestions.length}`;
        document.getElementById('score-counter').innerText = `Score: ${score}`;
        document.getElementById('progress').style.width = `${(currentIdx / currentQuestions.length) * 100}%`;

        const box = document.getElementById('options-box');
        box.innerHTML = '';
        q.options.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerHTML = `<span>${opt.split(' (')[0]}</span><small style="color:#bbb">${opt.includes('(') ? '(' + opt.split(' (')[1] : ''}</small>`;
            btn.onclick = () => checkAnswer(i, btn);
            box.appendChild(btn);
        });

        startTimer();
    }

    function startTimer() {
        clearInterval(timer);
        const display = document.getElementById('timer-display');
        if (timePerQ <= 0) {
            display.style.display = 'none';
            return;
        }
        display.style.display = 'flex';
        let timeLeft = timePerQ;
        display.innerText = timeLeft;
        display.classList.remove('timer-pulse');

        timer = setInterval(() => {
            timeLeft--;
            display.innerText = timeLeft;
            if (timeLeft < 5) display.classList.add('timer-pulse');
            if (timeLeft <= 0) {
                clearInterval(timer);
                checkAnswer(-1, null);
            }
        }, 1000);
    }

    function checkAnswer(idx, btn) {
        if (isTransitioning) return;
        isTransitioning = true;
        clearInterval(timer);

        const q = currentQuestions[currentIdx];
        const btns = document.querySelectorAll('.option-btn');
        btns.forEach(b => b.disabled = true);

        if (idx === q.correct) {
            btn.classList.add('correct');
            score++;
            playSound('correct');
            runConfetti();
        } else {
            if (btn) btn.classList.add('wrong');
            btns[q.correct].classList.add('correct');
            playSound('wrong');
            const emoji = document.getElementById('sad-emoji');
            emoji.style.display = 'block';
            emoji.classList.add('shake');
            setTimeout(() => {
                emoji.style.display = 'none';
                emoji.classList.remove('shake');
            }, 1000);
        }

        setTimeout(() => {
            currentIdx++;
            loadQuestion();
        }, 1500);
    }

    function endQuiz() {
        document.getElementById('quiz-screen').classList.remove('active');
        document.getElementById('result-screen').classList.add('active');
        const percent = Math.round((score / currentQuestions.length) * 100);
        document.getElementById('final-score').innerText = `${percent}%`;
        
        let msg = "";
        if (percent >= 80) msg = "üèÜ Outstanding Performance!";
        else if (percent >= 50) msg = "üëè Well Done! Keep it up.";
        else msg = "üìö Practice makes perfect! Try again.";
        document.getElementById('result-msg').innerText = msg;
    }
</script>
</body>
</html>