<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics Master Quiz (Q51-100)</title>
    <style>
        /* --- FONTS & GLOBAL --- */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

        :root {
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --accent-green: #00e676;
            --accent-red: #ff1744;
            --accent-blue: #2979ff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            /* Vibrant Mesh Gradient */
            background: radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                        radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                        radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            background-color: #1a1a2e;
            background-size: 200% 200%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            color: var(--text-primary);
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- GLASSMORPHISM CARD --- */
        .app-container {
            width: 100%;
            max-width: 800px;
            min-height: 85vh;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 25px;
            position: relative;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            display: flex;
            flex-direction: column;
            margin: 10px;
            transition: height 0.3s ease;
        }

        /* --- UTILITY & ANIMATION --- */
        .hidden { display: none !important; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        @keyframes pulseRed { 0% { color: white; } 50% { color: #ff1744; text-shadow: 0 0 10px #ff1744; transform: scale(1.1); } 100% { color: white; } }

        .fade-in { animation: fadeIn 0.5s ease forwards; }
        .shake { animation: shake 0.4s ease; }
        .pulse-text { animation: pulseRed 0.8s infinite; font-weight: bold; }

        /* --- START SCREEN --- */
        .start-screen {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex-grow: 1;
            gap: 20px;
        }

        .title h1 { font-size: 2.5rem; font-weight: 700; text-shadow: 0 4px 15px rgba(0,0,0,0.3); margin-bottom: 5px; background: linear-gradient(to right, #fff, #a5b4fc); -webkit-background-clip: text; -webkit-text-fill-color: transparent;}
        .title p { font-size: 1rem; color: var(--text-secondary); letter-spacing: 1px; }

        .controls {
            background: rgba(0,0,0,0.2);
            padding: 25px;
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .input-group { margin-bottom: 20px; text-align: left; }
        .input-group label { display: block; font-size: 0.9rem; margin-bottom: 8px; color: #ccc; }
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
            outline: none;
            transition: 0.3s;
        }
        .input-group input:focus { background: rgba(255,255,255,0.2); border-color: rgba(255,255,255,0.3); }

        .btn-start {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            padding: 15px 50px;
            border-radius: 50px;
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(118, 75, 162, 0.4);
            margin-top: 10px;
        }
        .btn-start:hover { transform: scale(1.05); box-shadow: 0 6px 20px rgba(118, 75, 162, 0.6); }

        /* --- QUIZ UI --- */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--glass-border);
            margin-bottom: 20px;
            position: relative;
        }

        .progress-bar-container {
            position: absolute;
            top: -25px; left: -25px;
            width: calc(100% + 50px);
            height: 6px;
            background: rgba(255,255,255,0.05);
            border-radius: 25px 25px 0 0;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00c6ff, #0072ff);
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px rgba(0, 114, 255, 0.7);
        }

        .header-item { text-align: center; }
        .header-label { font-size: 0.8rem; color: #aaa; display: block; text-transform: uppercase; letter-spacing: 1px; }
        .header-value { font-size: 1.3rem; font-weight: 700; }

        .timer-circle {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: rgba(0,0,0,0.2);
            border: 2px solid rgba(255,255,255,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.2rem;
            transition: color 0.3s;
        }

        .question-box { margin-bottom: 30px; padding: 10px; }
        .q-en { font-size: 1.4rem; font-weight: 600; display: block; margin-bottom: 10px; line-height: 1.4; color: #fff; }
        .q-hi { font-size: 1.1rem; color: #aaa; display: block; font-weight: 400; line-height: 1.5; }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        @media (max-width: 650px) { .options-grid { grid-template-columns: 1fr; } }

        .option-btn {
            background: rgba(255,255,255,0.08);
            border: 1px solid var(--glass-border);
            padding: 18px;
            border-radius: 16px;
            color: white;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        .option-btn:hover { background: rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.4); transform: translateY(-2px); }
        .option-btn span { display: block; pointer-events: none; }
        .opt-en { font-weight: 600; font-size: 1rem; margin-bottom: 5px; color: #fff; }
        .opt-hi { font-size: 0.9rem; color: #bbb; }

        /* Feedback States */
        .correct { 
            background: rgba(0, 230, 118, 0.2) !important; 
            border-color: var(--accent-green) !important; 
            box-shadow: 0 0 15px rgba(0, 230, 118, 0.3);
        }
        .wrong { 
            background: rgba(255, 23, 68, 0.2) !important; 
            border-color: var(--accent-red) !important; 
            box-shadow: 0 0 15px rgba(255, 23, 68, 0.3);
        }

        /* Large Emoji Overlay */
        .feedback-overlay {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 6rem;
            z-index: 20;
            pointer-events: none;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5));
        }

        .btn-finish {
            margin-top: 30px;
            width: 100%;
            padding: 15px;
            background: rgba(255, 23, 68, 0.1);
            border: 1px solid rgba(255, 23, 68, 0.3);
            color: #ff8a80;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .btn-finish:hover { background: var(--accent-red); color: white; box-shadow: 0 5px 15px rgba(255, 23, 68, 0.4); }

        /* --- RESULT SCREEN --- */
        .result-screen { text-align: center; padding: 20px; display: flex; flex-direction: column; justify-content: center; height: 100%; }
        .score-circle {
            width: 150px; height: 150px;
            border-radius: 50%;
            border: 8px solid rgba(255,255,255,0.1);
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 800;
            background: rgba(0,0,0,0.2);
            color: var(--accent-green);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .message { font-size: 1.8rem; margin-bottom: 30px; font-weight: 600; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; }
        .stat-item { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); }
        
        /* --- CONFETTI CANVAS --- */
        #confetti {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;
        }
    </style>
</head>
<body>

    <canvas id="confetti"></canvas>

    <div class="app-container">
        
        <div id="start-screen" class="start-screen fade-in">
            <div class="title">
                <h1>Physics Master</h1>
                <p>Questions 51-100 (Bilingual)</p>
            </div>
            
            <div class="controls">
                <div class="input-group">
                    <label>Timer per Question (Seconds)</label>
                    <input type="number" id="timerInput" placeholder="e.g. 20 (Leave 0 for no timer)" min="5">
                </div>
                <div class="input-group">
                    <label>Shuffle Questions?</label>
                    <select id="shuffleInput">
                        <option value="yes">Yes (Randomize)</option>
                        <option value="no">No (Sequential)</option>
                    </select>
                </div>
                <button class="btn-start" onclick="startGame()">Start Quiz</button>
            </div>
        </div>

        <div id="quiz-screen" class="hidden">
            <div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div>
            
            <div class="quiz-header">
                <div class="header-item">
                    <span class="header-label">Question</span>
                    <div class="header-value" id="q-counter">51/100</div>
                </div>
                <div class="header-item">
                    <span class="header-label">Score</span>
                    <div class="header-value" style="color: var(--accent-green);" id="score-display">0</div>
                </div>
                <div id="timer-display" class="timer-circle hidden">--</div>
            </div>

            <div class="question-box">
                <span id="q-text-en" class="q-en">Loading...</span>
                <span id="q-text-hi" class="q-hi">Loading...</span>
            </div>

            <div id="options-container" class="options-grid">
                </div>

            <div id="feedback-emoji" class="feedback-overlay hidden"></div>

            <button class="btn-finish" onclick="finishGame()">Finish & Show Results</button>
        </div>

        <div id="result-screen" class="hidden result-screen fade-in">
            <h2 style="margin-bottom: 20px;">Quiz Summary</h2>
            <div class="score-circle" id="final-score">0%</div>
            <p id="final-message" class="message">Message</p>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <small style="color:#aaa; display:block; margin-bottom:5px;">Attempted</small>
                    <div id="stat-total" style="font-weight:bold; font-size:1.4rem;">0</div>
                </div>
                <div class="stat-item">
                    <small style="color:#aaa; display:block; margin-bottom:5px;">Correct</small>
                    <div id="stat-correct" style="font-weight:bold; font-size:1.4rem; color: var(--accent-green)">0</div>
                </div>
            </div>

            <button class="btn-start" onclick="location.reload()">Restart Quiz</button>
        </div>

    </div>

<script>
/* DATA SOURCE: 
   Transcribed Questions 51 - 100 from provided images.
   Translations provided for missing English context based on Hindi text.
*/
const rawQuestions = [
    {
        qEn: "Energy in reflected light:",
        qHi: "परावर्तित प्रकाश में ऊर्जा–",
        opts: [
            { en: "Does not depend on angle of incidence", hi: "आपतन कोण पर निर्भर नहीं करती है" },
            { en: "Increases as angle of incidence increases", hi: "आपतन कोण के बढ़ने के साथ बढ़ती है", correct: true },
            { en: "Decreases as angle of incidence increases", hi: "आपतन कोण के बढ़ने के साथ घटती है" },
            { en: "Is maximum at 45° angle", hi: "आपतन कोण 45° के बराबर होने पर अधिकतम हो जाती है" }
        ]
    },
    {
        qEn: "If two bubbles of different diameters are connected by a tube, what will happen?",
        qHi: "यदि साबुन के दो भिन्न-भिन्न व्यास के बुलबुलों को एक नली द्वारा एक-दूसरे के सम्पर्क में लाया जाए, तो क्या घटित होगा ?",
        opts: [
            { en: "Size of both will remain same", hi: "दोनों बुलबुलों का आकार वही रहेगा" },
            { en: "Small gets smaller, large gets larger", hi: "छोटा बुलबुला और छोटा व बड़ा बुलबुला और बड़ा हो जाएगा", correct: true },
            { en: "Small gets larger to equal size", hi: "समान आकार प्राप्त करने के लिए छोटा बुलबुला बड़ा व बड़ा बुलबुला छोटा हो जाएगा" },
            { en: "Both will burst immediately", hi: "दोनों बुलबुले सम्पर्क में आते ही फट जाएँगे" }
        ]
    },
    {
        qEn: "The sun is visible to us a few minutes before actual sunrise because of:",
        qHi: "हमें वास्तविक सूर्योदय से कुछ मिनट पूर्व ही सूर्य दिखायी देने के कारण है–",
        opts: [
            { en: "Scattering of light", hi: "प्रकाश का प्रकीर्णन" },
            { en: "Diffraction of light", hi: "प्रकाश का विवर्तन" },
            { en: "Total internal reflection", hi: "प्रकाश का पूर्ण आन्तरिक परावर्तन" },
            { en: "Refraction of light", hi: "प्रकाश का अपवर्तन", correct: true }
        ]
    },
    {
        qEn: "There are seven colors in light. The method to separate them is:",
        qHi: "प्रकाश में सात रंग होते है। रंगों को अलग करने का क्या तरीका है ?",
        opts: [
            { en: "Using a Prism", hi: "एक प्रिज्म से रंगों को अलग-अलग किया जा सकता है", correct: true },
            { en: "Using a Filter", hi: "फिल्टर से रंगों को अलग-अलग किया जा सकता है" },
            { en: "Using plants", hi: "पौधों से रंगों को अलग-अलग किया जा सकता है" },
            { en: "Cannot be separated", hi: "रंगों को अलग-अलग नहीं किया जा सकता है" }
        ]
    },
    {
        qEn: "How is white light produced in a tube?",
        qHi: "श्वेत प्रकाश को नली में कैसे पैदा करते है ?",
        opts: [
            { en: "Heating copper wire", hi: "ताँबे के तार को गर्म करके" },
            { en: "Heating the filament", hi: "तन्तु को गर्म करके", correct: true },
            { en: "Exciting atoms", hi: "परमाणु को उत्तेजित करके" },
            { en: "Oscillating molecules", hi: "अणुओं को दोलित कर" }
        ]
    },
    {
        qEn: "The sun appears reddish near the horizon (sunrise/sunset). The reason is:",
        qHi: "जब सूर्य क्षितिज के निकट होता है, अर्थात् सुबह और शाम को, तब वह लालिमायुक्त दिखायी देता है। इसका कारण क्या है ?",
        opts: [
            { en: "Red light scattered least by atmosphere", hi: "लाल प्रकाश का वायुमण्डल द्वारा न्यूनतम प्रकीर्णन होता है", correct: true },
            { en: "Red light scattered most by atmosphere", hi: "लाल प्रकाश का वायुमण्डल द्वारा सर्वाधिक प्रकीर्णन होता है" },
            { en: "Sun is simply that color then", hi: "सुबह और शाम में सूर्य का यही रंग होता है" },
            { en: "Atmosphere emits red light", hi: "पृथ्वी का वायुमण्डल लाल प्रकाश उत्सर्जित करता है" }
        ]
    },
    {
        qEn: "On what principle does optical fiber used in communication work?",
        qHi: "संचार में प्रयुक्त फाइबर ऑप्टिक केवल किस सिद्धांत पर कार्य करता है ?",
        opts: [
            { en: "Regular reflection", hi: "प्रकाश के नियमित परावर्तन" },
            { en: "Diffuse reflection", hi: "प्रकाश के विकीर्ण परावर्तन" },
            { en: "Refraction", hi: "प्रकाश के अपवर्तन" },
            { en: "Total Internal Reflection", hi: "प्रकाश के पूर्ण आन्तरिक परावर्तन", correct: true }
        ]
    },
    {
        qEn: "The sun appears elliptical before setting because:",
        qHi: "सूर्य छिपने से पहले दीर्घवृत्तीय प्रतीत होता है, क्योंकि–",
        opts: [
            { en: "It changes shape", hi: "उस समय सूर्य अपना आकार परिवर्तित कर लेता है" },
            { en: "Scattering of light", hi: "प्रकाश का प्रकीर्णन हो जाता है" },
            { en: "Refraction of light", hi: "प्रकाश के अपवर्तन का प्रभाव पड़ता है", correct: true },
            { en: "Diffraction of light", hi: "प्रकाश के विवर्तन का प्रभाव पड़ता है" }
        ]
    },
    {
        qEn: "In what form does the signal travel in optical fiber communication?",
        qHi: "तन्तु प्रकाशिक संचार में संकेत किस रूप में प्रवाहित होता है ?",
        opts: [
            { en: "Light wave", hi: "प्रकाश तरंग", correct: true },
            { en: "Radio wave", hi: "रेडियो तरंग" },
            { en: "Microwave", hi: "सूक्ष्म तरंग" },
            { en: "Electric wave", hi: "विद्युत तरंग" }
        ]
    },
    {
        qEn: "Stars twinkle due to:",
        qHi: "तारे टिमटिमाते है–",
        opts: [
            { en: "Refraction", hi: "अपवर्तन के कारण", correct: true },
            { en: "Reflection", hi: "परावर्तन के कारण" },
            { en: "Polarization", hi: "ध्रुवण के कारण" },
            { en: "Scattering", hi: "प्रकीर्णन के कारण" }
        ]
    },
    {
        qEn: "Which type of glass can cut off UV rays?",
        qHi: "निम्नलिखित प्रकार के काँचों में से कौन-सा एक पराबैंगनी किरणों का विच्छेदन कर सकता है ?",
        opts: [
            { en: "Soda glass", hi: "सोडा काँच" },
            { en: "Pyrex glass", hi: "पाइरेक्स काँच" },
            { en: "Jena glass", hi: "जेना काँच" },
            { en: "Crookes glass", hi: "क्रूक्स काँच", correct: true }
        ]
    },
    {
        qEn: "Which of the following types absorbs light fastest?",
        qHi: "प्रकाश के निम्नलिखित प्रकारों में से किनका पौधे द्वारा तीव्र अवशोषण होता है ?",
        opts: [
            { en: "Violet and Orange", hi: "बैगनी और नारंगी" },
            { en: "Blue and Red", hi: "नीला और लाल", correct: true },
            { en: "Indigo and Yellow", hi: "इण्डिगो और पीला" },
            { en: "Yellow and Violet", hi: "पीला और बैगनी" }
        ]
    },
    {
        qEn: "Consider: 1. Size of sun at twilight 2. Color of sun at dawn 3. Moon at dawn 4. Twinkling stars 5. Polestar. Which are optical illusions?",
        qHi: "निम्नलिखित परिघटनाओं पर विचार कीजिए– (Which depend on optical illusion?)",
        opts: [
            { en: "1, 2 and 3", hi: "1, 2 और 3" },
            { en: "3, 4 and 5", hi: "3, 4 और 5" },
            { en: "1, 2 and 4", hi: "1, 2 और 4", correct: true },
            { en: "2, 3 and 5", hi: "2, 3 और 5" }
        ]
    },
    {
        qEn: "Assertion (A): Red light is more energetic than violet. Reason (R): Red has longer wavelength.",
        qHi: "कथन (A): प्रकाश के दृश्य वर्णक्रम में लाल प्रकाश हरे प्रकाश की अपेक्षा अधिक ऊर्जावान होता है। ... (Simplified for context)",
        opts: [
            { en: "Both true, R explains A", hi: "A तथा R दोनों सही है..." },
            { en: "Both true, R doesn't explain A", hi: "A तथा R दोनों सही है..." },
            { en: "A is true, R is false", hi: "A सही है, परन्तु R गलत है" },
            { en: "A is false, R is true", hi: "A गलत है, परन्तु R सही है", correct: true }
        ]
    },
    {
        qEn: "Which has the highest energy?",
        qHi: "निम्नलिखित में से किसमें उच्चतम ऊर्जा होती है ?",
        opts: [
            { en: "Blue light", hi: "नीला प्रकाश", correct: true },
            { en: "Green light", hi: "हरा प्रकाश" },
            { en: "Red light", hi: "लाल प्रकाश" },
            { en: "Yellow light", hi: "पीला प्रकाश" }
        ]
    },
    {
        qEn: "When light passes from air to glass, which variables are affected?",
        qHi: "जब प्रकाश की तरंगें वायु से काँच में होकर गुजरती है, तब कौन से परिवर्त्य प्रभावित होंगे ?",
        opts: [
            { en: "Wavelength, Frequency, Velocity", hi: "तरंगदैर्घ्य, आवृत्ति एवं वेग" },
            { en: "Velocity and Frequency", hi: "केवल वेग तथा आवृत्ति" },
            { en: "Wavelength and Frequency", hi: "केवल तरंगदैर्घ्य तथा आवृत्ति" },
            { en: "Wavelength and Velocity", hi: "केवल तरंगदैर्घ्य तथा वेग", correct: true }
        ]
    },
    {
        qEn: "A person entering a dark room from bright light can't see initially, then sees slowly. Why?",
        qHi: "जब, एक व्यक्ति तीव्र प्रकाश क्षेत्र से अंधेरे कमरे में प्रवेश करता है...",
        opts: [
            { en: "Changes in pupil size", hi: "पुतली के आकार में परिवर्तन" },
            { en: "Lens diameter change", hi: "लेन्स के व्यास और फोकस दूरी में परिवर्तन" },
            { en: "Regeneration of Rhodopsin", hi: "रोडोप्सिन का विरंजक व पुनः विरंचन होना", correct: true },
            { en: "Eye adaptation time", hi: "आँखों का अन्धेरे के प्रति कुछ समय में अनुकूलित होना" }
        ]
    },
    {
        qEn: "Defect where lines in one plane are clear but other plane are blurry?",
        qHi: "उस दृष्टिदोष को क्या कहते है, जिसमें किसी पदार्थ के एक तल में बिन्दु केन्द्र में दिखाई देते है, जबकि दूसरे तल में...",
        opts: [
            { en: "Hypermetropia", hi: "दीर्घदृष्टि" },
            { en: "Distortion", hi: "विकृति" },
            { en: "Astigmatism", hi: "अबिन्दुकता", correct: true },
            { en: "Myopia", hi: "निकटदृष्टि" }
        ]
    },
    {
        qEn: "What kind of image does a concave lens always form?",
        qHi: "अवतल लेंस हमेशा किस प्रकार का प्रतिबिम्ब बनाते है ?",
        opts: [
            { en: "Real Image", hi: "वास्तविक प्रतिबिम्ब" },
            { en: "Virtual Image", hi: "आभासी प्रतिबिम्ब", correct: true },
            { en: "Matching object characteristics", hi: "वस्तु की विशेषता के अनुरूप" },
            { en: "Matches lens curvature", hi: "लेंस की वक्रता के अनुरूप" }
        ]
    },
    {
        qEn: "The image formed on the retina is:",
        qHi: "दृष्टि पटल (Retina) पर बना प्रतिबिम्ब होता है–",
        opts: [
            { en: "Equal to object, inverted", hi: "वस्तु के बराबर लेकिन उल्टा" },
            { en: "Smaller than object, erect", hi: "वस्तु से छोटा लेकिन सीधा" },
            { en: "Equal to object, erect", hi: "वस्तु के बराबर लेकिन सीधा" },
            { en: "Smaller than object, inverted", hi: "वस्तु से छोटा लेकिन उल्टा", correct: true }
        ]
    },
    {
        qEn: "Which part controls the amount of light entering the eye?",
        qHi: "आंख के किस भाग द्वारा आंख में प्रवेश करने वाले प्रकाश की मात्रा नियंत्रित होती है ?",
        opts: [
            { en: "Retina", hi: "रेटिना" },
            { en: "Cornea", hi: "कॉर्निया" },
            { en: "Iris", hi: "आइरिस", correct: true },
            { en: "Eye-ball", hi: "आई-बॉल" }
        ]
    },
    {
        qEn: "In eye donation, which part of the donor's eye is transplanted?",
        qHi: "नेत्रदान में दाता की आंख के किस हिस्से को प्रतिरोपित किया जाता है ?",
        opts: [
            { en: "Cornea", hi: "कॉर्निया", correct: true },
            { en: "Lens", hi: "लेन्स" },
            { en: "Retina", hi: "रेटिना" },
            { en: "Whole eye", hi: "पूरी आंख" }
        ]
    },
    {
        qEn: "Where are light waves converted into nerve impulses in the eye?",
        qHi: "मनुष्य की आंख में प्रकाश तरंगें किस स्थान पर स्नायु उद्वेगों में परिवर्तित होती है ?",
        opts: [
            { en: "Cornea", hi: "कॉर्निया से" },
            { en: "Nerve centre", hi: "नेत्र तारा से" },
            { en: "Retina", hi: "रेटिना से", correct: true },
            { en: "Lens", hi: "लेन्स से" }
        ]
    },
    {
        qEn: "The least distance of distinct vision for a healthy eye is:",
        qHi: "मानव की सामान्य स्वस्थ आंख के लिए स्पष्ट दृष्टि की न्यूनतम दूरी मापी जाती है–",
        opts: [
            { en: "50 cm", hi: "50 cm" },
            { en: "10 cm", hi: "10 cm" },
            { en: "15 cm", hi: "15 cm" },
            { en: "25 cm", hi: "25 cm", correct: true }
        ]
    },
    {
        qEn: "If a person cannot see distant objects clearly, they suffer from:",
        qHi: "यदि कोई व्यक्ति दूर की वस्तुओं को स्पष्ट नहीं देख सकता है तो उसकी दृष्टि में कौन-सा दोष होगा ?",
        opts: [
            { en: "Hypermetropia", hi: "दूर दृष्टि" },
            { en: "Myopia", hi: "निकट दृष्टि", correct: true },
            { en: "Astigmatism", hi: "दृष्टि वैषम्य" },
            { en: "None", hi: "इनमें से कोई नहीं" }
        ]
    },
    {
        qEn: "A person with Myopia (Near-sightedness) can see:",
        qHi: "दृष्टिदोष मायोपिया वाला व्यक्ति देख सकता है–",
        opts: [
            { en: "Near objects clearly", hi: "नजदीक स्थित वस्तु को स्पष्ट रूप से", correct: true },
            { en: "Distant objects clearly", hi: "दूर स्थित वस्तु को स्पष्ट रूप से" },
            { en: "Both clearly", hi: "नजदीक एवं दूर स्थित वस्तुओं दोनों को स्पष्ट रूप से" },
            { en: "Neither clearly", hi: "न ही नजदीक की और न ही दूर स्थित वस्तुओं को" }
        ]
    },
    {
        qEn: "Myopia (Near-sightedness) is cured by using:",
        qHi: "निकट दृष्टि दोष की रोग मुक्ति होती है–",
        opts: [
            { en: "Convex lens", hi: "उत्तल लेंस द्वारा" },
            { en: "Concave lens", hi: "अवतल लेंस द्वारा", correct: true },
            { en: "Cylindrical lens", hi: "सिलिंडरी लेंस द्वारा" },
            { en: "None", hi: "उपर्युक्त में से कोई नहीं" }
        ]
    },
    {
        qEn: "A person suffering from Hypermetropia (Far-sightedness):",
        qHi: "दूर दृष्टि दोष से पीड़ित व्यक्ति को–",
        opts: [
            { en: "Cannot see far objects", hi: "दूर की वस्तुएँ दिखायी नहीं देती है।" },
            { en: "Cannot see near objects", hi: "निकट की वस्तुएँ दिखायी नहीं देती है।", correct: true },
            { en: "Sees objects tilted", hi: "वस्तुएँ तिरछी दिखायी देती है।" },
            { en: "Sees objects inverted", hi: "वस्तुएँ उल्टी दिखायी देती है।" }
        ]
    },
    {
        qEn: "Which lens is used in spectacles for Hypermetropia?",
        qHi: "दूर दृष्टि दोष से पीड़ित व्यक्ति के चश्मे में कौन-सा लेन्स प्रयोग किया जाता है ?",
        opts: [
            { en: "Convex Lens", hi: "उत्तल लेन्स", correct: true },
            { en: "Concave Lens", hi: "अवतल लेन्स" },
            { en: "Flat Lens", hi: "समतल लेन्स" },
            { en: "Flat-Concave", hi: "समतल-अवतल लेन्स" }
        ]
    },
    {
        qEn: "In old age, vision defect occurs because the eye lens:",
        qHi: "बुढ़ापे में दूर दृष्टिता वह खराबी होती है, जिसमें लेन्स–",
        opts: [
            { en: "Loses elasticity", hi: "अपनी प्रत्यास्थता खो देता है", correct: true },
            { en: "Becomes transparent", hi: "अधिक पारदर्शी हो जाता है" },
            { en: "Becomes opaque", hi: "अपारदर्शी हो जाता है" },
            { en: "Becomes very small", hi: "बहुत अधिक छोटा हो जाता है" }
        ]
    },
    {
        qEn: "Color blindness can be cured by which lens?",
        qHi: "वर्णान्धता को किस लेन्स से दूर किया जा सकता है ?",
        opts: [
            { en: "Concave", hi: "अवतल लेन्स" },
            { en: "Convex", hi: "उत्तल लेन्स" },
            { en: "Cylindrical", hi: "बेलनाकार लेन्स" },
            { en: "None", hi: "इनमें से कोई नहीं", correct: true }
        ]
    },
    {
        qEn: "Which lens is used to treat Presbyopia?",
        qHi: "जरा दृष्टि दोष (Presbyopia) के उपचार के लिए प्रयुक्त होता है–",
        opts: [
            { en: "Concave", hi: "अवतल लेन्स" },
            { en: "Convex", hi: "उत्तल लेन्स" },
            { en: "Convex Mirror", hi: "उत्तल दर्पण" },
            { en: "Bifocal Lens", hi: "बायफोकल लेन्स", correct: true }
        ]
    },
    {
        qEn: "The human eye is like a camera. What does the lens system form?",
        qHi: "मानव नेत्र एक कैमरे के समान है, अतः इसमें एक लेन्स निकाय है। नेत्र लेन्स क्या बनाता है ?",
        opts: [
            { en: "Upright, real image on retina", hi: "दृष्टि पटल पर पिण्ड का सीधा या ऊर्ध्वाधर वास्तविक प्रतिबिम्ब" },
            { en: "Inverted, virtual image on retina", hi: "दृष्टि पटल पर पिण्ड का प्रतिलोमित, आभासी प्रतिबिम्ब" },
            { en: "Inverted, real image on retina", hi: "दृष्टि पटल पर पिण्ड का प्रतिलोमित, वास्तविक प्रतिबिम्ब", correct: true },
            { en: "Upright, real image on Iris", hi: "आइरिश पर पिण्ड का सीधा या ऊर्ध्वाधर, वास्तविक प्रतिबिम्ब" }
        ]
    },
    {
        qEn: "Match List I (Defect) with List II (Cure): A. Myopia B. Hypermetropia C. Presbyopia D. Astigmatism",
        qHi: "सूची-I को सूची-II से सुमेलित कीजिए: A. निकट दृष्टि B. दूर दृष्टि C. जरा दृष्टि D. अबिन्दुकता",
        opts: [
            { en: "A-1, B-2, C-3, D-4", hi: "1-2-3-4" },
            { en: "A-1, B-4, C-3, D-2", hi: "1-4-3-2" },
            { en: "A-4, B-3, C-2, D-1", hi: "4-3-2-1" },
            { en: "A-4, B-1, C-2, D-3", hi: "4-1-2-3 (Concave, Convex, Bifocal, Cylindrical)", correct: true }
        ]
    },
    {
        qEn: "How should microscope users use spectacles?",
        qHi: "चश्मा प्रयुक्त करने वाले व्यक्तियों को सूक्ष्मदर्शी का प्रयोग किस प्रकार करना चाहिए ?",
        opts: [
            { en: "Keep wearing them", hi: "ये सूक्ष्मदर्शी का प्रयोग कर सकते हैं" },
            { en: "Take them off", hi: "उन्हें चश्मा पहने रहना चाहिए" },
            { en: "Take them off (Correction)", hi: "उन्हें चश्मा उतार देना चाहिए", correct: true },
            { en: "Doesn't matter", hi: "चाहे वह चश्मा उतार दे या पहने रहे, इससे कोई अंतर नहीं पड़ता" }
        ]
    },
    {
        qEn: "Which statement is false?",
        qHi: "निम्नलिखित में कौन-सा कथन असत्य है ?",
        opts: [
            { en: "Concave lens used for Myopia", hi: "निकट दृष्टि दोष में अवतल लेन्स का चश्मा दिया जाता है।" },
            { en: "Convex lens used for Hypermetropia", hi: "दूर दृष्टि दोष में उत्तल लेन्स का चश्मा दिया जाता है।" },
            { en: "Bifocal used for Presbyopia", hi: "जरा दृष्टि दोष में बायफोकल लेन्स का चश्मा दिया जाता है।" },
            { en: "Bifocal used for Astigmatism", hi: "अबिन्दुकता के उपचार हेतु बायफोकस लेन्स का चश्मा दिया जाता है।", correct: true }
        ]
    },
    {
        qEn: "What is used for correcting Hypermetropia?",
        qHi: "दूर दृष्टि निवारण के लिए काम में लेते हैं–",
        opts: [
            { en: "Concave lens", hi: "अवतल लेन्स" },
            { en: "Convex mirror", hi: "उत्तल दर्पण" },
            { en: "Convex lens", hi: "उत्तल लेन्स", correct: true },
            { en: "Concave mirror", hi: "अवतल दर्पण" }
        ]
    },
    {
        qEn: "What is meant by Myopia?",
        qHi: "मायोपिया से क्या तात्पर्य है ?",
        opts: [
            { en: "Far-sightedness", hi: "दूर दृष्टि दोष" },
            { en: "Near-sightedness", hi: "निकट दृष्टि दोष", correct: true },
            { en: "Color blindness", hi: "वर्णान्धता" },
            { en: "Night blindness", hi: "रतौंधी" }
        ]
    },
    {
        qEn: "What is meant by Hypermetropia?",
        qHi: "हाइपरमेट्रोपिया (Hypermetropia) का अर्थ है–",
        opts: [
            { en: "Near-sightedness", hi: "निकट दृष्टि दोष" },
            { en: "Far-sightedness", hi: "दूर दृष्टि दोष", correct: true },
            { en: "Presbyopia", hi: "जरा दूरदृष्टि" },
            { en: "Pressbiopia", hi: "प्रेसबायोपिया" }
        ]
    },
    {
        qEn: "A man cannot see clearly beyond 10 meters. Which defect is this?",
        qHi: "एक आदमी 10 मीटर से अधिक दूरी की वस्तु स्पष्ट नहीं देख पाता है। वह किस दृष्टिदोष से पीड़ित है ?",
        opts: [
            { en: "Hypermetropia", hi: "हाइपर मेट्रोपिया" },
            { en: "Hydrophobia", hi: "हाइड्रोफोबिया" },
            { en: "Myopia", hi: "मायोपिया", correct: true },
            { en: "Cataract", hi: "कैटारेक्ट" }
        ]
    },
    {
        qEn: "A man cannot see clearly closer than 1 meter. Which defect is this?",
        qHi: "एक मनुष्य 1 मीटर से कम दूरी की वस्तु को स्पष्ट नहीं देख सकता है। वह व्यक्ति किस दोष से पीड़ित है ?",
        opts: [
            { en: "Hypermetropia", hi: "दूर दृष्टि", correct: true },
            { en: "Myopia", hi: "निकट दृष्टि" },
            { en: "Cataract", hi: "ताल का रोग" },
            { en: "None", hi: "इनमें से कोई नहीं" }
        ]
    },
    {
        qEn: "Lumen is the unit of:",
        qHi: "ल्यूमेन एकक है–",
        opts: [
            { en: "Luminous Flux", hi: "ज्योति फ्लक्स का", correct: true },
            { en: "Luminous Intensity", hi: "ज्योति तीव्रता का" },
            { en: "Illuminance density", hi: "प्रदीप्ति घनत्व का" },
            { en: "Brightness", hi: "चमक का" }
        ]
    },
    {
        qEn: "What is a Telescope?",
        qHi: "दूरबीन (Telescope) क्या है ?",
        opts: [
            { en: "To see distant objects", hi: "दूर की वस्तु देखी जाती है", correct: true },
            { en: "To see near objects", hi: "नजदीक की वस्तु देखी जाती है" },
            { en: "To measure water depth", hi: "पानी की गहराई मापी जाती है" },
            { en: "None", hi: "इनमें से कोई नहीं" }
        ]
    },
    {
        qEn: "What is used to see small parts of a watch?",
        qHi: "घड़ी साज के बारीक पुर्जों को देखने के लिए किसका उपयोग करता है ?",
        opts: [
            { en: "Photo camera", hi: "फोटो कैमरा का" },
            { en: "Magnifying lens", hi: "आवर्द्धक लेन्स", correct: true },
            { en: "Compound microscope", hi: "संयुक्त सूक्ष्मदर्शी" },
            { en: "Telescope", hi: "दूरदर्शी" }
        ]
    },
    {
        qEn: "Which instrument is used in biology labs to see magnified images of cells?",
        qHi: "जीव विज्ञान की प्रयोगशालाओं में सूक्ष्म कोशिकाओं या जीवों के आवर्द्धित प्रतिबिम्ब देखने के लिए किसका उपयोग किया जाता है ?",
        opts: [
            { en: "Photo camera", hi: "फोटो कैमरा" },
            { en: "Magnifying lens", hi: "आवर्द्धक लेन्स" },
            { en: "Compound microscope", hi: "संयुक्त सूक्ष्मदर्शी", correct: true },
            { en: "Telescope", hi: "दूरदर्शी" }
        ]
    },
    {
        qEn: "Which optical instrument is used to inspect distant objects?",
        qHi: "दूर की वस्तुओं के निरीक्षण के लिए किस प्रकाशिक यंत्र का उपयोग किया जाता है ?",
        opts: [
            { en: "Simple microscope", hi: "सरल सूक्ष्मदर्शी" },
            { en: "Compound microscope", hi: "संयुक्त सूक्ष्मदर्शी" },
            { en: "Electron microscope", hi: "इलेक्ट्रॉन माइक्रोस्कोप" },
            { en: "Telescope", hi: "दूरदर्शी", correct: true }
        ]
    },
    {
        qEn: "Who invented the Telescope?",
        qHi: "दूरबीन का आविष्कार किया था–",
        opts: [
            { en: "Galileo", hi: "गैलिलियो", correct: true },
            { en: "Gutenberg", hi: "गुटिनबर्ग" },
            { en: "Edison", hi: "एडीसन" },
            { en: "Graham Bell", hi: "ग्राह्य बेल" }
        ]
    },
    {
        qEn: "Concave lens is used to improve:",
        qHi: "अवतल लेंस प्रयुक्त होता है, सुधार हेतु–",
        opts: [
            { en: "Cataract", hi: "मोतियाबिन्द" },
            { en: "Hypermetropia", hi: "दीर्घदृष्टि" },
            { en: "Myopia", hi: "निकट दृष्टि", correct: true },
            { en: "Presbyopia", hi: "दूर दृष्टि" } // Text in image D says 'Door Drishti' which is usually Hyper, but B is Dirgh which is also Hyper. Myopia is C.
        ]
    },
    {
        qEn: "Light is made up of small particles called:",
        qHi: "प्रकाश छोटे-छोटे कणों से मिलकर बना है, जिसे कहते है–",
        opts: [
            { en: "Atoms", hi: "परमाणु" },
            { en: "Neutrons", hi: "न्यूट्रॉन" },
            { en: "Positrons", hi: "पोजित्रॉन" },
            { en: "Photons", hi: "फोटॉन", correct: true }
        ]
    },
    {
        qEn: "Which type of wave is a light wave?",
        qHi: "प्रकाश तरंग किस प्रकार की तरंग है ?",
        opts: [
            { en: "Transverse wave", hi: "अनुप्रस्थ तरंग", correct: true },
            { en: "Longitudinal wave", hi: "अनुदैर्ध्य तरंग" },
            { en: "Both", hi: "उपर्युक्त दोनों" },
            { en: "None", hi: "इनमें से कोई नहीं" }
        ]
    }
];

/* --- LOGIC --- */
let questions = [];
let currentQuestionIndex = 0;
let score = 0;
let timerInterval;
let timeLeft;
let userTimerSetting = 0;
let audioContext;

// Audio Synth
function playSound(type) {
    if (!audioContext) audioContext = new (window.AudioContext || window.webkitAudioContext)();
    
    const osc = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    osc.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    if (type === 'correct') {
        osc.type = 'triangle';
        osc.frequency.setValueAtTime(500, audioContext.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1000, audioContext.currentTime + 0.1);
        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);
        osc.start();
        osc.stop(audioContext.currentTime + 0.5);
    } else if (type === 'wrong') {
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(150, audioContext.currentTime);
        osc.frequency.linearRampToValueAtTime(100, audioContext.currentTime + 0.3);
        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.3);
        osc.start();
        osc.stop(audioContext.currentTime + 0.3);
    }
}

// Confetti
const canvas = document.getElementById('confetti');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let particles = [];

function createConfetti() {
    for (let i = 0; i < 60; i++) {
        particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height * 0.5 - canvas.height,
            speed: Math.random() * 5 + 3,
            color: `hsl(${Math.random() * 360}, 80%, 60%)`,
            size: Math.random() * 8 + 4,
            oscillation: Math.random() * 2
        });
    }
}

function updateConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach((p, index) => {
        p.y += p.speed;
        p.x += Math.sin(p.y * 0.01 + p.oscillation);
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
        ctx.fill();
        if (p.y > canvas.height) particles.splice(index, 1);
    });
    if(particles.length > 0) requestAnimationFrame(updateConfetti);
}

// Quiz Functions
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function startGame() {
    const timeInput = document.getElementById('timerInput').value;
    const shuffleInput = document.getElementById('shuffleInput').value;
    
    userTimerSetting = timeInput ? parseInt(timeInput) : 0;
    
    questions = JSON.parse(JSON.stringify(rawQuestions));
    if (shuffleInput === 'yes') shuffleArray(questions);
    
    currentQuestionIndex = 0;
    score = 0;
    
    document.getElementById('start-screen').classList.add('hidden');
    document.getElementById('result-screen').classList.add('hidden');
    document.getElementById('quiz-screen').classList.remove('hidden');
    
    const timerDisplay = document.getElementById('timer-display');
    if (userTimerSetting > 0) timerDisplay.classList.remove('hidden');
    else timerDisplay.classList.add('hidden');

    loadQuestion();
}

function loadQuestion() {
    const q = questions[currentQuestionIndex];
    
    // UI Updates
    document.getElementById('q-counter').innerText = `${(currentQuestionIndex + 1).toString().padStart(2, '0')}/${questions.length}`;
    document.getElementById('score-display').innerText = score;
    
    const progress = ((currentQuestionIndex) / questions.length) * 100;
    document.getElementById('progress-bar').style.width = `${progress}%`;

    // Render Text
    document.getElementById('q-text-en').innerText = q.qEn;
    document.getElementById('q-text-hi').innerText = q.qHi;
    
    // Render Options
    const optContainer = document.getElementById('options-container');
    optContainer.innerHTML = '';
    
    q.opts.forEach((opt, idx) => {
        const btn = document.createElement('div');
        btn.className = 'option-btn';
        btn.onclick = () => checkAnswer(idx, btn);
        btn.innerHTML = `
            <span class="opt-en">${['A','B','C','D'][idx]}. ${opt.en}</span>
            <span class="opt-hi">${opt.hi}</span>
        `;
        optContainer.appendChild(btn);
    });

    // Reset Emoji
    document.getElementById('feedback-emoji').innerHTML = '';
    document.getElementById('feedback-emoji').classList.add('hidden');

    // Timer Logic
    clearInterval(timerInterval);
    const timerEl = document.getElementById('timer-display');
    timerEl.classList.remove('pulse-text');
    timerEl.style.color = "white";

    if (userTimerSetting > 0) {
        timeLeft = userTimerSetting;
        timerEl.innerText = timeLeft;
        
        timerInterval = setInterval(() => {
            timeLeft--;
            timerEl.innerText = timeLeft;
            
            if (timeLeft <= 5) {
                timerEl.classList.add('pulse-text');
                timerEl.style.color = "#ff1744";
            }

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                playBuzz();
                disableOptions();
                setTimeout(() => nextQuestion(), 1500);
            }
        }, 1000);
    }
}

function checkAnswer(selectedIndex, btnElement) {
    clearInterval(timerInterval);
    const q = questions[currentQuestionIndex];
    const isCorrect = q.opts[selectedIndex].correct;
    
    disableOptions();

    const emojiContainer = document.getElementById('feedback-emoji');
    emojiContainer.classList.remove('hidden');

    if (isCorrect) {
        score++;
        btnElement.classList.add('correct');
        playSound('correct');
        createConfetti();
        updateConfetti();
        emojiContainer.innerText = '🎉';
    } else {
        btnElement.classList.add('wrong');
        playSound('wrong');
        emojiContainer.innerText = '😢';
        emojiContainer.classList.add('shake');
        
        // Highlight correct answer
        const allBtns = document.querySelectorAll('.option-btn');
        q.opts.forEach((opt, i) => {
            if (opt.correct) allBtns[i].classList.add('correct');
        });
    }

    document.getElementById('score-display').innerText = score;

    setTimeout(() => {
        emojiContainer.classList.remove('shake');
        nextQuestion();
    }, 1500);
}

function disableOptions() {
    const btns = document.querySelectorAll('.option-btn');
    btns.forEach(b => {
        b.style.pointerEvents = 'none';
        b.style.opacity = '0.7';
    });
}

function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
        loadQuestion();
    } else {
        finishGame();
    }
}

function finishGame() {
    clearInterval(timerInterval);
    document.getElementById('quiz-screen').classList.add('hidden');
    document.getElementById('result-screen').classList.remove('hidden');
    
    // Early Exit Logic: Calculate percentage based on questions ATTEMPTED/SEEN so far.
    // If currentQuestionIndex is 0 (immediate click), avoid division by zero.
    const questionsSeen = currentQuestionIndex === 0 ? 1 : currentQuestionIndex;
    
    // Note: If user clicked finish mid-quiz, currentQuestionIndex is where they stopped.
    // If they finished naturally, currentQuestionIndex equals questions.length.
    
    const displayTotal = currentQuestionIndex;
    const percentage = Math.round((score / (displayTotal || 1)) * 100);
    
    const scoreEl = document.getElementById('final-score');
    scoreEl.innerText = percentage + "%";
    
    document.getElementById('stat-total').innerText = displayTotal;
    document.getElementById('stat-correct').innerText = score;

    const msgEl = document.getElementById('final-message');
    if (percentage >= 80) msgEl.innerText = "🏆 Outstanding Performance!";
    else if (percentage >= 50) msgEl.innerText = "👏 Well Done! Keep it up.";
    else msgEl.innerText = "📚 Practice makes perfect!";
}

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

</script>
</body>
</html>